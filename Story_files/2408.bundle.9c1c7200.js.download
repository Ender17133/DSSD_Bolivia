/*! For license information please see 2408.bundle.9c1c7200.js.LICENSE.txt */
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[2408],{48511:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n(2477)),l=n(39121),c=o(n(91987));function u(e,t,n,r){const i=t?null:function(e){const t={};return e.bg&&(t.backgroundColor=`rgb(${e.bg})`),e.fg&&(t.color=`rgb(${e.fg})`),t}(n),o=t?function(e){let t="";return e.bg&&(t+=`${e.bg}-bg `),e.fg&&(t+=`${e.fg}-fg `),e.decoration&&(t+=`ansi-${e.decoration} `),""===t?null:(t=t.substring(0,t.length-1),t)}(n):null;if(!e)return c.createElement("span",{style:i,key:r,className:o},n.content);const a=[],s=/(\s+|^)(https?:\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})(\s+|$)/g;let l,u=0;for(;null!==(l=s.exec(n.content));){const[,e,t,r]=l,i=l.index+e.length;i>u&&a.push(n.content.substring(u,i));const o=t.startsWith("www.")?`http://${t}`:t;a.push(c.createElement("a",{key:u,href:o,target:"_blank"},`${t}`));u=s.lastIndex-r.length}return u<n.content.length&&a.push(n.content.substring(u)),c.createElement("span",{style:i,key:r,className:o},a)}t.default=function(e){const{className:t,useClasses:n,children:r,linkify:i}=e;return c.createElement("code",{className:t},function(e,t=!1){return e=l.escapeCarriageReturn(e),s.default.ansiToJson(e,{json:!0,remove_empty:!0,use_classes:t})}(null!=r?r:"",null!=n&&n).map(u.bind(null,null!=i&&i,null!=n&&n)))}},95290:(e,t,n)=>{"use strict";var r=n(91987);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=Object.prototype.hasOwnProperty,a=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s={},l={};function c(e){return!!o.call(l,e)||!o.call(s,e)&&(a.test(e)?l[e]=!0:(s[e]=!0,!1))}function u(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var d={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){d[e]=new u(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];d[t]=new u(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){d[e]=new u(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){d[e]=new u(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){d[e]=new u(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){d[e]=new u(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){d[e]=new u(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){d[e]=new u(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){d[e]=new u(e,5,!1,e.toLowerCase(),null,!1,!1)}));var f=/[\-:]([a-z])/g;function p(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(f,p);d[t]=new u(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(f,p);d[t]=new u(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(f,p);d[t]=new u(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){d[e]=new u(e,1,!1,e.toLowerCase(),null,!1,!1)})),d.xlinkHref=new u("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){d[e]=new u(e,1,!1,e.toLowerCase(),null,!0,!0)}));var h={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g=["Webkit","ms","Moz","O"];Object.keys(h).forEach((function(e){g.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),h[t]=h[e]}))}));var m=/["'&<>]/;function v(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=m.exec(e);if(t){var n,r="",i=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==n&&(r+=e.substring(i,n)),i=n+1,r+=t}e=i!==n?r+e.substring(i,n):r}return e}var b=/([A-Z])/g,y=/^ms-/,w=Array.isArray;function x(e,t){return{insertionMode:e,selectedValue:t}}var O=new Map;function S(e,t,n){if("object"!=typeof n)throw Error(i(62));for(var r in t=!0,n)if(o.call(n,r)){var a=n[r];if(null!=a&&"boolean"!=typeof a&&""!==a){if(0===r.indexOf("--")){var s=v(r);a=v((""+a).trim())}else{s=r;var l=O.get(s);void 0!==l||(l=v(s.replace(b,"-$1").toLowerCase().replace(y,"-ms-")),O.set(s,l)),s=l,a="number"==typeof a?0===a||o.call(h,r)?""+a:a+"px":v((""+a).trim())}t?(t=!1,e.push(' style="',s,":",a)):e.push(";",s,":",a)}}t||e.push('"')}function E(e,t,n,r){switch(n){case"style":return void S(e,t,r);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=d.hasOwnProperty(n)?d[n]:null)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=t.attributeName,t.type){case 3:r&&e.push(" ",n,'=""');break;case 4:!0===r?e.push(" ",n,'=""'):!1!==r&&e.push(" ",n,'="',v(r),'"');break;case 5:isNaN(r)||e.push(" ",n,'="',v(r),'"');break;case 6:!isNaN(r)&&1<=r&&e.push(" ",n,'="',v(r),'"');break;default:t.sanitizeURL&&(r=""+r),e.push(" ",n,'="',v(r),'"')}}else if(c(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(" ",n,'="',v(r),'"')}}function k(e,t,n){if(null!=t){if(null!=n)throw Error(i(60));if("object"!=typeof t||!("__html"in t))throw Error(i(61));null!=(t=t.__html)&&e.push(""+t)}}function j(e,t,n,r){e.push(T(n));var i,a=n=null;for(i in t)if(o.call(t,i)){var s=t[i];if(null!=s)switch(i){case"children":n=s;break;case"dangerouslySetInnerHTML":a=s;break;default:E(e,r,i,s)}}return e.push(">"),k(e,a,n),"string"==typeof n?(e.push(v(n)),null):n}var C=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,R=new Map;function T(e){var t=R.get(e);if(void 0===t){if(!C.test(e))throw Error(i(65,e));t="<"+e,R.set(e,t)}return t}function D(e,t,n,a,s){switch(t){case"select":e.push(T("select"));var l=null,u=null;for(h in n)if(o.call(n,h)){var d=n[h];if(null!=d)switch(h){case"children":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"defaultValue":case"value":break;default:E(e,a,h,d)}}return e.push(">"),k(e,u,l),l;case"option":u=s.selectedValue,e.push(T("option"));var f=d=null,p=null,h=null;for(l in n)if(o.call(n,l)){var g=n[l];if(null!=g)switch(l){case"children":d=g;break;case"selected":p=g;break;case"dangerouslySetInnerHTML":h=g;break;case"value":f=g;default:E(e,a,l,g)}}if(null!=u)if(n=null!==f?""+f:function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(d),w(u)){for(a=0;a<u.length;a++)if(""+u[a]===n){e.push(' selected=""');break}}else""+u===n&&e.push(' selected=""');else p&&e.push(' selected=""');return e.push(">"),k(e,h,d),d;case"textarea":for(d in e.push(T("textarea")),h=u=l=null,n)if(o.call(n,d)&&null!=(f=n[d]))switch(d){case"children":h=f;break;case"value":l=f;break;case"defaultValue":u=f;break;case"dangerouslySetInnerHTML":throw Error(i(91));default:E(e,a,d,f)}if(null===l&&null!==u&&(l=u),e.push(">"),null!=h){if(null!=l)throw Error(i(92));if(w(h)&&1<h.length)throw Error(i(93));l=""+h}return"string"==typeof l&&"\n"===l[0]&&e.push("\n"),null!==l&&e.push(v(""+l)),null;case"input":for(u in e.push(T("input")),f=h=d=l=null,n)if(o.call(n,u)&&null!=(p=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,"input"));case"defaultChecked":f=p;break;case"defaultValue":d=p;break;case"checked":h=p;break;case"value":l=p;break;default:E(e,a,u,p)}return null!==h?E(e,a,"checked",h):null!==f&&E(e,a,"checked",f),null!==l?E(e,a,"value",l):null!==d&&E(e,a,"value",d),e.push("/>"),null;case"menuitem":for(var m in e.push(T("menuitem")),n)if(o.call(n,m)&&null!=(l=n[m]))switch(m){case"children":case"dangerouslySetInnerHTML":throw Error(i(400));default:E(e,a,m,l)}return e.push(">"),null;case"title":for(g in e.push(T("title")),l=null,n)if(o.call(n,g)&&null!=(u=n[g]))switch(g){case"children":l=u;break;case"dangerouslySetInnerHTML":throw Error(i(434));default:E(e,a,g,u)}return e.push(">"),l;case"listing":case"pre":for(f in e.push(T(t)),u=l=null,n)if(o.call(n,f)&&null!=(d=n[f]))switch(f){case"children":l=d;break;case"dangerouslySetInnerHTML":u=d;break;default:E(e,a,f,d)}if(e.push(">"),null!=u){if(null!=l)throw Error(i(60));if("object"!=typeof u||!("__html"in u))throw Error(i(61));null!=(n=u.__html)&&("string"==typeof n&&0<n.length&&"\n"===n[0]?e.push("\n",n):e.push(""+n))}return"string"==typeof l&&"\n"===l[0]&&e.push("\n"),l;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var b in e.push(T(t)),n)if(o.call(n,b)&&null!=(l=n[b]))switch(b){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,t));default:E(e,a,b,l)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return j(e,n,t,a);case"html":return 0===s.insertionMode&&e.push("<!DOCTYPE html>"),j(e,n,t,a);default:if(-1===t.indexOf("-")&&"string"!=typeof n.is)return j(e,n,t,a);for(p in e.push(T(t)),u=l=null,n)if(o.call(n,p)&&null!=(d=n[p]))switch(p){case"children":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"style":S(e,a,d);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:c(p)&&"function"!=typeof d&&"symbol"!=typeof d&&e.push(" ",p,'="',v(d),'"')}return e.push(">"),k(e,u,l),l}}function P(e,t,n){if(e.push('\x3c!--$?--\x3e<template id="'),null===n)throw Error(i(395));return e.push(n),e.push('"></template>')}var A=/[<\u2028\u2029]/g;function N(e){return JSON.stringify(e).replace(A,(function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}function F(e,t,n,r){return n.generateStaticMarkup?(e.push(v(t)),!1):(""===t?e=r:(r&&e.push("\x3c!-- --\x3e"),e.push(v(t)),e=!0),e)}var $=Object.assign,I=Symbol.for("react.element"),_=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),U=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),X=Symbol.for("react.scope"),J=Symbol.for("react.debug_trace_mode"),Y=Symbol.for("react.legacy_hidden"),K=Symbol.for("react.default_value"),Z=Symbol.iterator;function Q(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case L:return"Fragment";case _:return"Portal";case z:return"Profiler";case M:return"StrictMode";case W:return"Suspense";case G:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case U:return(e.displayName||"Context")+".Consumer";case B:return(e._context.displayName||"Context")+".Provider";case H:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case q:return null!==(t=e.displayName||null)?t:Q(e.type)||"Memo";case V:t=e._payload,e=e._init;try{return Q(e(t))}catch(e){}}return null}var ee={};function te(e,t){if(!(e=e.contextTypes))return ee;var n,r={};for(n in e)r[n]=t[n];return r}var ne=null;function re(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(i(401))}else{if(null===n)throw Error(i(401));re(e,n)}t.context._currentValue2=t.value}}function ie(e){e.context._currentValue2=e.parentValue,null!==(e=e.parent)&&ie(e)}function oe(e){var t=e.parent;null!==t&&oe(t),e.context._currentValue2=e.value}function ae(e,t){if(e.context._currentValue2=e.parentValue,null===(e=e.parent))throw Error(i(402));e.depth===t.depth?re(e,t):ae(e,t)}function se(e,t){var n=t.parent;if(null===n)throw Error(i(402));e.depth===n.depth?re(e,n):se(e,n),t.context._currentValue2=t.value}function le(e){var t=ne;t!==e&&(null===t?oe(e):null===e?ie(t):t.depth===e.depth?re(t,e):t.depth>e.depth?ae(t,e):se(t,e),ne=e)}var ce={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function ue(e,t,n,r){var i=void 0!==e.state?e.state:null;e.updater=ce,e.props=n,e.state=i;var o={queue:[],replace:!1};e._reactInternals=o;var a=t.contextType;if(e.context="object"==typeof a&&null!==a?a._currentValue2:r,"function"==typeof(a=t.getDerivedStateFromProps)&&(i=null==(a=a(n,i))?i:$({},i,a),e.state=i),"function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate&&("function"==typeof e.UNSAFE_componentWillMount||"function"==typeof e.componentWillMount))if(t=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&ce.enqueueReplaceState(e,e.state,null),null!==o.queue&&0<o.queue.length)if(t=o.queue,a=o.replace,o.queue=null,o.replace=!1,a&&1===t.length)e.state=t[0];else{for(o=a?t[0]:e.state,i=!0,a=a?1:0;a<t.length;a++){var s=t[a];null!=(s="function"==typeof s?s.call(e,o,n,r):s)&&(i?(i=!1,o=$({},o,s)):$(o,s))}e.state=o}else o.queue=null}var de={id:1,overflow:""};function fe(e,t,n){var r=e.id;e=e.overflow;var i=32-pe(r)-1;r&=~(1<<i),n+=1;var o=32-pe(t)+i;if(30<o){var a=i-i%5;return o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,{id:1<<32-pe(t)+i|n<<i|r,overflow:o+e}}return{id:1<<o|n<<i|r,overflow:e}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(he(e)/ge|0)|0},he=Math.log,ge=Math.LN2;var me="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ve=null,be=null,ye=null,we=null,xe=!1,Oe=!1,Se=0,Ee=null,ke=0;function je(){if(null===ve)throw Error(i(321));return ve}function Ce(){if(0<ke)throw Error(i(312));return{memoizedState:null,queue:null,next:null}}function Re(){return null===we?null===ye?(xe=!1,ye=we=Ce()):(xe=!0,we=ye):null===we.next?(xe=!1,we=we.next=Ce()):(xe=!0,we=we.next),we}function Te(){be=ve=null,Oe=!1,ye=null,ke=0,we=Ee=null}function De(e,t){return"function"==typeof t?t(e):t}function Pe(e,t,n){if(ve=je(),we=Re(),xe){var r=we.queue;if(t=r.dispatch,null!==Ee&&void 0!==(n=Ee.get(r))){Ee.delete(r),r=we.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return we.memoizedState=r,[r,t]}return[we.memoizedState,t]}return e=e===De?"function"==typeof t?t():t:void 0!==n?n(t):t,we.memoizedState=e,e=(e=we.queue={last:null,dispatch:null}).dispatch=Ne.bind(null,ve,e),[we.memoizedState,e]}function Ae(e,t){if(ve=je(),t=void 0===t?null:t,null!==(we=Re())){var n=we.memoizedState;if(null!==n&&null!==t){var r=n[1];e:if(null===r)r=!1;else{for(var i=0;i<r.length&&i<t.length;i++)if(!me(t[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),we.memoizedState=[e,t],e}function Ne(e,t,n){if(25<=ke)throw Error(i(301));if(e===ve)if(Oe=!0,e={action:n,next:null},null===Ee&&(Ee=new Map),void 0===(n=Ee.get(t)))Ee.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function Fe(){throw Error(i(394))}function $e(){}var Ie={readContext:function(e){return e._currentValue2},useContext:function(e){return je(),e._currentValue2},useMemo:Ae,useReducer:Pe,useRef:function(e){ve=je();var t=(we=Re()).memoizedState;return null===t?(e={current:e},we.memoizedState=e):t},useState:function(e){return Pe(De,e)},useInsertionEffect:$e,useLayoutEffect:function(){},useCallback:function(e,t){return Ae((function(){return e}),t)},useImperativeHandle:$e,useEffect:$e,useDebugValue:$e,useDeferredValue:function(e){return je(),e},useTransition:function(){return je(),[!1,Fe]},useId:function(){var e=be.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-pe(e)-1)).toString(32)+t;var n=_e;if(null===n)throw Error(i(404));return t=Se++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return je(),t(e._source)},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(i(407));return n()}},_e=null,Le=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Me(e){return console.error(e),null}function ze(){}function Be(e,t,n,r,i,o,a,s){e.allPendingTasks++,null===n?e.pendingRootTasks++:n.pendingTasks++;var l={node:t,ping:function(){var t=e.pingedTasks;t.push(l),1===t.length&&nt(e)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:a,treeContext:s};return i.add(l),l}function Ue(e,t,n,r,i,o){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function He(e,t){if(null!=(e=e.onError(t))&&"string"!=typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function We(e,t){var n=e.onShellError;n(t),(n=e.onFatalError)(t),null!==e.destination?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function Ge(e,t,n,r,i){for(ve={},be=t,Se=0,e=n(r,i);Oe;)Oe=!1,Se=0,ke+=1,we=null,e=n(r,i);return Te(),e}function qe(e,t,n,r){var o=n.render(),a=r.childContextTypes;if(null!=a){var s=t.legacyContext;if("function"!=typeof n.getChildContext)r=s;else{for(var l in n=n.getChildContext())if(!(l in a))throw Error(i(108,Q(r)||"Unknown",l));r=$({},s,n)}t.legacyContext=r,Je(e,t,o),t.legacyContext=s}else Je(e,t,o)}function Ve(e,t){if(e&&e.defaultProps){for(var n in t=$({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function Xe(e,t,n,r,o){if("function"==typeof n)if(n.prototype&&n.prototype.isReactComponent){o=te(n,t.legacyContext);var a=n.contextType;ue(a=new n(r,"object"==typeof a&&null!==a?a._currentValue2:o),n,r,o),qe(e,t,a,n)}else{o=Ge(e,t,n,r,a=te(n,t.legacyContext));var s=0!==Se;if("object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof)ue(o,n,r,a),qe(e,t,o,n);else if(s){r=t.treeContext,t.treeContext=fe(r,1,0);try{Je(e,t,o)}finally{t.treeContext=r}}else Je(e,t,o)}else{if("string"!=typeof n){switch(n){case Y:case J:case M:case z:case L:case G:return void Je(e,t,r.children);case X:throw Error(i(343));case W:e:{n=t.blockedBoundary,o=t.blockedSegment,a=r.fallback,r=r.children;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s=new Set,errorDigest:null},c=Ue(0,o.chunks.length,l,o.formatContext,!1,!1);o.children.push(c),o.lastPushedText=!1;var u=Ue(0,0,null,o.formatContext,!1,!1);u.parentFlushed=!0,t.blockedBoundary=l,t.blockedSegment=u;try{if(Ke(e,t,r),e.responseState.generateStaticMarkup||u.lastPushedText&&u.textEmbedded&&u.chunks.push("\x3c!-- --\x3e"),u.status=1,et(l,u),0===l.pendingTasks)break e}catch(t){u.status=4,l.forceClientRender=!0,l.errorDigest=He(e,t)}finally{t.blockedBoundary=n,t.blockedSegment=o}t=Be(e,a,n,c,s,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if("object"==typeof n&&null!==n)switch(n.$$typeof){case H:if(r=Ge(e,t,n.render,r,o),0!==Se){n=t.treeContext,t.treeContext=fe(n,1,0);try{Je(e,t,r)}finally{t.treeContext=n}}else Je(e,t,r);return;case q:return void Xe(e,t,n=n.type,r=Ve(n,r),o);case B:if(o=r.children,n=n._context,r=r.value,a=n._currentValue2,n._currentValue2=r,ne=r={parent:s=ne,depth:null===s?0:s.depth+1,context:n,parentValue:a,value:r},t.context=r,Je(e,t,o),null===(e=ne))throw Error(i(403));return r=e.parentValue,e.context._currentValue2=r===K?e.context._defaultValue:r,e=ne=e.parent,void(t.context=e);case U:return void Je(e,t,r=(r=r.children)(n._currentValue2));case V:return void Xe(e,t,n=(o=n._init)(n._payload),r=Ve(n,r),void 0)}throw Error(i(130,null==n?n:typeof n,""))}switch(a=D((o=t.blockedSegment).chunks,n,r,e.responseState,o.formatContext),o.lastPushedText=!1,s=o.formatContext,o.formatContext=function(e,t,n){switch(t){case"select":return x(1,null!=n.value?n.value:n.defaultValue);case"svg":return x(2,null);case"math":return x(3,null);case"foreignObject":return x(1,null);case"table":return x(4,null);case"thead":case"tbody":case"tfoot":return x(5,null);case"colgroup":return x(7,null);case"tr":return x(6,null)}return 4<=e.insertionMode||0===e.insertionMode?x(1,null):e}(s,n,r),Ke(e,t,a),o.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:o.chunks.push("</",n,">")}o.lastPushedText=!1}}function Je(e,t,n){if(t.node=n,"object"==typeof n&&null!==n){switch(n.$$typeof){case I:return void Xe(e,t,n.type,n.props,n.ref);case _:throw Error(i(257));case V:var r=n._init;return void Je(e,t,n=r(n._payload))}if(w(n))return void Ye(e,t,n);if(null===n||"object"!=typeof n?r=null:r="function"==typeof(r=Z&&n[Z]||n["@@iterator"])?r:null,r&&(r=r.call(n))){if(!(n=r.next()).done){var o=[];do{o.push(n.value),n=r.next()}while(!n.done);Ye(e,t,o)}return}throw e=Object.prototype.toString.call(n),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}"string"==typeof n?(r=t.blockedSegment).lastPushedText=F(t.blockedSegment.chunks,n,e.responseState,r.lastPushedText):"number"==typeof n&&((r=t.blockedSegment).lastPushedText=F(t.blockedSegment.chunks,""+n,e.responseState,r.lastPushedText))}function Ye(e,t,n){for(var r=n.length,i=0;i<r;i++){var o=t.treeContext;t.treeContext=fe(o,r,i);try{Ke(e,t,n[i])}finally{t.treeContext=o}}}function Ke(e,t,n){var r=t.blockedSegment.formatContext,i=t.legacyContext,o=t.context;try{return Je(e,t,n)}catch(l){if(Te(),"object"!=typeof l||null===l||"function"!=typeof l.then)throw t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=o,le(o),l;n=l;var a=t.blockedSegment,s=Ue(0,a.chunks.length,null,a.formatContext,a.lastPushedText,!0);a.children.push(s),a.lastPushedText=!1,e=Be(e,t.node,t.blockedBoundary,s,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=o,le(o)}}function Ze(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,tt(this,t,e)}function Qe(e,t,n){var r=e.blockedBoundary;e.blockedSegment.status=3,null===r?(t.allPendingTasks--,2!==t.status&&(t.status=2,null!==t.destination&&t.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,e=void 0===n?Error(i(432)):n,r.errorDigest=t.onError(e),r.parentFlushed&&t.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach((function(e){return Qe(e,t,n)})),r.fallbackAbortableTasks.clear(),t.allPendingTasks--,0===t.allPendingTasks&&(r=t.onAllReady)())}function et(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1===n.status&&et(e,n)}else e.completedSegments.push(t)}function tt(e,t,n){if(null===t){if(n.parentFlushed){if(null!==e.completedRootSegment)throw Error(i(389));e.completedRootSegment=n}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=ze,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(n.parentFlushed&&1===n.status&&et(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(Ze,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&1===n.status&&(et(t,n),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function nt(e){if(2!==e.status){var t=ne,n=Le.current;Le.current=Ie;var r=_e;_e=e.responseState;try{var i,o=e.pingedTasks;for(i=0;i<o.length;i++){var a=o[i],s=e,l=a.blockedSegment;if(0===l.status){le(a.context);try{Je(s,a,a.node),s.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("\x3c!-- --\x3e"),a.abortSet.delete(a),l.status=1,tt(s,a.blockedBoundary,l)}catch(e){if(Te(),"object"==typeof e&&null!==e&&"function"==typeof e.then){var c=a.ping;e.then(c,c)}else{a.abortSet.delete(a),l.status=4;var u=a.blockedBoundary,d=e,f=He(s,d);if(null===u?We(s,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=f,u.parentFlushed&&s.clientRenderedBoundaries.push(u))),s.allPendingTasks--,0===s.allPendingTasks)(0,s.onAllReady)()}}}}o.splice(0,i),null!==e.destination&&lt(e,e.destination)}catch(t){He(e,t),We(e,t)}finally{_e=r,Le.current=n,n===Ie&&le(t)}}}function rt(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=e.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,e=e.responseState,t.push('<template id="'),t.push(e.placeholderPrefix),e=r.toString(16),t.push(e),t.push('"></template>');case 1:n.status=2;var o=!0;r=n.chunks;var a=0;n=n.children;for(var s=0;s<n.length;s++){for(o=n[s];a<o.index;a++)t.push(r[a]);o=it(e,t,o)}for(;a<r.length-1;a++)t.push(r[a]);return a<r.length&&(o=t.push(r[a])),o;default:throw Error(i(390))}}function it(e,t,n){var r=n.boundary;if(null===r)return rt(e,t,n);if(r.parentFlushed=!0,r.forceClientRender)return e.responseState.generateStaticMarkup||(r=r.errorDigest,t.push("\x3c!--$!--\x3e"),t.push("<template"),r&&(t.push(' data-dgst="'),r=v(r),t.push(r),t.push('"')),t.push("></template>")),rt(e,t,n),e=!!e.responseState.generateStaticMarkup||t.push("\x3c!--/$--\x3e");if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var o=e.responseState,a=o.nextSuspenseID++;return o=o.boundaryPrefix+a.toString(16),r=r.id=o,P(t,e.responseState,r),rt(e,t,n),t.push("\x3c!--/$--\x3e")}if(r.byteSize>e.progressiveChunkSize)return r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),P(t,e.responseState,r.id),rt(e,t,n),t.push("\x3c!--/$--\x3e");if(e.responseState.generateStaticMarkup||t.push("\x3c!--$--\x3e"),1!==(n=r.completedSegments).length)throw Error(i(391));return it(e,t,n[0]),e=!!e.responseState.generateStaticMarkup||t.push("\x3c!--/$--\x3e")}function ot(e,t,n){return function(e,t,n,r){switch(n.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');default:throw Error(i(397))}}(t,e.responseState,n.formatContext,n.id),it(e,t,n),function(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(i(397))}}(t,n.formatContext)}function at(e,t,n){for(var r=n.completedSegments,o=0;o<r.length;o++)st(e,t,n,r[o]);if(r.length=0,e=e.responseState,r=n.id,n=n.rootSegmentID,t.push(e.startInlineScript),e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),null===r)throw Error(i(395));return n=n.toString(16),t.push(r),t.push('","'),t.push(e.segmentPrefix),t.push(n),t.push('")<\/script>')}function st(e,t,n,r){if(2===r.status)return!0;var o=r.id;if(-1===o){if(-1===(r.id=n.rootSegmentID))throw Error(i(392));return ot(e,t,r)}return ot(e,t,r),e=e.responseState,t.push(e.startInlineScript),e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),t.push(e.segmentPrefix),o=o.toString(16),t.push(o),t.push('","'),t.push(e.placeholderPrefix),t.push(o),t.push('")<\/script>')}function lt(e,t){try{var n=e.completedRootSegment;if(null!==n&&0===e.pendingRootTasks){it(e,t,n),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)t.push(r[n]);n<r.length&&t.push(r[n])}var o,a=e.clientRenderedBoundaries;for(o=0;o<a.length;o++){var s=a[o];r=t;var l=e.responseState,c=s.id,u=s.errorDigest,d=s.errorMessage,f=s.errorComponentStack;if(r.push(l.startInlineScript),l.sentClientRenderFunction?r.push('$RX("'):(l.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),null===c)throw Error(i(395));if(r.push(c),r.push('"'),u||d||f){r.push(",");var p=N(u||"");r.push(p)}if(d||f){r.push(",");var h=N(d||"");r.push(h)}if(f){r.push(",");var g=N(f);r.push(g)}if(!r.push(")<\/script>"))return e.destination=null,o++,void a.splice(0,o)}a.splice(0,o);var m=e.completedBoundaries;for(o=0;o<m.length;o++)if(!at(e,t,m[o]))return e.destination=null,o++,void m.splice(0,o);m.splice(0,o);var v=e.partialBoundaries;for(o=0;o<v.length;o++){var b=v[o];e:{a=e,s=t;var y=b.completedSegments;for(l=0;l<y.length;l++)if(!st(a,s,b,y[l])){l++,y.splice(0,l);var w=!1;break e}y.splice(0,l),w=!0}if(!w)return e.destination=null,o++,void v.splice(0,o)}v.splice(0,o);var x=e.completedBoundaries;for(o=0;o<x.length;o++)if(!at(e,t,x[o]))return e.destination=null,o++,void x.splice(0,o);x.splice(0,o)}finally{0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.push(null)}}function ct(e,t){try{var n=e.abortableTasks;n.forEach((function(n){return Qe(n,e,t)})),n.clear(),null!==e.destination&&lt(e,e.destination)}catch(t){He(e,t),We(e,t)}}function ut(){}function dt(e,t,n,r){var o=!1,a=null,s="",l={push:function(e){return null!==e&&(s+=e),!0},destroy:function(e){o=!0,a=e}},c=!1;if(e=function(e,t,n,r,i,o,a,s,l){var c=[],u=new Set;return(n=Ue(t={destination:null,responseState:t,progressiveChunkSize:void 0===r?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===i?Me:i,onAllReady:void 0===o?ze:o,onShellReady:void 0===a?ze:a,onShellError:void 0===s?ze:s,onFatalError:void 0===l?ze:l},0,null,n,!1,!1)).parentFlushed=!0,e=Be(t,e,null,n,u,ee,null,de),c.push(e),t}(e,function(e,t){return{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:(t=void 0===t?"":t)+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}(n,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,ut,void 0,(function(){c=!0}),void 0,void 0),nt(e),ct(e,r),1===e.status)e.status=2,l.destroy(e.fatalError);else if(2!==e.status&&null===e.destination){e.destination=l;try{lt(e,l)}catch(t){He(e,t),We(e,t)}}if(o)throw a;if(!c)throw Error(i(426));return s}t.renderToNodeStream=function(){throw Error(i(207))},t.renderToStaticMarkup=function(e,t){return dt(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},t.renderToStaticNodeStream=function(){throw Error(i(208))},t.renderToString=function(e,t){return dt(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},t.version="18.2.0"},18023:(e,t,n)=>{"use strict";var r=n(91987);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=null,a=0;function s(e,t){if(0!==t.length)if(512<t.length)0<a&&(e.enqueue(new Uint8Array(o.buffer,0,a)),o=new Uint8Array(512),a=0),e.enqueue(t);else{var n=o.length-a;n<t.length&&(0===n?e.enqueue(o):(o.set(t.subarray(0,n),a),e.enqueue(o),t=t.subarray(n)),o=new Uint8Array(512),a=0),o.set(t,a),a+=t.length}}function l(e,t){return s(e,t),!0}function c(e){o&&0<a&&(e.enqueue(new Uint8Array(o.buffer,0,a)),o=null,a=0)}var u=new TextEncoder;function d(e){return u.encode(e)}function f(e){return u.encode(e)}function p(e,t){"function"==typeof e.error?e.error(t):e.close()}var h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function b(e){return!!h.call(v,e)||!h.call(m,e)&&(g.test(e)?v[e]=!0:(m[e]=!0,!1))}function y(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){w[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];w[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){w[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){w[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){w[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){w[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){w[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){w[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){w[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var x=/[\-:]([a-z])/g;function O(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(x,O);w[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(x,O);w[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(x,O);w[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){w[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),w.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){w[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var S={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E=["Webkit","ms","Moz","O"];Object.keys(S).forEach((function(e){E.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),S[t]=S[e]}))}));var k=/["'&<>]/;function j(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=k.exec(e);if(t){var n,r="",i=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==n&&(r+=e.substring(i,n)),i=n+1,r+=t}e=i!==n?r+e.substring(i,n):r}return e}var C=/([A-Z])/g,R=/^ms-/,T=Array.isArray,D=f("<script>"),P=f("<\/script>"),A=f('<script src="'),N=f('<script type="module" src="'),F=f('" async=""><\/script>'),$=/(<\/|<)(s)(cript)/gi;function I(e,t,n,r){return t+("s"===n?"\\u0073":"\\u0053")+r}function _(e,t){return{insertionMode:e,selectedValue:t}}var L=f("\x3c!-- --\x3e");function M(e,t,n,r){return""===t?r:(r&&e.push(L),e.push(d(j(t))),!0)}var z=new Map,B=f(' style="'),U=f(":"),H=f(";");function W(e,t,n){if("object"!=typeof n)throw Error(i(62));for(var r in t=!0,n)if(h.call(n,r)){var o=n[r];if(null!=o&&"boolean"!=typeof o&&""!==o){if(0===r.indexOf("--")){var a=d(j(r));o=d(j((""+o).trim()))}else{a=r;var s=z.get(a);void 0!==s||(s=f(j(a.replace(C,"-$1").toLowerCase().replace(R,"-ms-"))),z.set(a,s)),a=s,o="number"==typeof o?0===o||h.call(S,r)?d(""+o):d(o+"px"):d(j((""+o).trim()))}t?(t=!1,e.push(B,a,U,o)):e.push(H,a,U,o)}}t||e.push(V)}var G=f(" "),q=f('="'),V=f('"'),X=f('=""');function J(e,t,n,r){switch(n){case"style":return void W(e,t,r);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=w.hasOwnProperty(n)?w[n]:null)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=d(t.attributeName),t.type){case 3:r&&e.push(G,n,X);break;case 4:!0===r?e.push(G,n,X):!1!==r&&e.push(G,n,q,d(j(r)),V);break;case 5:isNaN(r)||e.push(G,n,q,d(j(r)),V);break;case 6:!isNaN(r)&&1<=r&&e.push(G,n,q,d(j(r)),V);break;default:t.sanitizeURL&&(r=""+r),e.push(G,n,q,d(j(r)),V)}}else if(b(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(G,d(n),q,d(j(r)),V)}}var Y=f(">"),K=f("/>");function Z(e,t,n){if(null!=t){if(null!=n)throw Error(i(60));if("object"!=typeof t||!("__html"in t))throw Error(i(61));null!=(t=t.__html)&&e.push(d(""+t))}}var Q=f(' selected=""');function ee(e,t,n,r){e.push(ie(n));var i,o=n=null;for(i in t)if(h.call(t,i)){var a=t[i];if(null!=a)switch(i){case"children":n=a;break;case"dangerouslySetInnerHTML":o=a;break;default:J(e,r,i,a)}}return e.push(Y),Z(e,o,n),"string"==typeof n?(e.push(d(j(n))),null):n}var te=f("\n"),ne=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,re=new Map;function ie(e){var t=re.get(e);if(void 0===t){if(!ne.test(e))throw Error(i(65,e));t=f("<"+e),re.set(e,t)}return t}var oe=f("<!DOCTYPE html>");function ae(e,t,n,o,a){switch(t){case"select":e.push(ie("select"));var s=null,l=null;for(p in n)if(h.call(n,p)){var c=n[p];if(null!=c)switch(p){case"children":s=c;break;case"dangerouslySetInnerHTML":l=c;break;case"defaultValue":case"value":break;default:J(e,o,p,c)}}return e.push(Y),Z(e,l,s),s;case"option":l=a.selectedValue,e.push(ie("option"));var u=c=null,f=null,p=null;for(s in n)if(h.call(n,s)){var g=n[s];if(null!=g)switch(s){case"children":c=g;break;case"selected":f=g;break;case"dangerouslySetInnerHTML":p=g;break;case"value":u=g;default:J(e,o,s,g)}}if(null!=l)if(n=null!==u?""+u:function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(c),T(l)){for(o=0;o<l.length;o++)if(""+l[o]===n){e.push(Q);break}}else""+l===n&&e.push(Q);else f&&e.push(Q);return e.push(Y),Z(e,p,c),c;case"textarea":for(c in e.push(ie("textarea")),p=l=s=null,n)if(h.call(n,c)&&null!=(u=n[c]))switch(c){case"children":p=u;break;case"value":s=u;break;case"defaultValue":l=u;break;case"dangerouslySetInnerHTML":throw Error(i(91));default:J(e,o,c,u)}if(null===s&&null!==l&&(s=l),e.push(Y),null!=p){if(null!=s)throw Error(i(92));if(T(p)&&1<p.length)throw Error(i(93));s=""+p}return"string"==typeof s&&"\n"===s[0]&&e.push(te),null!==s&&e.push(d(j(""+s))),null;case"input":for(l in e.push(ie("input")),u=p=c=s=null,n)if(h.call(n,l)&&null!=(f=n[l]))switch(l){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,"input"));case"defaultChecked":u=f;break;case"defaultValue":c=f;break;case"checked":p=f;break;case"value":s=f;break;default:J(e,o,l,f)}return null!==p?J(e,o,"checked",p):null!==u&&J(e,o,"checked",u),null!==s?J(e,o,"value",s):null!==c&&J(e,o,"value",c),e.push(K),null;case"menuitem":for(var m in e.push(ie("menuitem")),n)if(h.call(n,m)&&null!=(s=n[m]))switch(m){case"children":case"dangerouslySetInnerHTML":throw Error(i(400));default:J(e,o,m,s)}return e.push(Y),null;case"title":for(g in e.push(ie("title")),s=null,n)if(h.call(n,g)&&null!=(l=n[g]))switch(g){case"children":s=l;break;case"dangerouslySetInnerHTML":throw Error(i(434));default:J(e,o,g,l)}return e.push(Y),s;case"listing":case"pre":for(u in e.push(ie(t)),l=s=null,n)if(h.call(n,u)&&null!=(c=n[u]))switch(u){case"children":s=c;break;case"dangerouslySetInnerHTML":l=c;break;default:J(e,o,u,c)}if(e.push(Y),null!=l){if(null!=s)throw Error(i(60));if("object"!=typeof l||!("__html"in l))throw Error(i(61));null!=(n=l.__html)&&("string"==typeof n&&0<n.length&&"\n"===n[0]?e.push(te,d(n)):e.push(d(""+n)))}return"string"==typeof s&&"\n"===s[0]&&e.push(te),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var v in e.push(ie(t)),n)if(h.call(n,v)&&null!=(s=n[v]))switch(v){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,t));default:J(e,o,v,s)}return e.push(K),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return ee(e,n,t,o);case"html":return 0===a.insertionMode&&e.push(oe),ee(e,n,t,o);default:if(-1===t.indexOf("-")&&"string"!=typeof n.is)return ee(e,n,t,o);for(f in e.push(ie(t)),l=s=null,n)if(h.call(n,f)&&null!=(c=n[f]))switch(f){case"children":s=c;break;case"dangerouslySetInnerHTML":l=c;break;case"style":W(e,o,c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:b(f)&&"function"!=typeof c&&"symbol"!=typeof c&&e.push(G,d(f),q,d(j(c)),V)}return e.push(Y),Z(e,l,s),s}}var se=f("</"),le=f(">"),ce=f('<template id="'),ue=f('"></template>'),de=f("\x3c!--$--\x3e"),fe=f('\x3c!--$?--\x3e<template id="'),pe=f('"></template>'),he=f("\x3c!--$!--\x3e"),ge=f("\x3c!--/$--\x3e"),me=f("<template"),ve=f('"'),be=f(' data-dgst="');f(' data-msg="'),f(' data-stck="');var ye=f("></template>");function we(e,t,n){if(s(e,fe),null===n)throw Error(i(395));return s(e,n),l(e,pe)}var xe=f('<div hidden id="'),Oe=f('">'),Se=f("</div>"),Ee=f('<svg aria-hidden="true" style="display:none" id="'),ke=f('">'),je=f("</svg>"),Ce=f('<math aria-hidden="true" style="display:none" id="'),Re=f('">'),Te=f("</math>"),De=f('<table hidden id="'),Pe=f('">'),Ae=f("</table>"),Ne=f('<table hidden><tbody id="'),Fe=f('">'),$e=f("</tbody></table>"),Ie=f('<table hidden><tr id="'),_e=f('">'),Le=f("</tr></table>"),Me=f('<table hidden><colgroup id="'),ze=f('">'),Be=f("</colgroup></table>");var Ue=f('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),He=f('$RS("'),We=f('","'),Ge=f('")<\/script>'),qe=f('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),Ve=f('$RC("'),Xe=f('","'),Je=f('")<\/script>'),Ye=f('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),Ke=f('$RX("'),Ze=f('"'),Qe=f(")<\/script>"),et=f(","),tt=/[<\u2028\u2029]/g;function nt(e){return JSON.stringify(e).replace(tt,(function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}var rt=Object.assign,it=Symbol.for("react.element"),ot=Symbol.for("react.portal"),at=Symbol.for("react.fragment"),st=Symbol.for("react.strict_mode"),lt=Symbol.for("react.profiler"),ct=Symbol.for("react.provider"),ut=Symbol.for("react.context"),dt=Symbol.for("react.forward_ref"),ft=Symbol.for("react.suspense"),pt=Symbol.for("react.suspense_list"),ht=Symbol.for("react.memo"),gt=Symbol.for("react.lazy"),mt=Symbol.for("react.scope"),vt=Symbol.for("react.debug_trace_mode"),bt=Symbol.for("react.legacy_hidden"),yt=Symbol.for("react.default_value"),wt=Symbol.iterator;function xt(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case at:return"Fragment";case ot:return"Portal";case lt:return"Profiler";case st:return"StrictMode";case ft:return"Suspense";case pt:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ut:return(e.displayName||"Context")+".Consumer";case ct:return(e._context.displayName||"Context")+".Provider";case dt:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case ht:return null!==(t=e.displayName||null)?t:xt(e.type)||"Memo";case gt:t=e._payload,e=e._init;try{return xt(e(t))}catch(e){}}return null}var Ot={};function St(e,t){if(!(e=e.contextTypes))return Ot;var n,r={};for(n in e)r[n]=t[n];return r}var Et=null;function kt(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(i(401))}else{if(null===n)throw Error(i(401));kt(e,n)}t.context._currentValue=t.value}}function jt(e){e.context._currentValue=e.parentValue,null!==(e=e.parent)&&jt(e)}function Ct(e){var t=e.parent;null!==t&&Ct(t),e.context._currentValue=e.value}function Rt(e,t){if(e.context._currentValue=e.parentValue,null===(e=e.parent))throw Error(i(402));e.depth===t.depth?kt(e,t):Rt(e,t)}function Tt(e,t){var n=t.parent;if(null===n)throw Error(i(402));e.depth===n.depth?kt(e,n):Tt(e,n),t.context._currentValue=t.value}function Dt(e){var t=Et;t!==e&&(null===t?Ct(e):null===e?jt(t):t.depth===e.depth?kt(t,e):t.depth>e.depth?Rt(t,e):Tt(t,e),Et=e)}var Pt={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function At(e,t,n,r){var i=void 0!==e.state?e.state:null;e.updater=Pt,e.props=n,e.state=i;var o={queue:[],replace:!1};e._reactInternals=o;var a=t.contextType;if(e.context="object"==typeof a&&null!==a?a._currentValue:r,"function"==typeof(a=t.getDerivedStateFromProps)&&(i=null==(a=a(n,i))?i:rt({},i,a),e.state=i),"function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate&&("function"==typeof e.UNSAFE_componentWillMount||"function"==typeof e.componentWillMount))if(t=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&Pt.enqueueReplaceState(e,e.state,null),null!==o.queue&&0<o.queue.length)if(t=o.queue,a=o.replace,o.queue=null,o.replace=!1,a&&1===t.length)e.state=t[0];else{for(o=a?t[0]:e.state,i=!0,a=a?1:0;a<t.length;a++){var s=t[a];null!=(s="function"==typeof s?s.call(e,o,n,r):s)&&(i?(i=!1,o=rt({},o,s)):rt(o,s))}e.state=o}else o.queue=null}var Nt={id:1,overflow:""};function Ft(e,t,n){var r=e.id;e=e.overflow;var i=32-$t(r)-1;r&=~(1<<i),n+=1;var o=32-$t(t)+i;if(30<o){var a=i-i%5;return o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,{id:1<<32-$t(t)+i|n<<i|r,overflow:o+e}}return{id:1<<o|n<<i|r,overflow:e}}var $t=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(It(e)/_t|0)|0},It=Math.log,_t=Math.LN2;var Lt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Mt=null,zt=null,Bt=null,Ut=null,Ht=!1,Wt=!1,Gt=0,qt=null,Vt=0;function Xt(){if(null===Mt)throw Error(i(321));return Mt}function Jt(){if(0<Vt)throw Error(i(312));return{memoizedState:null,queue:null,next:null}}function Yt(){return null===Ut?null===Bt?(Ht=!1,Bt=Ut=Jt()):(Ht=!0,Ut=Bt):null===Ut.next?(Ht=!1,Ut=Ut.next=Jt()):(Ht=!0,Ut=Ut.next),Ut}function Kt(){zt=Mt=null,Wt=!1,Bt=null,Vt=0,Ut=qt=null}function Zt(e,t){return"function"==typeof t?t(e):t}function Qt(e,t,n){if(Mt=Xt(),Ut=Yt(),Ht){var r=Ut.queue;if(t=r.dispatch,null!==qt&&void 0!==(n=qt.get(r))){qt.delete(r),r=Ut.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return Ut.memoizedState=r,[r,t]}return[Ut.memoizedState,t]}return e=e===Zt?"function"==typeof t?t():t:void 0!==n?n(t):t,Ut.memoizedState=e,e=(e=Ut.queue={last:null,dispatch:null}).dispatch=tn.bind(null,Mt,e),[Ut.memoizedState,e]}function en(e,t){if(Mt=Xt(),t=void 0===t?null:t,null!==(Ut=Yt())){var n=Ut.memoizedState;if(null!==n&&null!==t){var r=n[1];e:if(null===r)r=!1;else{for(var i=0;i<r.length&&i<t.length;i++)if(!Lt(t[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),Ut.memoizedState=[e,t],e}function tn(e,t,n){if(25<=Vt)throw Error(i(301));if(e===Mt)if(Wt=!0,e={action:n,next:null},null===qt&&(qt=new Map),void 0===(n=qt.get(t)))qt.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function nn(){throw Error(i(394))}function rn(){}var on={readContext:function(e){return e._currentValue},useContext:function(e){return Xt(),e._currentValue},useMemo:en,useReducer:Qt,useRef:function(e){Mt=Xt();var t=(Ut=Yt()).memoizedState;return null===t?(e={current:e},Ut.memoizedState=e):t},useState:function(e){return Qt(Zt,e)},useInsertionEffect:rn,useLayoutEffect:function(){},useCallback:function(e,t){return en((function(){return e}),t)},useImperativeHandle:rn,useEffect:rn,useDebugValue:rn,useDeferredValue:function(e){return Xt(),e},useTransition:function(){return Xt(),[!1,nn]},useId:function(){var e=zt.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-$t(e)-1)).toString(32)+t;var n=an;if(null===n)throw Error(i(404));return t=Gt++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Xt(),t(e._source)},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(i(407));return n()}},an=null,sn=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function ln(e){return console.error(e),null}function cn(){}function un(e,t,n,r,i,o,a,s){e.allPendingTasks++,null===n?e.pendingRootTasks++:n.pendingTasks++;var l={node:t,ping:function(){var t=e.pingedTasks;t.push(l),1===t.length&&kn(e)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:a,treeContext:s};return i.add(l),l}function dn(e,t,n,r,i,o){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function fn(e,t){if(null!=(e=e.onError(t))&&"string"!=typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function pn(e,t){var n=e.onShellError;n(t),(n=e.onFatalError)(t),null!==e.destination?(e.status=2,p(e.destination,t)):(e.status=1,e.fatalError=t)}function hn(e,t,n,r,i){for(Mt={},zt=t,Gt=0,e=n(r,i);Wt;)Wt=!1,Gt=0,Vt+=1,Ut=null,e=n(r,i);return Kt(),e}function gn(e,t,n,r){var o=n.render(),a=r.childContextTypes;if(null!=a){var s=t.legacyContext;if("function"!=typeof n.getChildContext)r=s;else{for(var l in n=n.getChildContext())if(!(l in a))throw Error(i(108,xt(r)||"Unknown",l));r=rt({},s,n)}t.legacyContext=r,bn(e,t,o),t.legacyContext=s}else bn(e,t,o)}function mn(e,t){if(e&&e.defaultProps){for(var n in t=rt({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function vn(e,t,n,r,o){if("function"==typeof n)if(n.prototype&&n.prototype.isReactComponent){o=St(n,t.legacyContext);var a=n.contextType;At(a=new n(r,"object"==typeof a&&null!==a?a._currentValue:o),n,r,o),gn(e,t,a,n)}else{o=hn(e,t,n,r,a=St(n,t.legacyContext));var s=0!==Gt;if("object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof)At(o,n,r,a),gn(e,t,o,n);else if(s){r=t.treeContext,t.treeContext=Ft(r,1,0);try{bn(e,t,o)}finally{t.treeContext=r}}else bn(e,t,o)}else{if("string"!=typeof n){switch(n){case bt:case vt:case st:case lt:case at:case pt:return void bn(e,t,r.children);case mt:throw Error(i(343));case ft:e:{n=t.blockedBoundary,o=t.blockedSegment,a=r.fallback,r=r.children;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s=new Set,errorDigest:null},c=dn(0,o.chunks.length,l,o.formatContext,!1,!1);o.children.push(c),o.lastPushedText=!1;var u=dn(0,0,null,o.formatContext,!1,!1);u.parentFlushed=!0,t.blockedBoundary=l,t.blockedSegment=u;try{if(wn(e,t,r),u.lastPushedText&&u.textEmbedded&&u.chunks.push(L),u.status=1,Sn(l,u),0===l.pendingTasks)break e}catch(t){u.status=4,l.forceClientRender=!0,l.errorDigest=fn(e,t)}finally{t.blockedBoundary=n,t.blockedSegment=o}t=un(e,a,n,c,s,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if("object"==typeof n&&null!==n)switch(n.$$typeof){case dt:if(r=hn(e,t,n.render,r,o),0!==Gt){n=t.treeContext,t.treeContext=Ft(n,1,0);try{bn(e,t,r)}finally{t.treeContext=n}}else bn(e,t,r);return;case ht:return void vn(e,t,n=n.type,r=mn(n,r),o);case ct:if(o=r.children,n=n._context,r=r.value,a=n._currentValue,n._currentValue=r,Et=r={parent:s=Et,depth:null===s?0:s.depth+1,context:n,parentValue:a,value:r},t.context=r,bn(e,t,o),null===(e=Et))throw Error(i(403));return r=e.parentValue,e.context._currentValue=r===yt?e.context._defaultValue:r,e=Et=e.parent,void(t.context=e);case ut:return void bn(e,t,r=(r=r.children)(n._currentValue));case gt:return void vn(e,t,n=(o=n._init)(n._payload),r=mn(n,r),void 0)}throw Error(i(130,null==n?n:typeof n,""))}switch(a=ae((o=t.blockedSegment).chunks,n,r,e.responseState,o.formatContext),o.lastPushedText=!1,s=o.formatContext,o.formatContext=function(e,t,n){switch(t){case"select":return _(1,null!=n.value?n.value:n.defaultValue);case"svg":return _(2,null);case"math":return _(3,null);case"foreignObject":return _(1,null);case"table":return _(4,null);case"thead":case"tbody":case"tfoot":return _(5,null);case"colgroup":return _(7,null);case"tr":return _(6,null)}return 4<=e.insertionMode||0===e.insertionMode?_(1,null):e}(s,n,r),wn(e,t,a),o.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:o.chunks.push(se,d(n),le)}o.lastPushedText=!1}}function bn(e,t,n){if(t.node=n,"object"==typeof n&&null!==n){switch(n.$$typeof){case it:return void vn(e,t,n.type,n.props,n.ref);case ot:throw Error(i(257));case gt:var r=n._init;return void bn(e,t,n=r(n._payload))}if(T(n))return void yn(e,t,n);if(null===n||"object"!=typeof n?r=null:r="function"==typeof(r=wt&&n[wt]||n["@@iterator"])?r:null,r&&(r=r.call(n))){if(!(n=r.next()).done){var o=[];do{o.push(n.value),n=r.next()}while(!n.done);yn(e,t,o)}return}throw e=Object.prototype.toString.call(n),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}"string"==typeof n?(r=t.blockedSegment).lastPushedText=M(t.blockedSegment.chunks,n,e.responseState,r.lastPushedText):"number"==typeof n&&((r=t.blockedSegment).lastPushedText=M(t.blockedSegment.chunks,""+n,e.responseState,r.lastPushedText))}function yn(e,t,n){for(var r=n.length,i=0;i<r;i++){var o=t.treeContext;t.treeContext=Ft(o,r,i);try{wn(e,t,n[i])}finally{t.treeContext=o}}}function wn(e,t,n){var r=t.blockedSegment.formatContext,i=t.legacyContext,o=t.context;try{return bn(e,t,n)}catch(l){if(Kt(),"object"!=typeof l||null===l||"function"!=typeof l.then)throw t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=o,Dt(o),l;n=l;var a=t.blockedSegment,s=dn(0,a.chunks.length,null,a.formatContext,a.lastPushedText,!0);a.children.push(s),a.lastPushedText=!1,e=un(e,t.node,t.blockedBoundary,s,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=o,Dt(o)}}function xn(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,En(this,t,e)}function On(e,t,n){var r=e.blockedBoundary;e.blockedSegment.status=3,null===r?(t.allPendingTasks--,2!==t.status&&(t.status=2,null!==t.destination&&t.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,e=void 0===n?Error(i(432)):n,r.errorDigest=t.onError(e),r.parentFlushed&&t.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach((function(e){return On(e,t,n)})),r.fallbackAbortableTasks.clear(),t.allPendingTasks--,0===t.allPendingTasks&&(r=t.onAllReady)())}function Sn(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1===n.status&&Sn(e,n)}else e.completedSegments.push(t)}function En(e,t,n){if(null===t){if(n.parentFlushed){if(null!==e.completedRootSegment)throw Error(i(389));e.completedRootSegment=n}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=cn,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(n.parentFlushed&&1===n.status&&Sn(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(xn,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&1===n.status&&(Sn(t,n),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function kn(e){if(2!==e.status){var t=Et,n=sn.current;sn.current=on;var r=an;an=e.responseState;try{var i,o=e.pingedTasks;for(i=0;i<o.length;i++){var a=o[i],s=e,l=a.blockedSegment;if(0===l.status){Dt(a.context);try{bn(s,a,a.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(L),a.abortSet.delete(a),l.status=1,En(s,a.blockedBoundary,l)}catch(e){if(Kt(),"object"==typeof e&&null!==e&&"function"==typeof e.then){var c=a.ping;e.then(c,c)}else{a.abortSet.delete(a),l.status=4;var u=a.blockedBoundary,d=e,f=fn(s,d);if(null===u?pn(s,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=f,u.parentFlushed&&s.clientRenderedBoundaries.push(u))),s.allPendingTasks--,0===s.allPendingTasks)(0,s.onAllReady)()}}}}o.splice(0,i),null!==e.destination&&Pn(e,e.destination)}catch(t){fn(e,t),pn(e,t)}finally{an=r,sn.current=n,n===on&&Dt(t)}}}function jn(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=e.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,e=e.responseState,s(t,ce),s(t,e.placeholderPrefix),s(t,e=d(r.toString(16))),l(t,ue);case 1:n.status=2;var o=!0;r=n.chunks;var a=0;n=n.children;for(var c=0;c<n.length;c++){for(o=n[c];a<o.index;a++)s(t,r[a]);o=Cn(e,t,o)}for(;a<r.length-1;a++)s(t,r[a]);return a<r.length&&(o=l(t,r[a])),o;default:throw Error(i(390))}}function Cn(e,t,n){var r=n.boundary;if(null===r)return jn(e,t,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,l(t,he),s(t,me),r&&(s(t,be),s(t,d(j(r))),s(t,ve)),l(t,ye),jn(e,t,n);else if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var o=e.responseState,a=o.nextSuspenseID++;o=f(o.boundaryPrefix+a.toString(16)),r=r.id=o,we(t,e.responseState,r),jn(e,t,n)}else if(r.byteSize>e.progressiveChunkSize)r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),we(t,e.responseState,r.id),jn(e,t,n);else{if(l(t,de),1!==(n=r.completedSegments).length)throw Error(i(391));Cn(e,t,n[0])}return l(t,ge)}function Rn(e,t,n){return function(e,t,n,r){switch(n.insertionMode){case 0:case 1:return s(e,xe),s(e,t.segmentPrefix),s(e,d(r.toString(16))),l(e,Oe);case 2:return s(e,Ee),s(e,t.segmentPrefix),s(e,d(r.toString(16))),l(e,ke);case 3:return s(e,Ce),s(e,t.segmentPrefix),s(e,d(r.toString(16))),l(e,Re);case 4:return s(e,De),s(e,t.segmentPrefix),s(e,d(r.toString(16))),l(e,Pe);case 5:return s(e,Ne),s(e,t.segmentPrefix),s(e,d(r.toString(16))),l(e,Fe);case 6:return s(e,Ie),s(e,t.segmentPrefix),s(e,d(r.toString(16))),l(e,_e);case 7:return s(e,Me),s(e,t.segmentPrefix),s(e,d(r.toString(16))),l(e,ze);default:throw Error(i(397))}}(t,e.responseState,n.formatContext,n.id),Cn(e,t,n),function(e,t){switch(t.insertionMode){case 0:case 1:return l(e,Se);case 2:return l(e,je);case 3:return l(e,Te);case 4:return l(e,Ae);case 5:return l(e,$e);case 6:return l(e,Le);case 7:return l(e,Be);default:throw Error(i(397))}}(t,n.formatContext)}function Tn(e,t,n){for(var r=n.completedSegments,o=0;o<r.length;o++)Dn(e,t,n,r[o]);if(r.length=0,e=e.responseState,r=n.id,n=n.rootSegmentID,s(t,e.startInlineScript),e.sentCompleteBoundaryFunction?s(t,Ve):(e.sentCompleteBoundaryFunction=!0,s(t,qe)),null===r)throw Error(i(395));return n=d(n.toString(16)),s(t,r),s(t,Xe),s(t,e.segmentPrefix),s(t,n),l(t,Je)}function Dn(e,t,n,r){if(2===r.status)return!0;var o=r.id;if(-1===o){if(-1===(r.id=n.rootSegmentID))throw Error(i(392));return Rn(e,t,r)}return Rn(e,t,r),s(t,(e=e.responseState).startInlineScript),e.sentCompleteSegmentFunction?s(t,He):(e.sentCompleteSegmentFunction=!0,s(t,Ue)),s(t,e.segmentPrefix),s(t,o=d(o.toString(16))),s(t,We),s(t,e.placeholderPrefix),s(t,o),l(t,Ge)}function Pn(e,t){o=new Uint8Array(512),a=0;try{var n=e.completedRootSegment;if(null!==n&&0===e.pendingRootTasks){Cn(e,t,n),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)s(t,r[n]);n<r.length&&l(t,r[n])}var u,f=e.clientRenderedBoundaries;for(u=0;u<f.length;u++){var p=f[u];r=t;var h=e.responseState,g=p.id,m=p.errorDigest,v=p.errorMessage,b=p.errorComponentStack;if(s(r,h.startInlineScript),h.sentClientRenderFunction?s(r,Ke):(h.sentClientRenderFunction=!0,s(r,Ye)),null===g)throw Error(i(395));if(s(r,g),s(r,Ze),(m||v||b)&&(s(r,et),s(r,d(nt(m||"")))),(v||b)&&(s(r,et),s(r,d(nt(v||"")))),b&&(s(r,et),s(r,d(nt(b)))),!l(r,Qe))return e.destination=null,u++,void f.splice(0,u)}f.splice(0,u);var y=e.completedBoundaries;for(u=0;u<y.length;u++)if(!Tn(e,t,y[u]))return e.destination=null,u++,void y.splice(0,u);y.splice(0,u),c(t),o=new Uint8Array(512),a=0;var w=e.partialBoundaries;for(u=0;u<w.length;u++){var x=w[u];e:{f=e,p=t;var O=x.completedSegments;for(h=0;h<O.length;h++)if(!Dn(f,p,x,O[h])){h++,O.splice(0,h);var S=!1;break e}O.splice(0,h),S=!0}if(!S)return e.destination=null,u++,void w.splice(0,u)}w.splice(0,u);var E=e.completedBoundaries;for(u=0;u<E.length;u++)if(!Tn(e,t,E[u]))return e.destination=null,u++,void E.splice(0,u);E.splice(0,u)}finally{c(t),0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.close()}}function An(e,t){try{var n=e.abortableTasks;n.forEach((function(n){return On(n,e,t)})),n.clear(),null!==e.destination&&Pn(e,e.destination)}catch(t){fn(e,t),pn(e,t)}}t.renderToReadableStream=function(e,t){return new Promise((function(n,r){var i,o,a=new Promise((function(e,t){o=e,i=t})),s=function(e,t,n,r,i,o,a,s,l){var c=[],u=new Set;return(n=dn(t={destination:null,responseState:t,progressiveChunkSize:void 0===r?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===i?ln:i,onAllReady:void 0===o?cn:o,onShellReady:void 0===a?cn:a,onShellError:void 0===s?cn:s,onFatalError:void 0===l?cn:l},0,null,n,!1,!1)).parentFlushed=!0,e=un(t,e,null,n,u,Ot,null,Nt),c.push(e),t}(e,function(e,t,n,r,i){e=void 0===e?"":e,t=void 0===t?D:f('<script nonce="'+j(t)+'">');var o=[];if(void 0!==n&&o.push(t,d((""+n).replace($,I)),P),void 0!==r)for(n=0;n<r.length;n++)o.push(A,d(j(r[n])),F);if(void 0!==i)for(r=0;r<i.length;r++)o.push(N,d(j(i[r])),F);return{bootstrapChunks:o,startInlineScript:t,placeholderPrefix:f(e+"P:"),segmentPrefix:f(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),function(e){return _("http://www.w3.org/2000/svg"===e?2:"http://www.w3.org/1998/Math/MathML"===e?3:0,null)}(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,o,(function(){var e=new ReadableStream({type:"bytes",pull:function(e){if(1===s.status)s.status=2,p(e,s.fatalError);else if(2!==s.status&&null===s.destination){s.destination=e;try{Pn(s,e)}catch(e){fn(s,e),pn(s,e)}}},cancel:function(){An(s)}},{highWaterMark:0});e.allReady=a,n(e)}),(function(e){a.catch((function(){})),r(e)}),i);if(t&&t.signal){var l=t.signal,c=function(){An(s,l.reason),l.removeEventListener("abort",c)};l.addEventListener("abort",c)}kn(s)}))},t.version="18.2.0"},58598:(e,t,n)=>{"use strict";var r,i;r=n(95290),i=n(18023),t.version=r.version,t.renderToString=r.renderToString,t.renderToStaticMarkup=r.renderToStaticMarkup,t.renderToNodeStream=r.renderToNodeStream,t.renderToStaticNodeStream=r.renderToStaticNodeStream,t.renderToReadableStream=i.renderToReadableStream},2248:function(e,t,n){!function(e,t){"use strict";function n(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,l,"next",e)}function l(e){n(a,i,o,s,l,"throw",e)}s(void 0)}))}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var s={init:"init"},l=function(e){var t=e.value;return void 0===t?"":t},c=function(){return t.createElement(t.Fragment,null,"")},u={Cell:l,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){var n=t.style,r=t.className;return e=i({},e,{},o(t,["style","className"])),n&&(e.style=e.style?i({},e.style||{},{},n||{}):n),r&&(e.className=e.className?e.className+" "+r:r),""===e.className&&delete e.className,e}),{})}var f=function(e,t){return void 0===t&&(t={}),function(n){return void 0===n&&(n={}),[].concat(e,[n]).reduce((function(e,r){return function e(t,n,r){return"function"==typeof n?e({},n(t,r)):Array.isArray(n)?d.apply(void 0,[t].concat(n)):d(t,n)}(e,r,i({},t,{userProps:n}))}),{})}},p=function(e,t,n,r){return void 0===n&&(n={}),e.reduce((function(e,t){return t(e,n)}),t)},h=function(e,t,n){return void 0===n&&(n={}),e.forEach((function(e){e(t,n)}))};function g(e,t,n,r){e.findIndex((function(e){return e.pluginName===n})),t.forEach((function(t){e.findIndex((function(e){return e.pluginName===t}))}))}function m(e,t){return"function"==typeof e?e(t):e}function v(e){var n=t.useRef();return n.current=e,t.useCallback((function(){return n.current}),[])}var b="undefined"!=typeof document?t.useLayoutEffect:t.useEffect;function y(e,n){var r=t.useRef(!1);b((function(){r.current&&e(),r.current=!0}),n)}function w(e,t,n){return void 0===n&&(n={}),function(r,o){void 0===o&&(o={});var a="string"==typeof r?t[r]:r;if(void 0===a)throw console.info(t),new Error("Renderer Error ");return x(a,i({},e,{column:t},n,{},o))}}function x(e,n){return function(e){return"function"==typeof e&&(t=Object.getPrototypeOf(e)).prototype&&t.prototype.isReactComponent;var t}(r=e)||"function"==typeof r||function(e){return"object"==typeof e&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}(r)?t.createElement(e,n):e;var r}function O(e,t,n){return void 0===n&&(n=0),e.map((function(e){return E(e=i({},e,{parent:t,depth:n})),e.columns&&(e.columns=O(e.columns,e,n+1)),e}))}function S(e){return D(e,"columns")}function E(e){var t=e.id,n=e.accessor,r=e.Header;if("string"==typeof n){t=t||n;var i=n.split(".");n=function(e){return function(e,t,n){if(!t)return e;var r,i="function"==typeof t?t:JSON.stringify(t),o=C.get(i)||function(){var e=function(e){return function e(t,n){if(void 0===n&&(n=[]),Array.isArray(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}(e).map((function(e){return String(e).replace(".","_")})).join(".").replace(I,".").replace(_,"").split(".")}(t);return C.set(i,e),e}();try{r=o.reduce((function(e,t){return e[t]}),e)}catch(e){}return void 0!==r?r:n}(e,i)}}if(!t&&"string"==typeof r&&r&&(t=r),!t&&e.columns)throw console.error(e),new Error('A column ID (or unique "Header" value) is required!');if(!t)throw console.error(e),new Error("A column ID (or string accessor) is required!");return Object.assign(e,{id:t,accessor:n}),e}function k(e,t){if(!t)throw new Error;return Object.assign(e,i({Header:c,Footer:c},u,{},t,{},e)),Object.assign(e,{originalWidth:e.width}),e}function j(e,t,n){void 0===n&&(n=function(){return{}});for(var r=[],o=e,a=0,s=function(){return a++},l=function(){var e={headers:[]},a=[],l=o.some((function(e){return e.parent}));o.forEach((function(r){var o,c=[].concat(a).reverse()[0];l&&(o=r.parent?i({},r.parent,{originalId:r.parent.id,id:r.parent.id+"_"+s(),headers:[r]},n(r)):k(i({originalId:r.id+"_placeholder",id:r.id+"_placeholder_"+s(),placeholderOf:r,headers:[r]},n(r)),t),c&&c.originalId===o.originalId?c.headers.push(r):a.push(o)),e.headers.push(r)})),r.push(e),o=a};o.length;)l();return r.reverse()}var C=new Map;function R(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r+=1)if(void 0!==t[r])return t[r]}function T(e){if("function"==typeof e)return e}function D(e,t){var n=[];return function e(r){r.forEach((function(r){r[t]?e(r[t]):n.push(r)}))}(e),n}function P(e,t){var n=t.manualExpandedKey,r=t.expanded,i=t.expandSubRows,o=void 0===i||i,a=[];return e.forEach((function(e){return function e(t,i){void 0===i&&(i=!0),t.isExpanded=t.original&&t.original[n]||r[t.id],t.canExpand=t.subRows&&!!t.subRows.length,i&&a.push(t),t.subRows&&t.subRows.length&&t.isExpanded&&t.subRows.forEach((function(t){return e(t,o)}))}(e)})),a}function A(e,t,n){return T(e)||t[e]||n[e]||n.text}function N(e,t,n){return e?e(t,n):void 0===t}function F(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var $=null,I=/\[/g,_=/\]/g,L=function(e){return i({role:"table"},e)},M=function(e){return i({role:"rowgroup"},e)},z=function(e,t){var n=t.column;return i({key:"header_"+n.id,colSpan:n.totalVisibleHeaderCount,role:"columnheader"},e)},B=function(e,t){var n=t.column;return i({key:"footer_"+n.id,colSpan:n.totalVisibleHeaderCount},e)},U=function(e,t){return i({key:"headerGroup_"+t.index,role:"row"},e)},H=function(e,t){return i({key:"footerGroup_"+t.index},e)},W=function(e,t){return i({key:"row_"+t.row.id,role:"row"},e)},G=function(e,t){var n=t.cell;return i({key:"cell_"+n.row.id+"_"+n.column.id,role:"cell"},e)};function q(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[L],getTableBodyProps:[M],getHeaderGroupProps:[U],getFooterGroupProps:[H],getHeaderProps:[z],getFooterProps:[B],getRowProps:[W],getCellProps:[G],useFinalInstance:[]}}s.resetHiddenColumns="resetHiddenColumns",s.toggleHideColumn="toggleHideColumn",s.setHiddenColumns="setHiddenColumns",s.toggleHideAllColumns="toggleHideAllColumns";var V=function(e){e.getToggleHiddenProps=[X],e.getToggleHideAllColumnsProps=[J],e.stateReducers.push(Y),e.useInstanceBeforeDimensions.push(K),e.headerGroupsDeps.push((function(e,t){var n=t.instance;return[].concat(e,[n.state.hiddenColumns])})),e.useInstance.push(Z)};V.pluginName="useColumnVisibility";var X=function(e,t){var n=t.column;return[e,{onChange:function(e){n.toggleHidden(!e.target.checked)},style:{cursor:"pointer"},checked:n.isVisible,title:"Toggle Column Visible"}]},J=function(e,t){var n=t.instance;return[e,{onChange:function(e){n.toggleHideAllColumns(!e.target.checked)},style:{cursor:"pointer"},checked:!n.allColumnsHidden&&!n.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!n.allColumnsHidden&&n.state.hiddenColumns.length}]};function Y(e,t,n,r){if(t.type===s.init)return i({hiddenColumns:[]},e);if(t.type===s.resetHiddenColumns)return i({},e,{hiddenColumns:r.initialState.hiddenColumns||[]});if(t.type===s.toggleHideColumn){var o=(void 0!==t.value?t.value:!e.hiddenColumns.includes(t.columnId))?[].concat(e.hiddenColumns,[t.columnId]):e.hiddenColumns.filter((function(e){return e!==t.columnId}));return i({},e,{hiddenColumns:o})}return t.type===s.setHiddenColumns?i({},e,{hiddenColumns:m(t.value,e.hiddenColumns)}):t.type===s.toggleHideAllColumns?i({},e,{hiddenColumns:(void 0!==t.value?t.value:!e.hiddenColumns.length)?r.allColumns.map((function(e){return e.id})):[]}):void 0}function K(e){var n=e.headers,r=e.state.hiddenColumns;t.useRef(!1).current;var i=0;n.forEach((function(e){return i+=function e(t,n){t.isVisible=n&&!r.includes(t.id);var i=0;return t.headers&&t.headers.length?t.headers.forEach((function(n){return i+=e(n,t.isVisible)})):i=t.isVisible?1:0,t.totalVisibleHeaderCount=i,i}(e,!0)}))}function Z(e){var n=e.columns,r=e.flatHeaders,i=e.dispatch,o=e.allColumns,a=e.getHooks,l=e.state.hiddenColumns,c=e.autoResetHiddenColumns,u=void 0===c||c,d=v(e),p=o.length===l.length,h=t.useCallback((function(e,t){return i({type:s.toggleHideColumn,columnId:e,value:t})}),[i]),g=t.useCallback((function(e){return i({type:s.setHiddenColumns,value:e})}),[i]),m=t.useCallback((function(e){return i({type:s.toggleHideAllColumns,value:e})}),[i]),b=f(a().getToggleHideAllColumnsProps,{instance:d()});r.forEach((function(e){e.toggleHidden=function(t){i({type:s.toggleHideColumn,columnId:e.id,value:t})},e.getToggleHiddenProps=f(a().getToggleHiddenProps,{instance:d(),column:e})}));var w=v(u);y((function(){w()&&i({type:s.resetHiddenColumns})}),[i,n]),Object.assign(e,{allColumnsHidden:p,toggleHideColumn:h,setHiddenColumns:g,toggleHideAllColumns:m,getToggleHideAllColumnsProps:b})}var Q={},ee={},te=function(e,t,n){return e},ne=function(e,t){return e.subRows||[]},re=function(e,t,n){return""+(n?[n.id,t].join("."):t)},ie=function(e){return e};function oe(e){var t=e.initialState,n=void 0===t?Q:t,r=e.defaultColumn,a=void 0===r?ee:r,s=e.getSubRows,l=void 0===s?ne:s,c=e.getRowId,u=void 0===c?re:c,d=e.stateReducer,f=void 0===d?te:d,p=e.useControlledState,h=void 0===p?ie:p;return i({},o(e,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:n,defaultColumn:a,getSubRows:l,getRowId:u,stateReducer:f,useControlledState:h})}function ae(e,t){void 0===t&&(t=0);var n=0,r=0,i=0,o=0;return e.forEach((function(e){var a=e.headers;if(e.totalLeft=t,a&&a.length){var s=ae(a,t),l=s[0],c=s[1],u=s[2],d=s[3];e.totalMinWidth=l,e.totalWidth=c,e.totalMaxWidth=u,e.totalFlexWidth=d}else e.totalMinWidth=e.minWidth,e.totalWidth=Math.min(Math.max(e.minWidth,e.width),e.maxWidth),e.totalMaxWidth=e.maxWidth,e.totalFlexWidth=e.canResize?e.totalWidth:0;e.isVisible&&(t+=e.totalWidth,n+=e.totalMinWidth,r+=e.totalWidth,i+=e.totalMaxWidth,o+=e.totalFlexWidth)})),[n,r,i,o]}function se(e){var t=e.data,n=e.rows,r=e.flatRows,i=e.rowsById,o=e.column,a=e.getRowId,s=e.getSubRows,l=e.accessValueHooks,c=e.getInstance;t.forEach((function(e,u){return function e(n,u,d,f,h){void 0===d&&(d=0);var g=n,m=a(n,u,f),v=i[m];if(v)v.subRows&&v.originalSubRows.forEach((function(t,n){return e(t,n,d+1,v)}));else if((v={id:m,original:g,index:u,depth:d,cells:[{}]}).cells.map=F,v.cells.filter=F,v.cells.forEach=F,v.cells[0].getCellProps=F,v.values={},h.push(v),r.push(v),i[m]=v,v.originalSubRows=s(n,u),v.originalSubRows){var b=[];v.originalSubRows.forEach((function(t,n){return e(t,n,d+1,v,b)})),v.subRows=b}o.accessor&&(v.values[o.id]=o.accessor(n,u,v,h,t)),v.values[o.id]=p(l,v.values[o.id],{row:v,column:o,instance:c()})}(e,u,0,void 0,n)}))}s.resetExpanded="resetExpanded",s.toggleRowExpanded="toggleRowExpanded",s.toggleAllRowsExpanded="toggleAllRowsExpanded";var le=function(e){e.getToggleAllRowsExpandedProps=[ce],e.getToggleRowExpandedProps=[ue],e.stateReducers.push(de),e.useInstance.push(fe),e.prepareRow.push(pe)};le.pluginName="useExpanded";var ce=function(e,t){var n=t.instance;return[e,{onClick:function(e){n.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},ue=function(e,t){var n=t.row;return[e,{onClick:function(){n.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function de(e,t,n,r){if(t.type===s.init)return i({expanded:{}},e);if(t.type===s.resetExpanded)return i({},e,{expanded:r.initialState.expanded||{}});if(t.type===s.toggleAllRowsExpanded){var l=t.value,c=r.rowsById,u=Object.keys(c).length===Object.keys(e.expanded).length;if(void 0!==l?l:!u){var d={};return Object.keys(c).forEach((function(e){d[e]=!0})),i({},e,{expanded:d})}return i({},e,{expanded:{}})}if(t.type===s.toggleRowExpanded){var f,p=t.id,h=t.value,g=e.expanded[p],m=void 0!==h?h:!g;if(!g&&m)return i({},e,{expanded:i({},e.expanded,(f={},f[p]=!0,f))});if(g&&!m){var v=e.expanded;return v[p],i({},e,{expanded:o(v,[p].map(a))})}return e}}function fe(e){var n=e.data,r=e.rows,i=e.rowsById,o=e.manualExpandedKey,a=void 0===o?"expanded":o,l=e.paginateExpandedRows,c=void 0===l||l,u=e.expandSubRows,d=void 0===u||u,p=e.autoResetExpanded,h=void 0===p||p,m=e.getHooks,b=e.plugins,w=e.state.expanded,x=e.dispatch;g(b,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var O=v(h),S=Boolean(Object.keys(i).length&&Object.keys(w).length);S&&Object.keys(i).some((function(e){return!w[e]}))&&(S=!1),y((function(){O()&&x({type:s.resetExpanded})}),[x,n]);var E=t.useCallback((function(e,t){x({type:s.toggleRowExpanded,id:e,value:t})}),[x]),k=t.useCallback((function(e){return x({type:s.toggleAllRowsExpanded,value:e})}),[x]),j=t.useMemo((function(){return c?P(r,{manualExpandedKey:a,expanded:w,expandSubRows:d}):r}),[c,r,a,w,d]),C=t.useMemo((function(){return function(e){var t=0;return Object.keys(e).forEach((function(e){var n=e.split(".");t=Math.max(t,n.length)})),t}(w)}),[w]),R=v(e),T=f(m().getToggleAllRowsExpandedProps,{instance:R()});Object.assign(e,{preExpandedRows:r,expandedRows:j,rows:j,expandedDepth:C,isAllRowsExpanded:S,toggleRowExpanded:E,toggleAllRowsExpanded:k,getToggleAllRowsExpandedProps:T})}function pe(e,t){var n=t.instance.getHooks,r=t.instance;e.toggleRowExpanded=function(t){return r.toggleRowExpanded(e.id,t)},e.getToggleRowExpandedProps=f(n().getToggleRowExpandedProps,{instance:r,row:e})}var he=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return String(r).toLowerCase().includes(String(n).toLowerCase())}))}))};he.autoRemove=function(e){return!e};var ge=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return void 0===r||String(r).toLowerCase()===String(n).toLowerCase()}))}))};ge.autoRemove=function(e){return!e};var me=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return void 0===r||String(r)===String(n)}))}))};me.autoRemove=function(e){return!e};var ve=function(e,t,n){return e.filter((function(e){return t.some((function(t){return e.values[t].includes(n)}))}))};ve.autoRemove=function(e){return!e||!e.length};var be=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return r&&r.length&&n.every((function(e){return r.includes(e)}))}))}))};be.autoRemove=function(e){return!e||!e.length};var ye=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return r&&r.length&&n.some((function(e){return r.includes(e)}))}))}))};ye.autoRemove=function(e){return!e||!e.length};var we=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return n.includes(r)}))}))};we.autoRemove=function(e){return!e||!e.length};var xe=function(e,t,n){return e.filter((function(e){return t.some((function(t){return e.values[t]===n}))}))};xe.autoRemove=function(e){return void 0===e};var Oe=function(e,t,n){return e.filter((function(e){return t.some((function(t){return e.values[t]==n}))}))};Oe.autoRemove=function(e){return null==e};var Se=function(e,t,n){var r=n||[],i=r[0],o=r[1];if((i="number"==typeof i?i:-1/0)>(o="number"==typeof o?o:1/0)){var a=i;i=o,o=a}return e.filter((function(e){return t.some((function(t){var n=e.values[t];return n>=i&&n<=o}))}))};Se.autoRemove=function(e){return!e||"number"!=typeof e[0]&&"number"!=typeof e[1]};var Ee=Object.freeze({__proto__:null,text:he,exactText:ge,exactTextCase:me,includes:ve,includesAll:be,includesSome:ye,includesValue:we,exact:xe,equals:Oe,between:Se});s.resetFilters="resetFilters",s.setFilter="setFilter",s.setAllFilters="setAllFilters";var ke=function(e){e.stateReducers.push(je),e.useInstance.push(Ce)};function je(e,t,n,r){if(t.type===s.init)return i({filters:[]},e);if(t.type===s.resetFilters)return i({},e,{filters:r.initialState.filters||[]});if(t.type===s.setFilter){var o=t.columnId,a=t.filterValue,l=r.allColumns,c=r.filterTypes,u=l.find((function(e){return e.id===o}));if(!u)throw new Error("React-Table: Could not find a column with id: "+o);var d=A(u.filter,c||{},Ee),f=e.filters.find((function(e){return e.id===o})),p=m(a,f&&f.value);return N(d.autoRemove,p,u)?i({},e,{filters:e.filters.filter((function(e){return e.id!==o}))}):i({},e,f?{filters:e.filters.map((function(e){return e.id===o?{id:o,value:p}:e}))}:{filters:[].concat(e.filters,[{id:o,value:p}])})}if(t.type===s.setAllFilters){var h=t.filters,g=r.allColumns,v=r.filterTypes;return i({},e,{filters:m(h,e.filters).filter((function(e){var t=g.find((function(t){return t.id===e.id}));return!N(A(t.filter,v||{},Ee).autoRemove,e.value,t)}))})}}function Ce(e){var n=e.data,r=e.rows,i=e.flatRows,o=e.rowsById,a=e.allColumns,l=e.filterTypes,c=e.manualFilters,u=e.defaultCanFilter,d=void 0!==u&&u,f=e.disableFilters,p=e.state.filters,h=e.dispatch,g=e.autoResetFilters,m=void 0===g||g,b=t.useCallback((function(e,t){h({type:s.setFilter,columnId:e,filterValue:t})}),[h]),w=t.useCallback((function(e){h({type:s.setAllFilters,filters:e})}),[h]);a.forEach((function(e){var t=e.id,n=e.accessor,r=e.defaultCanFilter,i=e.disableFilters;e.canFilter=n?R(!0!==i&&void 0,!0!==f&&void 0,!0):R(r,d,!1),e.setFilter=function(t){return b(e.id,t)};var o=p.find((function(e){return e.id===t}));e.filterValue=o&&o.value}));var x=t.useMemo((function(){if(c||!p.length)return[r,i,o];var e=[],t={};return[function n(r,i){void 0===i&&(i=0);var o=r;return(o=p.reduce((function(e,t){var n=t.id,r=t.value,o=a.find((function(e){return e.id===n}));if(!o)return e;0===i&&(o.preFilteredRows=e);var s=A(o.filter,l||{},Ee);return s?(o.filteredRows=s(e,[n],r),o.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+o.id+"."),e)}),r)).forEach((function(r){e.push(r),t[r.id]=r,r.subRows&&(r.subRows=r.subRows&&r.subRows.length>0?n(r.subRows,i+1):r.subRows)})),o}(r),e,t]}),[c,p,r,i,o,a,l]),O=x[0],S=x[1],E=x[2];t.useMemo((function(){a.filter((function(e){return!p.find((function(t){return t.id===e.id}))})).forEach((function(e){e.preFilteredRows=O,e.filteredRows=O}))}),[O,p,a]);var k=v(m);y((function(){k()&&h({type:s.resetFilters})}),[h,c?null:n]),Object.assign(e,{preFilteredRows:r,preFilteredFlatRows:i,preFilteredRowsById:o,filteredRows:O,filteredFlatRows:S,filteredRowsById:E,rows:O,flatRows:S,rowsById:E,setFilter:b,setAllFilters:w})}ke.pluginName="useFilters",s.resetGlobalFilter="resetGlobalFilter",s.setGlobalFilter="setGlobalFilter";var Re=function(e){e.stateReducers.push(Te),e.useInstance.push(De)};function Te(e,t,n,r){if(t.type===s.resetGlobalFilter)return i({},e,{globalFilter:r.initialState.globalFilter||void 0});if(t.type===s.setGlobalFilter){var a=t.filterValue,l=r.userFilterTypes,c=A(r.globalFilter,l||{},Ee),u=m(a,e.globalFilter);return N(c.autoRemove,u)?(e.globalFilter,o(e,["globalFilter"])):i({},e,{globalFilter:u})}}function De(e){var n=e.data,r=e.rows,i=e.flatRows,o=e.rowsById,a=e.allColumns,l=e.filterTypes,c=e.globalFilter,u=e.manualGlobalFilter,d=e.state.globalFilter,f=e.dispatch,p=e.autoResetGlobalFilter,h=void 0===p||p,g=e.disableGlobalFilter,m=t.useCallback((function(e){f({type:s.setGlobalFilter,filterValue:e})}),[f]),b=t.useMemo((function(){if(u||void 0===d)return[r,i,o];var e=[],t={},n=A(c,l||{},Ee);if(!n)return console.warn("Could not find a valid 'globalFilter' option."),r;a.forEach((function(e){var t=e.disableGlobalFilter;e.canFilter=R(!0!==t&&void 0,!0!==g&&void 0,!0)}));var s=a.filter((function(e){return!0===e.canFilter}));return[function r(i){return(i=n(i,s.map((function(e){return e.id})),d)).forEach((function(n){e.push(n),t[n.id]=n,n.subRows=n.subRows&&n.subRows.length?r(n.subRows):n.subRows})),i}(r),e,t]}),[u,d,c,l,a,r,i,o,g]),w=b[0],x=b[1],O=b[2],S=v(h);y((function(){S()&&f({type:s.resetGlobalFilter})}),[f,u?null:n]),Object.assign(e,{preGlobalFilteredRows:r,preGlobalFilteredFlatRows:i,preGlobalFilteredRowsById:o,globalFilteredRows:w,globalFilteredFlatRows:x,globalFilteredRowsById:O,rows:w,flatRows:x,rowsById:O,setGlobalFilter:m,disableGlobalFilter:g})}function Pe(e,t){return t.reduce((function(e,t){return e+("number"==typeof t?t:0)}),0)}Re.pluginName="useGlobalFilter";var Ae=Object.freeze({__proto__:null,sum:Pe,min:function(e){var t=e[0]||0;return e.forEach((function(e){"number"==typeof e&&(t=Math.min(t,e))})),t},max:function(e){var t=e[0]||0;return e.forEach((function(e){"number"==typeof e&&(t=Math.max(t,e))})),t},minMax:function(e){var t=e[0]||0,n=e[0]||0;return e.forEach((function(e){"number"==typeof e&&(t=Math.min(t,e),n=Math.max(n,e))})),t+".."+n},average:function(e){return Pe(0,e)/e.length},median:function(e){if(!e.length)return null;var t=Math.floor(e.length/2),n=[].concat(e).sort((function(e,t){return e-t}));return e.length%2!=0?n[t]:(n[t-1]+n[t])/2},unique:function(e){return Array.from(new Set(e).values())},uniqueCount:function(e){return new Set(e).size},count:function(e){return e.length}}),Ne=[],Fe={};s.resetGroupBy="resetGroupBy",s.setGroupBy="setGroupBy",s.toggleGroupBy="toggleGroupBy";var $e=function(e){e.getGroupByToggleProps=[Ie],e.stateReducers.push(_e),e.visibleColumnsDeps.push((function(e,t){var n=t.instance;return[].concat(e,[n.state.groupBy])})),e.visibleColumns.push(Le),e.useInstance.push(ze),e.prepareRow.push(Be)};$e.pluginName="useGroupBy";var Ie=function(e,t){var n=t.header;return[e,{onClick:n.canGroupBy?function(e){e.persist(),n.toggleGroupBy()}:void 0,style:{cursor:n.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function _e(e,t,n,r){if(t.type===s.init)return i({groupBy:[]},e);if(t.type===s.resetGroupBy)return i({},e,{groupBy:r.initialState.groupBy||[]});if(t.type===s.setGroupBy)return i({},e,{groupBy:t.value});if(t.type===s.toggleGroupBy){var o=t.columnId,a=t.value,l=void 0!==a?a:!e.groupBy.includes(o);return i({},e,l?{groupBy:[].concat(e.groupBy,[o])}:{groupBy:e.groupBy.filter((function(e){return e!==o}))})}}function Le(e,t){var n=t.instance.state.groupBy,r=n.map((function(t){return e.find((function(e){return e.id===t}))})).filter(Boolean),i=e.filter((function(e){return!n.includes(e.id)}));return(e=[].concat(r,i)).forEach((function(e){e.isGrouped=n.includes(e.id),e.groupedIndex=n.indexOf(e.id)})),e}var Me={};function ze(e){var n=e.data,r=e.rows,o=e.flatRows,a=e.rowsById,l=e.allColumns,c=e.flatHeaders,u=e.groupByFn,d=void 0===u?Ue:u,p=e.manualGroupBy,h=e.aggregations,m=void 0===h?Me:h,b=e.plugins,w=e.state.groupBy,x=e.dispatch,O=e.autoResetGroupBy,S=void 0===O||O,E=e.disableGroupBy,k=e.defaultCanGroupBy,j=e.getHooks;g(b,["useColumnOrder","useFilters"],"useGroupBy");var C=v(e);l.forEach((function(t){var n=t.accessor,r=t.defaultGroupBy,i=t.disableGroupBy;t.canGroupBy=n?R(t.canGroupBy,!0!==i&&void 0,!0!==E&&void 0,!0):R(t.canGroupBy,r,k,!1),t.canGroupBy&&(t.toggleGroupBy=function(){return e.toggleGroupBy(t.id)}),t.Aggregated=t.Aggregated||t.Cell}));var T=t.useCallback((function(e,t){x({type:s.toggleGroupBy,columnId:e,value:t})}),[x]),P=t.useCallback((function(e){x({type:s.setGroupBy,value:e})}),[x]);c.forEach((function(e){e.getGroupByToggleProps=f(j().getGroupByToggleProps,{instance:C(),header:e})}));var A=t.useMemo((function(){if(p||!w.length)return[r,o,a,Ne,Fe,o,a];var e=w.filter((function(e){return l.find((function(t){return t.id===e}))})),t=[],n={},s=[],c={},u=[],f={},h=function r(o,a,p){if(void 0===a&&(a=0),a===e.length)return o.map((function(e){return i({},e,{depth:a})}));var h=e[a],g=d(o,h);return Object.entries(g).map((function(i,o){var d=i[0],g=i[1],v=h+":"+d,b=r(g,a+1,v=p?p+">"+v:v),y=a?D(g,"leafRows"):g,w=function(t,n,r){var i={};return l.forEach((function(o){if(e.includes(o.id))i[o.id]=n[0]?n[0].values[o.id]:null;else{var a="function"==typeof o.aggregate?o.aggregate:m[o.aggregate]||Ae[o.aggregate];if(a){var s=n.map((function(e){return e.values[o.id]})),l=t.map((function(e){var t=e.values[o.id];if(!r&&o.aggregateValue){var n="function"==typeof o.aggregateValue?o.aggregateValue:m[o.aggregateValue]||Ae[o.aggregateValue];if(!n)throw console.info({column:o}),new Error("React Table: Invalid column.aggregateValue option for column listed above");t=n(t,e,o)}return t}));i[o.id]=a(l,s)}else{if(o.aggregate)throw console.info({column:o}),new Error("React Table: Invalid column.aggregate option for column listed above");i[o.id]=null}}})),i}(y,g,a),x={id:v,isGrouped:!0,groupByID:h,groupByVal:d,values:w,subRows:b,leafRows:y,depth:a,index:o};return b.forEach((function(e){t.push(e),n[e.id]=e,e.isGrouped?(s.push(e),c[e.id]=e):(u.push(e),f[e.id]=e)})),x}))}(r);return h.forEach((function(e){t.push(e),n[e.id]=e,e.isGrouped?(s.push(e),c[e.id]=e):(u.push(e),f[e.id]=e)})),[h,t,n,s,c,u,f]}),[p,w,r,o,a,l,m,d]),N=A[0],F=A[1],$=A[2],I=A[3],_=A[4],L=A[5],M=A[6],z=v(S);y((function(){z()&&x({type:s.resetGroupBy})}),[x,p?null:n]),Object.assign(e,{preGroupedRows:r,preGroupedFlatRow:o,preGroupedRowsById:a,groupedRows:N,groupedFlatRows:F,groupedRowsById:$,onlyGroupedFlatRows:I,onlyGroupedRowsById:_,nonGroupedFlatRows:L,nonGroupedRowsById:M,rows:N,flatRows:F,rowsById:$,toggleGroupBy:T,setGroupBy:P})}function Be(e){e.allCells.forEach((function(t){var n;t.isGrouped=t.column.isGrouped&&t.column.id===e.groupByID,t.isPlaceholder=!t.isGrouped&&t.column.isGrouped,t.isAggregated=!t.isGrouped&&!t.isPlaceholder&&(null==(n=e.subRows)?void 0:n.length)}))}function Ue(e,t){return e.reduce((function(e,n,r){var i=""+n.values[t];return e[i]=Array.isArray(e[i])?e[i]:[],e[i].push(n),e}),{})}var He=/([0-9]+)/gm;function We(e,t){return e===t?0:e>t?1:-1}function Ge(e,t,n){return[e.values[n],t.values[n]]}function qe(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}var Ve=Object.freeze({__proto__:null,alphanumeric:function(e,t,n){var r=Ge(e,t,n),i=r[0],o=r[1];for(i=qe(i),o=qe(o),i=i.split(He).filter(Boolean),o=o.split(He).filter(Boolean);i.length&&o.length;){var a=i.shift(),s=o.shift(),l=parseInt(a,10),c=parseInt(s,10),u=[l,c].sort();if(isNaN(u[0])){if(a>s)return 1;if(s>a)return-1}else{if(isNaN(u[1]))return isNaN(l)?-1:1;if(l>c)return 1;if(c>l)return-1}}return i.length-o.length},datetime:function(e,t,n){var r=Ge(e,t,n),i=r[0],o=r[1];return We(i=i.getTime(),o=o.getTime())},basic:function(e,t,n){var r=Ge(e,t,n);return We(r[0],r[1])},string:function(e,t,n){var r=Ge(e,t,n),i=r[0],o=r[1];for(i=i.split("").filter(Boolean),o=o.split("").filter(Boolean);i.length&&o.length;){var a=i.shift(),s=o.shift(),l=a.toLowerCase(),c=s.toLowerCase();if(l>c)return 1;if(c>l)return-1;if(a>s)return 1;if(s>a)return-1}return i.length-o.length},number:function(e,t,n){var r=Ge(e,t,n),i=r[0],o=r[1],a=/[^0-9.]/gi;return We(i=Number(String(i).replace(a,"")),o=Number(String(o).replace(a,"")))}});s.resetSortBy="resetSortBy",s.setSortBy="setSortBy",s.toggleSortBy="toggleSortBy",s.clearSortBy="clearSortBy",u.sortType="alphanumeric",u.sortDescFirst=!1;var Xe=function(e){e.getSortByToggleProps=[Je],e.stateReducers.push(Ye),e.useInstance.push(Ke)};Xe.pluginName="useSortBy";var Je=function(e,t){var n=t.instance,r=t.column,i=n.isMultiSortEvent,o=void 0===i?function(e){return e.shiftKey}:i;return[e,{onClick:r.canSort?function(e){e.persist(),r.toggleSortBy(void 0,!n.disableMultiSort&&o(e))}:void 0,style:{cursor:r.canSort?"pointer":void 0},title:r.canSort?"Toggle SortBy":void 0}]};function Ye(e,t,n,r){if(t.type===s.init)return i({sortBy:[]},e);if(t.type===s.resetSortBy)return i({},e,{sortBy:r.initialState.sortBy||[]});if(t.type===s.clearSortBy)return i({},e,{sortBy:e.sortBy.filter((function(e){return e.id!==t.columnId}))});if(t.type===s.setSortBy)return i({},e,{sortBy:t.sortBy});if(t.type===s.toggleSortBy){var o,a=t.columnId,l=t.desc,c=t.multi,u=r.allColumns,d=r.disableMultiSort,f=r.disableSortRemove,p=r.disableMultiRemove,h=r.maxMultiSortColCount,g=void 0===h?Number.MAX_SAFE_INTEGER:h,m=e.sortBy,v=u.find((function(e){return e.id===a})).sortDescFirst,b=m.find((function(e){return e.id===a})),y=m.findIndex((function(e){return e.id===a})),w=null!=l,x=[];return"toggle"!=(o=!d&&c?b?"toggle":"add":y!==m.length-1||1!==m.length?"replace":b?"toggle":"replace")||f||w||c&&p||!(b&&b.desc&&!v||!b.desc&&v)||(o="remove"),"replace"===o?x=[{id:a,desc:w?l:v}]:"add"===o?(x=[].concat(m,[{id:a,desc:w?l:v}])).splice(0,x.length-g):"toggle"===o?x=m.map((function(e){return e.id===a?i({},e,{desc:w?l:!b.desc}):e})):"remove"===o&&(x=m.filter((function(e){return e.id!==a}))),i({},e,{sortBy:x})}}function Ke(e){var n=e.data,r=e.rows,i=e.flatRows,o=e.allColumns,a=e.orderByFn,l=void 0===a?Ze:a,c=e.sortTypes,u=e.manualSortBy,d=e.defaultCanSort,p=e.disableSortBy,h=e.flatHeaders,m=e.state.sortBy,b=e.dispatch,w=e.plugins,x=e.getHooks,O=e.autoResetSortBy,S=void 0===O||O;g(w,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var E=t.useCallback((function(e){b({type:s.setSortBy,sortBy:e})}),[b]),k=t.useCallback((function(e,t,n){b({type:s.toggleSortBy,columnId:e,desc:t,multi:n})}),[b]),j=v(e);h.forEach((function(e){var t=e.accessor,n=e.canSort,r=e.disableSortBy,i=e.id,o=t?R(!0!==r&&void 0,!0!==p&&void 0,!0):R(d,n,!1);e.canSort=o,e.canSort&&(e.toggleSortBy=function(t,n){return k(e.id,t,n)},e.clearSortBy=function(){b({type:s.clearSortBy,columnId:e.id})}),e.getSortByToggleProps=f(x().getSortByToggleProps,{instance:j(),column:e});var a=m.find((function(e){return e.id===i}));e.isSorted=!!a,e.sortedIndex=m.findIndex((function(e){return e.id===i})),e.isSortedDesc=e.isSorted?a.desc:void 0}));var C=t.useMemo((function(){if(u||!m.length)return[r,i];var e=[],t=m.filter((function(e){return o.find((function(t){return t.id===e.id}))}));return[function n(r){var i=l(r,t.map((function(e){var t=o.find((function(t){return t.id===e.id}));if(!t)throw new Error("React-Table: Could not find a column with id: "+e.id+" while sorting");var n=t.sortType,r=T(n)||(c||{})[n]||Ve[n];if(!r)throw new Error("React-Table: Could not find a valid sortType of '"+n+"' for column '"+e.id+"'.");return function(t,n){return r(t,n,e.id,e.desc)}})),t.map((function(e){var t=o.find((function(t){return t.id===e.id}));return t&&t.sortInverted?e.desc:!e.desc})));return i.forEach((function(t){e.push(t),t.subRows&&0!==t.subRows.length&&(t.subRows=n(t.subRows))})),i}(r),e]}),[u,m,r,i,o,l,c]),D=C[0],P=C[1],A=v(S);y((function(){A()&&b({type:s.resetSortBy})}),[u?null:n]),Object.assign(e,{preSortedRows:r,preSortedFlatRows:i,sortedRows:D,sortedFlatRows:P,rows:D,flatRows:P,setSortBy:E,toggleSortBy:k})}function Ze(e,t,n){return[].concat(e).sort((function(e,r){for(var i=0;i<t.length;i+=1){var o=t[i],a=!1===n[i]||"desc"===n[i],s=o(e,r);if(0!==s)return a?-s:s}return n[0]?e.index-r.index:r.index-e.index}))}s.resetPage="resetPage",s.gotoPage="gotoPage",s.setPageSize="setPageSize";var Qe=function(e){e.stateReducers.push(et),e.useInstance.push(tt)};function et(e,t,n,r){if(t.type===s.init)return i({pageSize:10,pageIndex:0},e);if(t.type===s.resetPage)return i({},e,{pageIndex:r.initialState.pageIndex||0});if(t.type===s.gotoPage){var o=r.pageCount,a=r.page,l=m(t.pageIndex,e.pageIndex),c=!1;return l>e.pageIndex?c=-1===o?a.length>=e.pageSize:l<o:l<e.pageIndex&&(c=l>-1),c?i({},e,{pageIndex:l}):e}if(t.type===s.setPageSize){var u=t.pageSize,d=e.pageSize*e.pageIndex;return i({},e,{pageIndex:Math.floor(d/u),pageSize:u})}}function tt(e){var n=e.rows,r=e.autoResetPage,i=void 0===r||r,o=e.manualExpandedKey,a=void 0===o?"expanded":o,l=e.plugins,c=e.pageCount,u=e.paginateExpandedRows,d=void 0===u||u,f=e.expandSubRows,p=void 0===f||f,h=e.state,m=h.pageSize,b=h.pageIndex,w=h.expanded,x=h.globalFilter,O=h.filters,S=h.groupBy,E=h.sortBy,k=e.dispatch,j=e.data,C=e.manualPagination;g(l,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var R=v(i);y((function(){R()&&k({type:s.resetPage})}),[k,C?null:j,x,O,S,E]);var T=C?c:Math.ceil(n.length/m),D=t.useMemo((function(){return T>0?[].concat(new Array(T)).fill(null).map((function(e,t){return t})):[]}),[T]),A=t.useMemo((function(){var e;if(C)e=n;else{var t=m*b,r=t+m;e=n.slice(t,r)}return d?e:P(e,{manualExpandedKey:a,expanded:w,expandSubRows:p})}),[p,w,a,C,b,m,d,n]),N=b>0,F=-1===T?A.length>=m:b<T-1,$=t.useCallback((function(e){k({type:s.gotoPage,pageIndex:e})}),[k]),I=t.useCallback((function(){return $((function(e){return e-1}))}),[$]),_=t.useCallback((function(){return $((function(e){return e+1}))}),[$]),L=t.useCallback((function(e){k({type:s.setPageSize,pageSize:e})}),[k]);Object.assign(e,{pageOptions:D,pageCount:T,page:A,canPreviousPage:N,canNextPage:F,gotoPage:$,previousPage:I,nextPage:_,setPageSize:L})}Qe.pluginName="usePagination",s.resetPivot="resetPivot",s.togglePivot="togglePivot";var nt=function(e){e.getPivotToggleProps=[it],e.stateReducers.push(ot),e.useInstanceAfterData.push(at),e.allColumns.push(st),e.accessValue.push(lt),e.materializedColumns.push(ct),e.materializedColumnsDeps.push(ut),e.visibleColumns.push(dt),e.visibleColumnsDeps.push(ft),e.useInstance.push(pt),e.prepareRow.push(ht)};nt.pluginName="usePivotColumns";var rt=[],it=function(e,t){var n=t.header;return[e,{onClick:n.canPivot?function(e){e.persist(),n.togglePivot()}:void 0,style:{cursor:n.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function ot(e,t,n,r){if(t.type===s.init)return i({pivotColumns:rt},e);if(t.type===s.resetPivot)return i({},e,{pivotColumns:r.initialState.pivotColumns||rt});if(t.type===s.togglePivot){var o=t.columnId,a=t.value,l=void 0!==a?a:!e.pivotColumns.includes(o);return i({},e,l?{pivotColumns:[].concat(e.pivotColumns,[o])}:{pivotColumns:e.pivotColumns.filter((function(e){return e!==o}))})}}function at(e){e.allColumns.forEach((function(t){t.isPivotSource=e.state.pivotColumns.includes(t.id)}))}function st(e,t){var n=t.instance;return e.forEach((function(e){e.isPivotSource=n.state.pivotColumns.includes(e.id),e.uniqueValues=new Set})),e}function lt(e,t){var n=t.column;return n.uniqueValues&&void 0!==e&&n.uniqueValues.add(e),e}function ct(e,t){var n=t.instance,r=n.allColumns,o=n.state;if(!o.pivotColumns.length||!o.groupBy||!o.groupBy.length)return e;var a=o.pivotColumns.map((function(e){return r.find((function(t){return t.id===e}))})).filter(Boolean),s=r.filter((function(e){return!e.isPivotSource&&!o.groupBy.includes(e.id)&&!o.pivotColumns.includes(e.id)})),l=S(function e(t,n,r){void 0===t&&(t=0),void 0===r&&(r=[]);var o=a[t];return o?Array.from(o.uniqueValues).sort().map((function(a){var s=i({},o,{Header:o.PivotHeader||"string"==typeof o.header?o.Header+": "+a:a,isPivotGroup:!0,parent:n,depth:t,id:n?n.id+"."+o.id+"."+a:o.id+"."+a,pivotValue:a});return s.columns=e(t+1,s,[].concat(r,[function(e){return e.values[o.id]===a}])),s})):s.map((function(e){return i({},e,{canPivot:!1,isPivoted:!0,parent:n,depth:t,id:""+(n?n.id+"."+e.id:e.id),accessor:function(t,n,i){if(r.every((function(e){return e(i)})))return i.values[e.id]}})}))}());return[].concat(e,l)}function ut(e,t){var n=t.instance.state,r=n.pivotColumns,i=n.groupBy;return[].concat(e,[r,i])}function dt(e,t){var n=t.instance.state;return e=e.filter((function(e){return!e.isPivotSource})),n.pivotColumns.length&&n.groupBy&&n.groupBy.length&&(e=e.filter((function(e){return e.isGrouped||e.isPivoted}))),e}function ft(e,t){var n=t.instance;return[].concat(e,[n.state.pivotColumns,n.state.groupBy])}function pt(e){var t=e.columns,n=e.allColumns,r=e.flatHeaders,i=e.getHooks,o=e.plugins,a=e.dispatch,l=e.autoResetPivot,c=void 0===l||l,u=e.manaulPivot,d=e.disablePivot,p=e.defaultCanPivot;g(o,["useGroupBy"],"usePivotColumns");var h=v(e);n.forEach((function(t){var n=t.accessor,r=t.defaultPivot,i=t.disablePivot;t.canPivot=n?R(t.canPivot,!0!==i&&void 0,!0!==d&&void 0,!0):R(t.canPivot,r,p,!1),t.canPivot&&(t.togglePivot=function(){return e.togglePivot(t.id)}),t.Aggregated=t.Aggregated||t.Cell})),r.forEach((function(e){e.getPivotToggleProps=f(i().getPivotToggleProps,{instance:h(),header:e})}));var m=v(c);y((function(){m()&&a({type:s.resetPivot})}),[a,u?null:t]),Object.assign(e,{togglePivot:function(e,t){a({type:s.togglePivot,columnId:e,value:t})}})}function ht(e){e.allCells.forEach((function(e){e.isPivoted=e.column.isPivoted}))}s.resetSelectedRows="resetSelectedRows",s.toggleAllRowsSelected="toggleAllRowsSelected",s.toggleRowSelected="toggleRowSelected",s.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var gt=function(e){e.getToggleRowSelectedProps=[mt],e.getToggleAllRowsSelectedProps=[vt],e.getToggleAllPageRowsSelectedProps=[bt],e.stateReducers.push(yt),e.useInstance.push(wt),e.prepareRow.push(xt)};gt.pluginName="useRowSelect";var mt=function(e,t){var n=t.instance,r=t.row,i=n.manualRowSelectedKey,o=void 0===i?"isSelected":i;return[e,{onChange:function(e){r.toggleRowSelected(e.target.checked)},style:{cursor:"pointer"},checked:!(!r.original||!r.original[o])||r.isSelected,title:"Toggle Row Selected",indeterminate:r.isSomeSelected}]},vt=function(e,t){var n=t.instance;return[e,{onChange:function(e){n.toggleAllRowsSelected(e.target.checked)},style:{cursor:"pointer"},checked:n.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:Boolean(!n.isAllRowsSelected&&Object.keys(n.state.selectedRowIds).length)}]},bt=function(e,t){var n=t.instance;return[e,{onChange:function(e){n.toggleAllPageRowsSelected(e.target.checked)},style:{cursor:"pointer"},checked:n.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:Boolean(!n.isAllPageRowsSelected&&n.page.some((function(e){var t=e.id;return n.state.selectedRowIds[t]})))}]};function yt(e,t,n,r){if(t.type===s.init)return i({selectedRowIds:{}},e);if(t.type===s.resetSelectedRows)return i({},e,{selectedRowIds:r.initialState.selectedRowIds||{}});if(t.type===s.toggleAllRowsSelected){var o=t.value,a=r.isAllRowsSelected,l=r.rowsById,c=r.nonGroupedRowsById,u=void 0===c?l:c,d=void 0!==o?o:!a,f=Object.assign({},e.selectedRowIds);return d?Object.keys(u).forEach((function(e){f[e]=!0})):Object.keys(u).forEach((function(e){delete f[e]})),i({},e,{selectedRowIds:f})}if(t.type===s.toggleRowSelected){var p=t.id,h=t.value,g=r.rowsById,m=r.selectSubRows,v=void 0===m||m,b=r.getSubRows,y=e.selectedRowIds[p],w=void 0!==h?h:!y;if(y===w)return e;var x=i({},e.selectedRowIds);return function e(t){var n=g[t];if(n&&(n.isGrouped||(w?x[t]=!0:delete x[t]),v&&b(n)))return b(n).forEach((function(t){return e(t.id)}))}(p),i({},e,{selectedRowIds:x})}if(t.type===s.toggleAllPageRowsSelected){var O=t.value,S=r.page,E=r.rowsById,k=r.selectSubRows,j=void 0===k||k,C=r.isAllPageRowsSelected,R=r.getSubRows,T=void 0!==O?O:!C,D=i({},e.selectedRowIds);return S.forEach((function(e){return function e(t){var n=E[t];if(n.isGrouped||(T?D[t]=!0:delete D[t]),j&&R(n))return R(n).forEach((function(t){return e(t.id)}))}(e.id)})),i({},e,{selectedRowIds:D})}return e}function wt(e){var n=e.data,r=e.rows,i=e.getHooks,o=e.plugins,a=e.rowsById,l=e.nonGroupedRowsById,c=void 0===l?a:l,u=e.autoResetSelectedRows,d=void 0===u||u,p=e.state.selectedRowIds,h=e.selectSubRows,m=void 0===h||h,b=e.dispatch,w=e.page,x=e.getSubRows;g(o,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var O=t.useMemo((function(){var e=[];return r.forEach((function(t){var n=m?function e(t,n,r){if(n[t.id])return!0;var i=r(t);if(i&&i.length){var o=!0,a=!1;return i.forEach((function(t){a&&!o||(e(t,n,r)?a=!0:o=!1)})),!!o||!!a&&null}return!1}(t,p,x):!!p[t.id];t.isSelected=!!n,t.isSomeSelected=null===n,n&&e.push(t)})),e}),[r,m,p,x]),S=Boolean(Object.keys(c).length&&Object.keys(p).length),E=S;S&&Object.keys(c).some((function(e){return!p[e]}))&&(S=!1),S||w&&w.length&&w.some((function(e){var t=e.id;return!p[t]}))&&(E=!1);var k=v(d);y((function(){k()&&b({type:s.resetSelectedRows})}),[b,n]);var j=t.useCallback((function(e){return b({type:s.toggleAllRowsSelected,value:e})}),[b]),C=t.useCallback((function(e){return b({type:s.toggleAllPageRowsSelected,value:e})}),[b]),R=t.useCallback((function(e,t){return b({type:s.toggleRowSelected,id:e,value:t})}),[b]),T=v(e),D=f(i().getToggleAllRowsSelectedProps,{instance:T()}),P=f(i().getToggleAllPageRowsSelectedProps,{instance:T()});Object.assign(e,{selectedFlatRows:O,isAllRowsSelected:S,isAllPageRowsSelected:E,toggleRowSelected:R,toggleAllRowsSelected:j,getToggleAllRowsSelectedProps:D,getToggleAllPageRowsSelectedProps:P,toggleAllPageRowsSelected:C})}function xt(e,t){var n=t.instance;e.toggleRowSelected=function(t){return n.toggleRowSelected(e.id,t)},e.getToggleRowSelectedProps=f(n.getHooks().getToggleRowSelectedProps,{instance:n,row:e})}var Ot=function(e){return{}},St=function(e){return{}};s.setRowState="setRowState",s.setCellState="setCellState",s.resetRowState="resetRowState";var Et=function(e){e.stateReducers.push(kt),e.useInstance.push(jt),e.prepareRow.push(Ct)};function kt(e,t,n,r){var o=r.initialRowStateAccessor,a=void 0===o?Ot:o,l=r.initialCellStateAccessor,c=void 0===l?St:l,u=r.rowsById;if(t.type===s.init)return i({rowState:{}},e);if(t.type===s.resetRowState)return i({},e,{rowState:r.initialState.rowState||{}});if(t.type===s.setRowState){var d,f=t.rowId,p=t.value,h=void 0!==e.rowState[f]?e.rowState[f]:a(u[f]);return i({},e,{rowState:i({},e.rowState,(d={},d[f]=m(p,h),d))})}if(t.type===s.setCellState){var g,v,b,y,w,x=t.rowId,O=t.columnId,S=t.value,E=void 0!==e.rowState[x]?e.rowState[x]:a(u[x]),k=void 0!==(null==E||null==(g=E.cellState)?void 0:g[O])?E.cellState[O]:c(null==(v=u[x])||null==(b=v.cells)?void 0:b.find((function(e){return e.column.id===O})));return i({},e,{rowState:i({},e.rowState,(w={},w[x]=i({},E,{cellState:i({},E.cellState||{},(y={},y[O]=m(S,k),y))}),w))})}}function jt(e){var n=e.autoResetRowState,r=void 0===n||n,i=e.data,o=e.dispatch,a=t.useCallback((function(e,t){return o({type:s.setRowState,rowId:e,value:t})}),[o]),l=t.useCallback((function(e,t,n){return o({type:s.setCellState,rowId:e,columnId:t,value:n})}),[o]),c=v(r);y((function(){c()&&o({type:s.resetRowState})}),[i]),Object.assign(e,{setRowState:a,setCellState:l})}function Ct(e,t){var n=t.instance,r=n.initialRowStateAccessor,i=void 0===r?Ot:r,o=n.initialCellStateAccessor,a=void 0===o?St:o,s=n.state.rowState;e&&(e.state=void 0!==s[e.id]?s[e.id]:i(e),e.setState=function(t){return n.setRowState(e.id,t)},e.cells.forEach((function(t){e.state.cellState||(e.state.cellState={}),t.state=void 0!==e.state.cellState[t.column.id]?e.state.cellState[t.column.id]:a(t),t.setState=function(r){return n.setCellState(e.id,t.column.id,r)}})))}Et.pluginName="useRowState",s.resetColumnOrder="resetColumnOrder",s.setColumnOrder="setColumnOrder";var Rt=function(e){e.stateReducers.push(Tt),e.visibleColumnsDeps.push((function(e,t){var n=t.instance;return[].concat(e,[n.state.columnOrder])})),e.visibleColumns.push(Dt),e.useInstance.push(Pt)};function Tt(e,t,n,r){return t.type===s.init?i({columnOrder:[]},e):t.type===s.resetColumnOrder?i({},e,{columnOrder:r.initialState.columnOrder||[]}):t.type===s.setColumnOrder?i({},e,{columnOrder:m(t.columnOrder,e.columnOrder)}):void 0}function Dt(e,t){var n=t.instance.state.columnOrder;if(!n||!n.length)return e;for(var r=[].concat(n),i=[].concat(e),o=[],a=function(){var e=r.shift(),t=i.findIndex((function(t){return t.id===e}));t>-1&&o.push(i.splice(t,1)[0])};i.length&&r.length;)a();return[].concat(o,i)}function Pt(e){var n=e.dispatch;e.setColumnOrder=t.useCallback((function(e){return n({type:s.setColumnOrder,columnOrder:e})}),[n])}Rt.pluginName="useColumnOrder",u.canResize=!0,s.columnStartResizing="columnStartResizing",s.columnResizing="columnResizing",s.columnDoneResizing="columnDoneResizing",s.resetResize="resetResize";var At=function(e){e.getResizerProps=[Nt],e.getHeaderProps.push({style:{position:"relative"}}),e.stateReducers.push(Ft),e.useInstance.push(It),e.useInstanceBeforeDimensions.push($t)},Nt=function(e,t){var n=t.instance,r=t.header,i=n.dispatch,o=function(e,t){var n=!1;if("touchstart"===e.type){if(e.touches&&e.touches.length>1)return;n=!0}var r,o,a=function(e){var t=[];return function e(n){n.columns&&n.columns.length&&n.columns.map(e),t.push(n)}(e),t}(t).map((function(e){return[e.id,e.totalWidth]})),l=n?Math.round(e.touches[0].clientX):e.clientX,c=function(){window.cancelAnimationFrame(r),r=null,i({type:s.columnDoneResizing})},u=function(){window.cancelAnimationFrame(r),r=null,i({type:s.columnResizing,clientX:o})},d=function(e){o=e,r||(r=window.requestAnimationFrame(u))},f={mouse:{moveEvent:"mousemove",moveHandler:function(e){return d(e.clientX)},upEvent:"mouseup",upHandler:function(e){document.removeEventListener("mousemove",f.mouse.moveHandler),document.removeEventListener("mouseup",f.mouse.upHandler),c()}},touch:{moveEvent:"touchmove",moveHandler:function(e){return e.cancelable&&(e.preventDefault(),e.stopPropagation()),d(e.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(e){document.removeEventListener(f.touch.moveEvent,f.touch.moveHandler),document.removeEventListener(f.touch.upEvent,f.touch.moveHandler),c()}}},p=n?f.touch:f.mouse,h=!!function(){if("boolean"==typeof $)return $;var e=!1;try{var t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return $=e}()&&{passive:!1};document.addEventListener(p.moveEvent,p.moveHandler,h),document.addEventListener(p.upEvent,p.upHandler,h),i({type:s.columnStartResizing,columnId:t.id,columnWidth:t.totalWidth,headerIdWidths:a,clientX:l})};return[e,{onMouseDown:function(e){return e.persist()||o(e,r)},onTouchStart:function(e){return e.persist()||o(e,r)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function Ft(e,t){if(t.type===s.init)return i({columnResizing:{columnWidths:{}}},e);if(t.type===s.resetResize)return i({},e,{columnResizing:{columnWidths:{}}});if(t.type===s.columnStartResizing){var n=t.clientX,r=t.columnId,o=t.columnWidth,a=t.headerIdWidths;return i({},e,{columnResizing:i({},e.columnResizing,{startX:n,headerIdWidths:a,columnWidth:o,isResizingColumn:r})})}if(t.type===s.columnResizing){var l=t.clientX,c=e.columnResizing,u=c.startX,d=c.columnWidth,f=c.headerIdWidths,p=(l-u)/d,h={};return(void 0===f?[]:f).forEach((function(e){var t=e[0],n=e[1];h[t]=Math.max(n+n*p,0)})),i({},e,{columnResizing:i({},e.columnResizing,{columnWidths:i({},e.columnResizing.columnWidths,{},h)})})}return t.type===s.columnDoneResizing?i({},e,{columnResizing:i({},e.columnResizing,{startX:null,isResizingColumn:null})}):void 0}At.pluginName="useResizeColumns";var $t=function(e){var t=e.flatHeaders,n=e.disableResizing,r=e.getHooks,i=e.state.columnResizing,o=v(e);t.forEach((function(e){var t=R(!0!==e.disableResizing&&void 0,!0!==n&&void 0,!0);e.canResize=t,e.width=i.columnWidths[e.id]||e.originalWidth||e.width,e.isResizing=i.isResizingColumn===e.id,t&&(e.getResizerProps=f(r().getResizerProps,{instance:o(),header:e}))}))};function It(e){var n=e.plugins,r=e.dispatch,i=e.autoResetResize,o=void 0===i||i,a=e.columns;g(n,["useAbsoluteLayout"],"useResizeColumns");var l=v(o);y((function(){l()&&r({type:s.resetResize})}),[a]);var c=t.useCallback((function(){return r({type:s.resetResize})}),[r]);Object.assign(e,{resetResizing:c})}var _t={position:"absolute",top:0},Lt=function(e){e.getTableBodyProps.push(Mt),e.getRowProps.push(Mt),e.getHeaderGroupProps.push(Mt),e.getFooterGroupProps.push(Mt),e.getHeaderProps.push((function(e,t){var n=t.column;return[e,{style:i({},_t,{left:n.totalLeft+"px",width:n.totalWidth+"px"})}]})),e.getCellProps.push((function(e,t){var n=t.cell;return[e,{style:i({},_t,{left:n.column.totalLeft+"px",width:n.column.totalWidth+"px"})}]})),e.getFooterProps.push((function(e,t){var n=t.column;return[e,{style:i({},_t,{left:n.totalLeft+"px",width:n.totalWidth+"px"})}]}))};Lt.pluginName="useAbsoluteLayout";var Mt=function(e,t){return[e,{style:{position:"relative",width:t.instance.totalColumnsWidth+"px"}}]},zt={display:"inline-block",boxSizing:"border-box"},Bt=function(e,t){return[e,{style:{display:"flex",width:t.instance.totalColumnsWidth+"px"}}]},Ut=function(e){e.getRowProps.push(Bt),e.getHeaderGroupProps.push(Bt),e.getFooterGroupProps.push(Bt),e.getHeaderProps.push((function(e,t){var n=t.column;return[e,{style:i({},zt,{width:n.totalWidth+"px"})}]})),e.getCellProps.push((function(e,t){var n=t.cell;return[e,{style:i({},zt,{width:n.column.totalWidth+"px"})}]})),e.getFooterProps.push((function(e,t){var n=t.column;return[e,{style:i({},zt,{width:n.totalWidth+"px"})}]}))};function Ht(e){e.getTableProps.push(Wt),e.getRowProps.push(Gt),e.getHeaderGroupProps.push(Gt),e.getFooterGroupProps.push(Gt),e.getHeaderProps.push(qt),e.getCellProps.push(Vt),e.getFooterProps.push(Xt)}Ut.pluginName="useBlockLayout",Ht.pluginName="useFlexLayout";var Wt=function(e,t){return[e,{style:{minWidth:t.instance.totalColumnsMinWidth+"px"}}]},Gt=function(e,t){return[e,{style:{display:"flex",flex:"1 0 auto",minWidth:t.instance.totalColumnsMinWidth+"px"}}]},qt=function(e,t){var n=t.column;return[e,{style:{boxSizing:"border-box",flex:n.totalFlexWidth?n.totalFlexWidth+" 0 auto":void 0,minWidth:n.totalMinWidth+"px",width:n.totalWidth+"px"}}]},Vt=function(e,t){var n=t.cell;return[e,{style:{boxSizing:"border-box",flex:n.column.totalFlexWidth+" 0 auto",minWidth:n.column.totalMinWidth+"px",width:n.column.totalWidth+"px"}}]},Xt=function(e,t){var n=t.column;return[e,{style:{boxSizing:"border-box",flex:n.totalFlexWidth?n.totalFlexWidth+" 0 auto":void 0,minWidth:n.totalMinWidth+"px",width:n.totalWidth+"px"}}]};function Jt(e){e.stateReducers.push(Qt),e.getTableProps.push(Yt),e.getHeaderProps.push(Kt),e.getRowProps.push(Zt)}s.columnStartResizing="columnStartResizing",s.columnResizing="columnResizing",s.columnDoneResizing="columnDoneResizing",s.resetResize="resetResize",Jt.pluginName="useGridLayout";var Yt=function(e,t){var n=t.instance;return[e,{style:{display:"grid",gridTemplateColumns:n.visibleColumns.map((function(e){var t;return n.state.gridLayout.columnWidths[e.id]?n.state.gridLayout.columnWidths[e.id]+"px":(null==(t=n.state.columnResizing)?void 0:t.isResizingColumn)?n.state.gridLayout.startWidths[e.id]+"px":"number"==typeof e.width?e.width+"px":e.width})).join(" ")}}]},Kt=function(e,t){var n=t.column;return[e,{id:"header-cell-"+n.id,style:{position:"sticky",gridColumn:"span "+n.totalVisibleHeaderCount}}]},Zt=function(e,t){var n=t.row;return n.isExpanded?[e,{style:{gridColumn:"1 / "+(n.cells.length+1)}}]:[e,{}]};function Qt(e,t,n,r){if(t.type===s.init)return i({gridLayout:{columnWidths:{}}},e);if(t.type===s.resetResize)return i({},e,{gridLayout:{columnWidths:{}}});if(t.type===s.columnStartResizing){var o=t.columnId,a=t.headerIdWidths,l=en(o);if(void 0!==l){var c=r.visibleColumns.reduce((function(e,t){var n;return i({},e,((n={})[t.id]=en(t.id),n))}),{}),u=r.visibleColumns.reduce((function(e,t){var n;return i({},e,((n={})[t.id]=t.minWidth,n))}),{}),d=r.visibleColumns.reduce((function(e,t){var n;return i({},e,((n={})[t.id]=t.maxWidth,n))}),{}),f=a.map((function(e){var t=e[0];return[t,en(t)]}));return i({},e,{gridLayout:i({},e.gridLayout,{startWidths:c,minWidths:u,maxWidths:d,headerIdGridWidths:f,columnWidth:l})})}return e}if(t.type===s.columnResizing){var p=t.clientX,h=e.columnResizing.startX,g=e.gridLayout,m=g.columnWidth,v=g.minWidths,b=g.maxWidths,y=g.headerIdGridWidths,w=(p-h)/m,x={};return(void 0===y?[]:y).forEach((function(e){var t=e[0],n=e[1];x[t]=Math.min(Math.max(v[t],n+n*w),b[t])})),i({},e,{gridLayout:i({},e.gridLayout,{columnWidths:i({},e.gridLayout.columnWidths,{},x)})})}return t.type===s.columnDoneResizing?i({},e,{gridLayout:i({},e.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function en(e){var t,n=null==(t=document.getElementById("header-cell-"+e))?void 0:t.offsetWidth;if(void 0!==n)return n}e._UNSTABLE_usePivotColumns=nt,e.actions=s,e.defaultColumn=u,e.defaultGroupByFn=Ue,e.defaultOrderByFn=Ze,e.defaultRenderer=l,e.emptyRenderer=c,e.ensurePluginOrder=g,e.flexRender=x,e.functionalUpdate=m,e.loopHooks=h,e.makePropGetter=f,e.makeRenderer=w,e.reduceHooks=p,e.safeUseLayoutEffect=b,e.useAbsoluteLayout=Lt,e.useAsyncDebounce=function(e,n){void 0===n&&(n=0);var i=t.useRef({}),o=v(e),a=v(n);return t.useCallback(function(){var e=r(regeneratorRuntime.mark((function e(){var t,n,s,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=l.length,n=new Array(t),s=0;s<t;s++)n[s]=l[s];return i.current.promise||(i.current.promise=new Promise((function(e,t){i.current.resolve=e,i.current.reject=t}))),i.current.timeout&&clearTimeout(i.current.timeout),i.current.timeout=setTimeout(r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete i.current.timeout,e.prev=1,e.t0=i.current,e.next=5,o().apply(void 0,n);case 5:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),i.current.reject(e.t2);case 12:return e.prev=12,delete i.current.promise,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])}))),a()),e.abrupt("return",i.current.promise);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),[o,a])},e.useBlockLayout=Ut,e.useColumnOrder=Rt,e.useExpanded=le,e.useFilters=ke,e.useFlexLayout=Ht,e.useGetLatest=v,e.useGlobalFilter=Re,e.useGridLayout=Jt,e.useGroupBy=$e,e.useMountedLayoutEffect=y,e.usePagination=Qe,e.useResizeColumns=At,e.useRowSelect=gt,e.useRowState=Et,e.useSortBy=Xe,e.useTable=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e=oe(e),r=[V].concat(r);var a=v(t.useRef({}).current);Object.assign(a(),i({},e,{plugins:r,hooks:q()})),r.filter(Boolean).forEach((function(e){e(a().hooks)}));var l=v(a().hooks);a().getHooks=l,delete a().hooks,Object.assign(a(),p(l().useOptions,oe(e)));var c=a(),u=c.data,d=c.columns,g=c.initialState,m=c.defaultColumn,b=c.getSubRows,y=c.getRowId,x=c.stateReducer,C=c.useControlledState,R=v(x),T=t.useCallback((function(e,t){if(!t.type)throw console.info({action:t}),new Error("Unknown Action ");return[].concat(l().stateReducers,Array.isArray(R())?R():[R()]).reduce((function(n,r){return r(n,t,e,a())||n}),e)}),[l,R,a]),D=t.useReducer(T,void 0,(function(){return T(g,{type:s.init})})),P=D[0],A=D[1],N=p([].concat(l().useControlledState,[C]),P,{instance:a()});Object.assign(a(),{state:N,dispatch:A});var F=t.useMemo((function(){return O(p(l().columns,d,{instance:a()}))}),[l,a,d].concat(p(l().columnsDeps,[],{instance:a()})));a().columns=F;var $=t.useMemo((function(){return p(l().allColumns,S(F),{instance:a()}).map(E)}),[F,l,a].concat(p(l().allColumnsDeps,[],{instance:a()})));a().allColumns=$;var I=t.useMemo((function(){for(var e=[],t=[],n={},r=[].concat($);r.length;){var i=r.shift();se({data:u,rows:e,flatRows:t,rowsById:n,column:i,getRowId:y,getSubRows:b,accessValueHooks:l().accessValue,getInstance:a})}return[e,t,n]}),[$,u,y,b,l,a]),_=I[0],L=I[1],M=I[2];Object.assign(a(),{rows:_,initialRows:[].concat(_),flatRows:L,rowsById:M}),h(l().useInstanceAfterData,a());var z=t.useMemo((function(){return p(l().visibleColumns,$,{instance:a()}).map((function(e){return k(e,m)}))}),[l,$,a,m].concat(p(l().visibleColumnsDeps,[],{instance:a()})));$=t.useMemo((function(){var e=[].concat(z);return $.forEach((function(t){e.find((function(e){return e.id===t.id}))||e.push(t)})),e}),[$,z]),a().allColumns=$;var B=t.useMemo((function(){return p(l().headerGroups,j(z,m),a())}),[l,z,m,a].concat(p(l().headerGroupsDeps,[],{instance:a()})));a().headerGroups=B;var U=t.useMemo((function(){return B.length?B[0].headers:[]}),[B]);a().headers=U,a().flatHeaders=B.reduce((function(e,t){return[].concat(e,t.headers)}),[]),h(l().useInstanceBeforeDimensions,a());var H=z.filter((function(e){return e.isVisible})).map((function(e){return e.id})).sort().join("_");z=t.useMemo((function(){return z.filter((function(e){return e.isVisible}))}),[z,H]),a().visibleColumns=z;var W=ae(U),G=W[0],X=W[1],J=W[2];return a().totalColumnsMinWidth=G,a().totalColumnsWidth=X,a().totalColumnsMaxWidth=J,h(l().useInstance,a()),[].concat(a().flatHeaders,a().allColumns).forEach((function(e){e.render=w(a(),e),e.getHeaderProps=f(l().getHeaderProps,{instance:a(),column:e}),e.getFooterProps=f(l().getFooterProps,{instance:a(),column:e})})),a().headerGroups=t.useMemo((function(){return B.filter((function(e,t){return e.headers=e.headers.filter((function(e){return e.headers?function e(t){return t.filter((function(t){return t.headers?e(t.headers):t.isVisible})).length}(e.headers):e.isVisible})),!!e.headers.length&&(e.getHeaderGroupProps=f(l().getHeaderGroupProps,{instance:a(),headerGroup:e,index:t}),e.getFooterGroupProps=f(l().getFooterGroupProps,{instance:a(),headerGroup:e,index:t}),!0)}))}),[B,a,l]),a().footerGroups=[].concat(a().headerGroups).reverse(),a().prepareRow=t.useCallback((function(e){e.getRowProps=f(l().getRowProps,{instance:a(),row:e}),e.allCells=$.map((function(t){var n=e.values[t.id],r={column:t,row:e,value:n};return r.getCellProps=f(l().getCellProps,{instance:a(),cell:r}),r.render=w(a(),t,{row:e,cell:r,value:n}),r})),e.cells=z.map((function(t){return e.allCells.find((function(e){return e.column.id===t.id}))})),h(l().prepareRow,e,{instance:a()})}),[l,a,$,z]),a().getTableProps=f(l().getTableProps,{instance:a()}),a().getTableBodyProps=f(l().getTableBodyProps,{instance:a()}),h(l().useFinalInstance,a()),a()},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(91987))},32309:(e,t,n)=>{e.exports=n(2248)},22503:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n(91987);const i={};function o(e,t){void 0===e&&(e=i),void 0===t&&(t=i);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every((n=>e[n]===t[n]))}var a=n(18660);function s(e,t){Object.keys(t).forEach((n=>{!function(e,t,n){var r;n&&((r=n)&&"[object Function]"==={}.toString.call(r)?n(e.data(t)):e.change(t,a.OU.changeset().remove((()=>!0)).insert(n)))}(e,n,t[n])}))}var l=n(22283),c=n.n(l);function u(e){const t=new Set;return e.forEach((e=>{Object.keys(e).forEach((e=>{t.add(e)}))})),t}const d=()=>{};function f(e,t){const n=Object.keys(t);return n.forEach((n=>{try{e.addSignalListener(n,t[n])}catch(e){console.warn("Cannot add invalid signal listener.",e)}})),n.length>0}var p=n(19280),h=n.n(p);function g(e,t){const n=Object.keys(t);return n.forEach((n=>{try{e.removeSignalListener(n,t[n])}catch(e){console.warn("Cannot remove invalid signal listener.",e)}})),n.length>0}function m(e){const{spec:t,width:n,height:r}=e;return void 0!==n&&void 0!==r?{...t,width:n,height:r}:void 0!==n?{...t,width:n}:void 0!==r?{...t,height:r}:t}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class b extends r.PureComponent{constructor(){super(...arguments),v(this,"containerRef",r.createRef()),v(this,"resultPromise",void 0),v(this,"handleError",(e=>{const{onError:t=d}=this.props;t(e,this.containerRef.current),console.warn(e)})),v(this,"modifyView",(e=>{this.resultPromise&&this.resultPromise.then((t=>(t&&e(t.view),!0))).catch(this.handleError)}))}componentDidMount(){this.createView()}componentDidUpdate(e){const t=u([this.props,e]);if(t.delete("className"),t.delete("signalListeners"),t.delete("spec"),t.delete("style"),t.delete("width"),t.delete("height"),Array.from(t).some((t=>this.props[t]!==e[t])))this.clearView(),this.createView();else{const t=function(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=u([e,t]);return!r.has("width")||"width"in e&&"width"in t&&e.width===t.width||("width"in e&&"number"==typeof e.width?n.width=e.width:n.isExpensive=!0),!r.has("height")||"height"in e&&"height"in t&&e.height===t.height||("height"in e&&"number"==typeof e.height?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some((n=>!(n in e)||!(n in t)||!h()(e[n],t[n])))&&(n.isExpensive=!0),!(!1===n.width&&!1===n.height&&!n.isExpensive)&&n}(m(this.props),m(e)),{signalListeners:n}=this.props,{signalListeners:r}=e;if(t)if(t.isExpensive)this.clearView(),this.createView();else{const e=!o(n,r);this.modifyView((i=>{!1!==t.width&&i.width(t.width),!1!==t.height&&i.height(t.height),e&&(r&&g(i,r),n&&f(i,n)),i.run()}))}else o(n,r)||this.modifyView((e=>{r&&g(e,r),n&&f(e,n),e.run()}))}}componentWillUnmount(){this.clearView()}createView(){const{spec:e,onNewView:t,signalListeners:n={},width:r,height:i,...o}=this.props;if(this.containerRef.current){const e=m(this.props);this.resultPromise=(0,a.ZP)(this.containerRef.current,e,o).then((e=>{if(e){const{view:t}=e;f(t,n)&&t.run()}return e})).catch(this.handleError),t&&this.modifyView(t)}}clearView(){return this.resultPromise&&this.resultPromise.then((e=>{e&&e.finalize()})).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:e,style:t}=this.props;return r.createElement("div",{ref:this.containerRef,className:e,style:t})}}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}v(b,"propTypes",{className:c().string,onError:c().func});class x extends r.PureComponent{constructor(){super(...arguments),w(this,"vegaEmbed",r.createRef()),w(this,"handleNewView",(e=>{this.update();const{onNewView:t=d}=this.props;t(e)}))}componentDidMount(){this.update()}componentDidUpdate(e){o(this.props.data,e.data)||this.update()}update(){const{data:e}=this.props;this.vegaEmbed.current&&e&&Object.keys(e).length>0&&this.vegaEmbed.current.modifyView((t=>{s(t,e),t.resize().run()}))}render(){const{data:e,...t}=this.props;return r.createElement(b,y({ref:this.vegaEmbed},t,{onNewView:this.handleNewView}))}}function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}function S(e){return r.createElement(x,O({},e,{mode:"vega-lite"}))}w(x,"defaultProps",{data:{}})},18660:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>ay,OU:()=>qb});var r={};n.r(r),n.d(r,{JsonPatchError:()=>y,_areEquals:()=>T,applyOperation:()=>E,applyPatch:()=>k,applyReducer:()=>j,deepClone:()=>w,getValueByPointer:()=>S,validate:()=>R,validator:()=>C});var i={};n.r(i),n.d(i,{compare:()=>_,generate:()=>$,observe:()=>F,unobserve:()=>N});var o={};n.r(o),n.d(o,{accessPathDepth:()=>He,accessPathWithDatum:()=>_e,compile:()=>Lg,contains:()=>ve,deepEqual:()=>ce,deleteNestedProperty:()=>$e,duplicate:()=>ue,entries:()=>Pe,every:()=>ye,fieldIntersection:()=>Ce,flatAccessWithDatum:()=>Le,getFirstDefined:()=>We,hasIntersection:()=>ke,hash:()=>ge,internalField:()=>Xe,isBoolean:()=>Ae,isEmpty:()=>Re,isEqual:()=>Se,isInternalField:()=>Je,isNullOrFalse:()=>me,isNumeric:()=>Ke,keys:()=>Te,logicalExpr:()=>Fe,mergeDeep:()=>we,never:()=>de,normalize:()=>Zc,normalizeAngle:()=>Ye,omit:()=>pe,pick:()=>fe,prefixGenerator:()=>je,removePathFromField:()=>Ue,replaceAll:()=>Be,replacePathInField:()=>ze,resetIdCounter:()=>Ve,setEqual:()=>Ee,some:()=>be,stringify:()=>he,titleCase:()=>Ie,unique:()=>Oe,uniqueId:()=>qe,vals:()=>De,varName:()=>Ne,version:()=>Mg});var a={};n.r(a),n.d(a,{dark:()=>Wg,excel:()=>qg,fivethirtyeight:()=>Kg,ggplot2:()=>Qg,googlecharts:()=>wm,latimes:()=>om,powerbi:()=>Nm,quartz:()=>lm,urbaninstitute:()=>mm,version:()=>Fm,vox:()=>um});var s,l=(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},s(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=Object.prototype.hasOwnProperty;function u(e,t){return c.call(e,t)}function d(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)u(e,i)&&r.push(i);return r}function f(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function p(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function h(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function g(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function m(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(m(e[t]))return!0}else if("object"==typeof e)for(var r=d(e),i=r.length,o=0;o<i;o++)if(m(e[r[o]]))return!0;return!1}function v(e,t){var n=[e];for(var r in t){var i="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==i&&n.push(r+": "+i)}return n.join("\n")}var b=function(e){function t(t,n,r,i,o){var a=this.constructor,s=e.call(this,v(t,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=v(t,{name:n,index:r,operation:i,tree:o}),s}return l(t,e),t}(Error),y=b,w=f,x={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=S(n,this.path);r&&(r=f(r));var i=E(n,{op:"remove",path:this.from}).removed;return E(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=S(n,this.from);return E(n,{op:"add",path:this.path,value:f(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:T(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},O={add:function(e,t,n){return p(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:x.move,copy:x.copy,test:x.test,_get:x._get};function S(e,t){if(""==t)return e;var n={op:"_get",path:t};return E(e,n),n.value}function E(e,t,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):C(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=S(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=T(e,t.value),!1===a.test)throw new y("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(n)throw new y("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}r||(e=f(e));var s=(t.path||"").split("/"),l=e,c=1,u=s.length,d=void 0,h=void 0,m=void 0;for(m="function"==typeof n?n:C;;){if((h=s[c])&&-1!=h.indexOf("~")&&(h=g(h)),i&&("__proto__"==h||"prototype"==h&&c>0&&"constructor"==s[c-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===d&&(void 0===l[h]?d=s.slice(0,c).join("/"):c==u-1&&(d=t.path),void 0!==d&&m(t,0,e,d)),c++,Array.isArray(l)){if("-"===h)h=l.length;else{if(n&&!p(h))throw new y("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);p(h)&&(h=~~h)}if(c>=u){if(n&&"add"===t.op&&h>l.length)throw new y("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(a=O[t.op].call(t,l,h,e)).test)throw new y("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(c>=u){if(!1===(a=x[t.op].call(t,l,h,e)).test)throw new y("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(l=l[h],n&&c<u&&(!l||"object"!=typeof l))throw new y("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}function k(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new y("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=f(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=E(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function j(e,t,n){var r=E(e,t);if(!1===r.test)throw new y("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function C(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new y("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!x[e.op])throw new y("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new y("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new y('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new y("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new y("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&m(e.value))throw new y("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new y("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new y("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=R([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new y("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function R(e,t,n){try{if(!Array.isArray(e))throw new y("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)k(f(t),f(e),n||!0);else{n=n||C;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof y)return e;throw e}}function T(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,o=Array.isArray(e),a=Array.isArray(t);if(o&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!T(e[n],t[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(e);if((r=s.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=r;0!=n--;)if(!T(e[i=s[n]],t[i]))return!1;return!0}return e!=e&&t!=t}var D=new WeakMap,P=function(e){this.observers=new Map,this.obj=e},A=function(e,t){this.callback=e,this.observer=t};function N(e,t){t.unobserve()}function F(e,t){var n,r=function(e){return D.get(e)}(e);if(r){var i=function(e,t){return e.observers.get(t)}(r,t);n=i&&i.observer}else r=new P(e),D.set(e,r);if(n)return n;if(n={},r.value=f(e),t){n.callback=t,n.next=null;var o=function(){$(n)},a=function(){clearTimeout(n.next),n.next=setTimeout(o)};"undefined"!=typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return n.patches=[],n.object=e,n.unobserve=function(){$(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(t,new A(t,n)),n}function $(e,t){void 0===t&&(t=!1);var n=D.get(e.object);I(n.value,e.object,e.patches,"",t),e.patches.length&&k(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function I(e,t,n,r,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=d(t),a=d(e),s=!1,l=a.length-1;l>=0;l--){var c=e[g=a[l]];if(!u(t,g)||void 0===t[g]&&void 0!==c&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+h(g),value:f(c)}),n.push({op:"remove",path:r+"/"+h(g)}),s=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),!0);else{var p=t[g];"object"==typeof c&&null!=c&&"object"==typeof p&&null!=p&&Array.isArray(c)===Array.isArray(p)?I(c,p,n,r+"/"+h(g),i):c!==p&&(!0,i&&n.push({op:"test",path:r+"/"+h(g),value:f(c)}),n.push({op:"replace",path:r+"/"+h(g),value:f(p)}))}}if(s||o.length!=a.length)for(l=0;l<o.length;l++){var g;u(e,g=o[l])||void 0===t[g]||n.push({op:"add",path:r+"/"+h(g),value:f(t[g])})}}}function _(e,t,n){void 0===n&&(n=!1);var r=[];return I(e,t,r,"",n),r}Object.assign({},r,i,{JsonPatchError:b,deepClone:f,escapePathComponent:h,unescapePathComponent:g});var L=n(58162),M=n.n(L),z=n(60775);var B={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},U={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},H={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const W=Array.prototype.slice,G=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,W.call(t,1))};var q={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:(e,t,n,r,i,o,a)=>new Date(e,t||0,null!=n?n:1,r||0,i||0,o||0,a||0),date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return G("join",arguments)},indexof:function(){return G("indexOf",arguments)},lastindexof:function(){return G("lastIndexOf",arguments)},slice:function(){return G("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return G("substring",arguments,String)},split:function(){return G("split",arguments,String)},replace:function(){return G("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const V=["view","item","group","xy","x","y"],X={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:"datum"===n?e.datum:"event"===n?e.event:"item"===n?e.item:B[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);return n&&(e.memberDepth-=1),r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),"if"===r?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||q[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>U[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>H[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>"&&"===t.operator?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce(((t,n)=>{e.memberDepth+=1;const r=e(n.key);return e.memberDepth-=1,t[r]=e(n.value),t}),{})};function J(e,t,n,r,i,o){const a=e=>X[e.type](a,e);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=r,a.event=i,a.item=o,V.forEach((e=>a.fn[e]=(...t)=>i.vega[e](...t))),a(e)}var Y={operator(e,t){const n=t.ast,r=e.functions;return e=>J(n,r,e)},parameter(e,t){const n=t.ast,r=e.functions;return(e,t)=>J(n,r,t,e)},event(e,t){const n=t.ast,r=e.functions;return e=>J(n,r,void 0,void 0,e)},handler(e,t){const n=t.ast,r=e.functions;return(e,t)=>{const i=t.item&&t.item.datum;return J(n,r,e,i,t)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o="group"===n||"image"===n||"rect"===n;return(e,t)=>{const a=e.datum;let s,l=0;for(const n in r)s=J(r[n].ast,i,t,a,void 0,e),e[n]!==s&&(e[n]=s,l=1);return"rule"!==n&&function(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}(e,r,o),l}}};var K=n(67574);Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var Z=n(9421),Q=n.n(Z),ee=n(19280),te=n.n(ee),ne=n(82003),re=n.n(ne);function ie(e){return!!e.or}function oe(e){return!!e.and}function ae(e){return!!e.not}function se(e,t){if(ae(e))se(e.not,t);else if(oe(e))for(const n of e.and)se(n,t);else if(ie(e))for(const n of e.or)se(n,t);else t(e)}function le(e,t){return ae(e)?{not:le(e.not,t)}:oe(e)?{and:e.and.map((e=>le(e,t)))}:ie(e)?{or:e.or.map((e=>le(e,t)))}:t(e)}const ce=te(),ue=Q();function de(e){throw new Error(e)}function fe(e,t){const n={};for(const r of t)(0,K.nr)(e,r)&&(n[r]=e[r]);return n}function pe(e,t){const n=Object.assign({},e);for(const e of t)delete n[e];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map((e=>re()(e))).join(",")})`};const he=re();function ge(e){if((0,K.hj)(e))return e;const t=(0,K.HD)(e)?e:re()(e);if(t.length<250)return t;let n=0;for(let e=0;e<t.length;e++){n=(n<<5)-n+t.charCodeAt(e),n&=n}return n}function me(e){return!1===e||null===e}function ve(e,t){return e.includes(t)}function be(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function ye(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function we(e,...t){for(const n of t)xe(e,null!=n?n:{});return e}function xe(e,t){for(const n of Te(t))(0,K.iL)(e,n,t[n],!0)}function Oe(e,t){const n=[],r={};let i;for(const o of e)i=t(o),i in r||(r[i]=1,n.push(o));return n}function Se(e,t){const n=Te(e),r=Te(t);if(n.length!==r.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function Ee(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ke(e,t){for(const n of e)if(t.has(n))return!0;return!1}function je(e){const t=new Set;for(const n of e){const e=(0,K._k)(n).map(((e,t)=>0===t?e:`[${e}]`)),r=e.map(((t,n)=>e.slice(0,n+1).join("")));for(const e of r)t.add(e)}return t}function Ce(e,t){return void 0===e||void 0===t||ke(je(e),je(t))}function Re(e){return 0===Te(e).length}const Te=Object.keys,De=Object.values,Pe=Object.entries;function Ae(e){return!0===e||!1===e}function Ne(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Fe(e,t){return ae(e)?`!(${Fe(e.not,t)})`:oe(e)?`(${e.and.map((e=>Fe(e,t))).join(") && (")})`:ie(e)?`(${e.or.map((e=>Fe(e,t))).join(") || (")})`:t(e)}function $e(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&$e(e[n],t)&&delete e[n],Re(e)}function Ie(e){return e.charAt(0).toUpperCase()+e.substr(1)}function _e(e,t="datum"){const n=(0,K._k)(e),r=[];for(let e=1;e<=n.length;e++){const i=`[${n.slice(0,e).map(K.m8).join("][")}]`;r.push(`${t}${i}`)}return r.join(" && ")}function Le(e,t="datum"){return`${t}[${(0,K.m8)((0,K._k)(e).join("."))}]`}function Me(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function ze(e){return`${(0,K._k)(e).map(Me).join("\\.")}`}function Be(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Ue(e){return`${(0,K._k)(e).join(".")}`}function He(e){return e?(0,K._k)(e).length:0}function We(...e){for(const t of e)if(void 0!==t)return t}let Ge=42;function qe(e){const t=++Ge;return e?String(e)+t:t}function Ve(){Ge=42}function Xe(e){return Je(e)?e:`__${e}`}function Je(e){return e.startsWith("__")}function Ye(e){if(void 0!==e)return(e%360+360)%360}function Ke(e){return!!(0,K.hj)(e)||!isNaN(e)&&!isNaN(parseFloat(e))}var Ze=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Qe="row",et="column",tt="facet",nt="x",rt="y",it="x2",ot="y2",at="xOffset",st="yOffset",lt="radius",ct="radius2",ut="theta",dt="theta2",ft="latitude",pt="longitude",ht="latitude2",gt="longitude2",mt="color",vt="fill",bt="stroke",yt="shape",wt="size",xt="angle",Ot="opacity",St="fillOpacity",Et="strokeOpacity",kt="strokeWidth",jt="strokeDash",Ct="text",Rt="order",Tt="detail",Dt="key",Pt="tooltip",At="href",Nt="url",Ft="description",$t={theta:1,theta2:1,radius:1,radius2:1};function It(e){return e in $t}const _t={longitude:1,longitude2:1,latitude:1,latitude2:1};const Lt=Te(_t),Mt=Object.assign(Object.assign(Object.assign(Object.assign({},{x:1,y:1,x2:1,y2:1}),$t),_t),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function zt(e){return e===mt||e===vt||e===bt}const Bt={row:1,column:1,facet:1},Ut=Te(Bt),Ht=Object.assign(Object.assign({},Mt),Bt),Wt=Te(Ht),{order:Gt,detail:qt,tooltip:Vt}=Ht,Xt=Ze(Ht,["order","detail","tooltip"]),{row:Jt,column:Yt,facet:Kt}=Xt,Zt=Ze(Xt,["row","column","facet"]);Te(Xt),Te(Zt);function Qt(e){return!!Ht[e]}const en=[it,ot,ht,gt,dt,ct];function tn(e){return nn(e)!==e}function nn(e){switch(e){case it:return nt;case ot:return rt;case ht:return ft;case gt:return pt;case dt:return ut;case ct:return lt}return e}function rn(e){if(It(e))switch(e){case ut:return"startAngle";case dt:return"endAngle";case lt:return"outerRadius";case ct:return"innerRadius"}return e}function on(e){switch(e){case nt:return it;case rt:return ot;case ft:return ht;case pt:return gt;case ut:return dt;case lt:return ct}}function an(e){switch(e){case nt:case it:return"width";case rt:case ot:return"height"}}function sn(e){switch(e){case nt:return"xOffset";case rt:return"yOffset"}}function ln(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const cn=Te(Mt),{x:un,y:dn,x2:fn,y2:pn,xOffset:hn,yOffset:gn,latitude:mn,longitude:vn,latitude2:bn,longitude2:yn,theta:wn,theta2:xn,radius:On,radius2:Sn}=Mt,En=Ze(Mt,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),kn=Te(En),jn={x:1,y:1},Cn=Te(jn);function Rn(e){return e in jn}const Tn={theta:1,radius:1},Dn=Te(Tn);function Pn(e){return"width"===e?nt:rt}const An={xOffset:1,yOffset:1};Te(An);function Nn(e){return e in An}const{text:Fn,tooltip:$n,href:In,url:_n,description:Ln,detail:Mn,key:zn,order:Bn}=En,Un=Ze(En,["text","tooltip","href","url","description","detail","key","order"]),Hn=Te(Un);const Wn=Object.assign(Object.assign(Object.assign(Object.assign({},jn),Tn),An),Un),Gn=Te(Wn);function qn(e){return!!Wn[e]}function Vn(e,t){return function(e){switch(e){case mt:case vt:case bt:case Ft:case Tt:case Dt:case Pt:case At:case Rt:case Ot:case St:case Et:case kt:case tt:case Qe:case et:return Xn;case nt:case rt:case at:case st:case ft:case pt:return Yn;case it:case ot:case ht:case gt:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case wt:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case jt:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case yt:return{point:"always",geoshape:"always"};case Ct:return{text:"always"};case xt:return{point:"always",square:"always",text:"always"};case Nt:return{image:"always"};case ut:case lt:return{text:"always",arc:"always"};case dt:case ct:return{arc:"always"}}}(e)[t]}const Xn={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Jn}=Xn,Yn=Ze(Xn,["geoshape"]);function Kn(e){switch(e){case nt:case rt:case ut:case lt:case at:case st:case wt:case xt:case kt:case Ot:case St:case Et:case it:case ot:case dt:case ct:return;case tt:case Qe:case et:case yt:case jt:case Ct:case Pt:case At:case Nt:case Ft:return"discrete";case mt:case vt:case bt:return"flexible";case ft:case pt:case ht:case gt:case Tt:case Dt:case Rt:return}}const Zn={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Qn={count:1,min:1,max:1};function er(e){return!!e&&!!e.argmin}function tr(e){return!!e&&!!e.argmax}function nr(e){return(0,K.HD)(e)&&!!Zn[e]}const rr=new Set(["count","valid","missing","distinct"]);function ir(e){return(0,K.HD)(e)&&rr.has(e)}const or=new Set(["count","sum","distinct","valid","missing"]),ar=new Set(["mean","average","median","q1","q3","min","max"]);function sr(e){return(0,K.jn)(e)&&(e=ms(e,void 0)),"bin"+Te(e).map((t=>dr(e[t])?Ne(`_${t}_${Pe(e[t])}`):Ne(`_${t}_${e[t]}`))).join("")}function lr(e){return!0===e||ur(e)&&!e.binned}function cr(e){return"binned"===e||ur(e)&&!0===e.binned}function ur(e){return(0,K.Kn)(e)}function dr(e){return null==e?void 0:e.param}function fr(e){switch(e){case Qe:case et:case wt:case mt:case vt:case bt:case kt:case Ot:case St:case Et:case yt:return 6;case jt:return 4;default:return 10}}function pr(e){return!!(null==e?void 0:e.expr)}function hr(e){const t=Te(e||{}),n={};for(const r of t)n[r]=jr(e[r]);return n}var gr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function mr(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:a,color:s,subtitleColor:l,subtitleFont:c,subtitleFontSize:u,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:p,subtitlePadding:h}=e,g=gr(e,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),m=Object.assign(Object.assign({},g),s?{fill:s}:{}),v=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),void 0!==o?{angle:o}:{}),void 0!==a?{limit:a}:{}),b=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{subtitleColor:l}:{}),c?{subtitleFont:c}:{}),u?{subtitleFontSize:u}:{}),d?{subtitleFontStyle:d}:{}),f?{subtitleFontWeight:f}:{}),p?{subtitleLineHeight:p}:{}),h?{subtitlePadding:h}:{});return{titleMarkConfig:m,subtitleMarkConfig:fe(e,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties:v,subtitle:b}}function vr(e){return(0,K.HD)(e)||(0,K.kJ)(e)&&(0,K.HD)(e[0])}function br(e){return!!(null==e?void 0:e.signal)}function yr(e){return!!e.step}function wr(e){return!(0,K.kJ)(e)&&("field"in e&&"data"in e)}const xr=Te({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),Or={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Sr=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var Er=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function kr(e){const t=(0,K.kJ)(e.condition)?e.condition.map(Cr):Cr(e.condition);return Object.assign(Object.assign({},jr(e)),{condition:t})}function jr(e){if(pr(e)){const{expr:t}=e,n=Er(e,["expr"]);return Object.assign({signal:t},n)}return e}function Cr(e){if(pr(e)){const{expr:t}=e,n=Er(e,["expr"]);return Object.assign({signal:t},n)}return e}function Rr(e){if(pr(e)){const{expr:t}=e,n=Er(e,["expr"]);return Object.assign({signal:t},n)}return br(e)?e:void 0!==e?{value:e}:void 0}function Tr(e){return br(e)?e.signal:(0,K.m8)(e.value)}function Dr(e){return br(e)?e.signal:null==e?null:(0,K.m8)(e)}function Pr(e){var t;return[].concat(e.type,null!==(t=e.style)&&void 0!==t?t:[])}function Ar(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&void 0!==t[i]?t[i]:void 0!==t[e]?t[e]:!o||i&&i!==e?Nr(e,t,n,r):void 0}function Nr(e,t,n,{vgChannel:r}={}){return We(r?Fr(e,t,n.style):void 0,Fr(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function Fr(e,t,n){return $r(e,Pr(t),n)}function $r(e,t,n){let r;t=(0,K.IX)(t);for(const i of t){const t=n[i];t&&void 0!==t[e]&&(r=t[e])}return r}function Ir(e,t){return(0,K.IX)(e).reduce(((e,n)=>{var r;return e.field.push(ns(n,t)),e.order.push(null!==(r=n.sort)&&void 0!==r?r:"ascending"),e}),{field:[],order:[]})}function _r(e,t){const n=[...e];return t.forEach((e=>{for(const t of n)if(ce(t,e))return;n.push(e)})),n}function Lr(e,t){return ce(e,t)||!t?e:e?[...(0,K.IX)(e),...(0,K.IX)(t)].join(", "):t}function Mr(e,t){const n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((vr(n)||br(n))&&(vr(r)||br(r)))return{explicit:e.explicit,value:Lr(n,r)};if(vr(n)||br(n))return{explicit:e.explicit,value:n};if(vr(r)||br(r))return{explicit:e.explicit,value:r};if(!(vr(n)||br(n)||vr(r)||br(r)))return{explicit:e.explicit,value:_r(n,r)};throw new Error("It should never reach here")}function zr(e){return`Invalid specification ${he(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Br='Autosize "fit" only works for single views and layered views.';function Ur(e){return`${"width"==e?"Width":"Height"} "container" only works for single views and layered views.`}function Hr(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function Wr(e){return e?`Dropping "fit-${e}" because spec has discrete ${an(e)}.`:'Dropping "fit" because spec has discrete size.'}function Gr(e){return`Unknown field for ${e}. Cannot calculate view size.`}function qr(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Vr(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Xr(e){return`Selection not supported for ${e} yet.`}const Jr="The same selection must be used to override scale domains in a layered view.";function Yr(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}function Kr(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}function Zr(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Qr(e){return`${e}Offset dropped because ${e} is continuous`}function ei(e){return`There is no ${e} encoding. Replacing ${e}Offset encoding as ${e}.`}function ti(e){return`Invalid field type "${e}".`}function ni(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function ri(e,t){return`Dropping ${he(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}function ii(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function oi(e){return`${e} encoding has no scale, so specified scale is ignored.`}function ai(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function si(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function li(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function ci(e){return`Using unaggregated domain with raw field has no effect (${he(e)}).`}function ui(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function di(e){return`Unaggregated domain is currently unsupported for log scale (${he(e)}).`}function fi(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function pi(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}const hi="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function gi(e,t){return`Invalid ${e}: ${he(t)}.`}function mi(e){return`1D error band does not support ${e}.`}function vi(e){return`Channel ${e} is required for "binned" bin.`}const bi=(0,K.kg)(K.uU);let yi=bi;function wi(){return yi=bi,yi}function xi(...e){yi.warn(...e)}function Oi(e){if(e&&(0,K.Kn)(e))for(const t of Pi)if(t in e)return!0;return!1}new WeakMap;const Si=["january","february","march","april","may","june","july","august","september","october","november","december"],Ei=Si.map((e=>e.substr(0,3))),ki=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],ji=ki.map((e=>e.substr(0,3)));function Ci(e,t){const n=[];if(t&&void 0!==e.day&&Te(e).length>1&&(xi(function(e){return`Dropping day from datetime ${he(e)} as day cannot be combined with other units.`}(e)),delete(e=ue(e)).day),void 0!==e.year?n.push(e.year):n.push(2012),void 0!==e.month){const r=t?function(e){if(Ke(e)&&(e=+e),(0,K.hj)(e))return e-1;{const t=e.toLowerCase(),n=Si.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=Ei.indexOf(r);if(-1!==i)return i;throw new Error(gi("month",e))}}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){const r=t?function(e){if(Ke(e)&&(e=+e),(0,K.hj)(e))return e>4&&xi(gi("quarter",e)),e-1;throw new Error(gi("quarter",e))}(e.quarter):e.quarter;n.push((0,K.hj)(r)?3*r:`${r}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const r=t?function(e){if(Ke(e)&&(e=+e),(0,K.hj)(e))return e%7;{const t=e.toLowerCase(),n=ki.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=ji.indexOf(r);if(-1!==i)return i;throw new Error(gi("day",e))}}(e.day):e.day;n.push((0,K.hj)(r)?r+1:`${r}+1`)}else n.push(1);for(const t of["hours","minutes","seconds","milliseconds"]){const r=e[t];n.push(void 0===r?0:r)}return n}function Ri(e){const t=Ci(e,!0).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}var Ti=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Di={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Pi=Te(Di);function Ai(e){return e.startsWith("utc")}const Ni={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Fi(e){return Pi.filter((t=>$i(e,t)))}function $i(e,t){const n=e.indexOf(t);return!(n<0)&&(!(n>0&&"seconds"===t&&"i"===e.charAt(n-1))&&(!(e.length>n+3&&"day"===t&&"o"===e.charAt(n+3))&&!(n>0&&"year"===t&&"f"===e.charAt(n-1))))}function Ii(e,t,{end:n}={end:!1}){const r=_e(t),i=Ai(e)?"utc":"";let o;const a={};for(const t of Pi)$i(e,t)&&(a[t]="quarter"===(s=t)?`(${i}quarter(${r})-1)`:`${i}${s}(${r})`,o=t);var s;return n&&(a[o]+="+1"),function(e){const t=Ci(e,!1).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}(a)}function _i(e){if(!e)return;const t=Fi(e);return`timeUnitSpecifier(${he(t)}, ${he(Ni)})`}function Li(e){if(!e)return;let t;return(0,K.HD)(e)?t={unit:e}:(0,K.Kn)(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),Ai(t.unit)&&(t.utc=!0,t.unit=function(e){return e.substr(3)}(t.unit)),t}function Mi(e){return!!(null==e?void 0:e.field)&&void 0!==e.equal}function zi(e){return!!(null==e?void 0:e.field)&&void 0!==e.lt}function Bi(e){return!!(null==e?void 0:e.field)&&void 0!==e.lte}function Ui(e){return!!(null==e?void 0:e.field)&&void 0!==e.gt}function Hi(e){return!!(null==e?void 0:e.field)&&void 0!==e.gte}function Wi(e){if(null==e?void 0:e.field){if((0,K.kJ)(e.range)&&2===e.range.length)return!0;if(br(e.range))return!0}return!1}function Gi(e){return!!(null==e?void 0:e.field)&&((0,K.kJ)(e.oneOf)||(0,K.kJ)(e.in))}function qi(e){return Gi(e)||Mi(e)||Wi(e)||zi(e)||Ui(e)||Bi(e)||Hi(e)}function Vi(e,t){return ys(e,{timeUnit:t,wrapTime:!0})}function Xi(e,t=!0){var n;const{field:r}=e,i=null===(n=Li(e.timeUnit))||void 0===n?void 0:n.unit,o=i?`time(${Ii(i,r)})`:ns(e,{expr:"datum"});if(Mi(e))return`${o}===${Vi(e.equal,i)}`;if(zi(e)){return`${o}<${Vi(e.lt,i)}`}if(Ui(e)){return`${o}>${Vi(e.gt,i)}`}if(Bi(e)){return`${o}<=${Vi(e.lte,i)}`}if(Hi(e)){return`${o}>=${Vi(e.gte,i)}`}if(Gi(e))return`indexof([${function(e,t){return e.map((e=>Vi(e,t)))}(e.oneOf,i).join(",")}], ${o}) !== -1`;if(function(e){return!!(null==e?void 0:e.field)&&void 0!==e.valid}(e))return Ji(o,e.valid);if(Wi(e)){const{range:n}=e,r=br(n)?{signal:`${n.signal}[0]`}:n[0],a=br(n)?{signal:`${n.signal}[1]`}:n[1];if(null!==r&&null!==a&&t)return"inrange("+o+", ["+Vi(r,i)+", "+Vi(a,i)+"])";const s=[];return null!==r&&s.push(`${o} >= ${Vi(r,i)}`),null!==a&&s.push(`${o} <= ${Vi(a,i)}`),s.length>0?s.join(" && "):"true"}throw new Error(`Invalid field predicate: ${he(e)}`)}function Ji(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Yi(e){var t;return qi(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:null===(t=Li(e.timeUnit))||void 0===t?void 0:t.unit}):e}const Ki={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Zi(e){return"quantitative"===e||"temporal"===e}function Qi(e){return"ordinal"===e||"nominal"===e}const eo=Ki.quantitative,to=Ki.ordinal,no=Ki.temporal,ro=Ki.nominal,io=Ki.geojson;Te(Ki);var oo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const ao={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},so={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};Te(so);function lo(e,t){const n=so[e],r=so[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const co={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function uo(e){return co[e]}const fo=new Set(["linear","log","pow","sqrt","symlog"]),po=new Set([...fo,"time","utc"]);function ho(e){return fo.has(e)}const go=new Set(["quantile","quantize","threshold"]),mo=new Set([...po,...go,"sequential","identity"]),vo=new Set(["ordinal","bin-ordinal","point","band"]);new Set(["time","utc"]);function bo(e){return vo.has(e)}function yo(e){return mo.has(e)}function wo(e){return po.has(e)}function xo(e){return go.has(e)}function Oo(e){return null==e?void 0:e.param}const So={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Eo,domain:ko,range:jo,rangeMax:Co,rangeMin:Ro,scheme:To}=(Te(So),So),Do=oo(So,["type","domain","range","rangeMax","rangeMin","scheme"]),Po=Te(Do);function Ao(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return wo(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return wo(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"clamp":return wo(e);case"nice":return wo(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return yo(e)&&!ve(["log","time","utc","threshold","quantile"],e)}}function No(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return zt(e)?void 0:`Cannot use the scale property "${t}" with non-color channel.`;case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const Fo={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},$o=Fo.arc,Io=Fo.area,_o=Fo.bar,Lo=Fo.image,Mo=Fo.line,zo=Fo.point,Bo=Fo.rect,Uo=Fo.rule,Ho=Fo.text,Wo=Fo.tick,Go=Fo.trail,qo=Fo.circle,Vo=Fo.square,Xo=Fo.geoshape;function Jo(e){return["line","area","trail"].includes(e)}function Yo(e){return["rect","bar","image","arc"].includes(e)}const Ko=new Set(Te(Fo));function Zo(e){return e.type}const Qo=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],ea=Te({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),ta=Te({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function na(e){return e&&null!=e.band}const ra={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},ia={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},oa={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function aa(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=da(e);return Ha(n)&&!ir(n.aggregate)&&i&&wo(i.get("type"))?function({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){if(Jo(n.type))return r;const o=Ar("invalid",n,i);if(null===o)return[sa(e,t),r];return r}({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function sa(e,t){const n=la(e,!0),r="y"===nn(t)?{field:{group:"height"}}:{value:0};return Object.assign({test:n},r)}function la(e,t=!0){return Ji((0,K.HD)(e)?e:ns(e,{expr:"datum"}),!t)}function ca(e,t,n,r){const i={};if(t&&(i.scale=t),Ga(e)){const{datum:t}=e;Oi(t)?i.signal=Ri(t):br(t)?i.signal=t.signal:pr(t)?i.signal=t.expr:i.value=t}else i.field=ns(e,n);if(r){const{offset:e,band:t}=r;e&&(i.offset=e),t&&(i.band=t)}return i}function ua({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:o=.5}){const a=0<o&&o<1?"datum":void 0,s=ns(t,{expr:a,suffix:i}),l=void 0!==n?ns(n,{expr:a}):ns(t,{suffix:"end",expr:a}),c={};if(0===o||1===o){c.scale=e;const t=0===o?s:l;c.field=t}else{const t=br(o)?`${o.signal} * ${s} + (1-${o.signal}) * ${l}`:`${o} * ${s} + ${1-o} * ${l}`;c.signal=`scale("${e}", ${t})`}return r&&(c.offset=r),c}function da({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:l,defaultRef:c,bandPosition:u}){var d;if(t){if(Xa(t)){const c=null==a?void 0:a.get("type");if(Ja(t)){null!=u||(u=_a({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:a,timeUnit:d,type:f}=t;if(lr(a)||u&&d&&f===no)return(null==s?void 0:s.impute)?ca(t,o,{binSuffix:"mid"},{offset:l}):u&&!bo(c)?ua({scaleName:o,fieldOrDatumDef:t,bandPosition:u,offset:l}):ca(t,o,xs(t,e)?{binSuffix:"range"}:{},{offset:l});if(cr(a)){if(Ha(n))return ua({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:u,offset:l});xi(vi(e===nt?it:ot))}}return ca(t,o,bo(c)?{binSuffix:"range"}:{},{offset:l,band:"band"===c?null!==(d=null!=u?u:t.bandPosition)&&void 0!==d?d:.5:void 0})}if(Ya(t)){const n=t.value,r=l?{offset:l}:{};return Object.assign(Object.assign({},fa(e,n)),r)}}return(0,K.mf)(c)&&(c=c()),c?Object.assign(Object.assign({},c),l?{offset:l}:{}):c}function fa(e,t){return ve(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:ve(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:Rr(t)}function pa(e){return e&&"number"!==e&&"time"!==e}function ha(e,t,n){return`${e}(${t}${n?`, ${he(n)}`:""})`}const ga="  ";function ma({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var a,s;if(pa(n))return ba({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const l=va(e,r,i),c=Wa(e);if(void 0===t&&void 0===n&&o.customFormatTypes){if("quantitative"===c){if(i&&o.normalizedNumberFormatType)return ba({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return ba({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if("temporal"===c&&o.timeFormatType&&Ha(e)&&void 0===e.timeUnit)return ba({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(bs(e)){const n=function({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:`${o?"utc":"time"}Format(${e}, '${n=(0,K.HD)(n)?n:i}')`:function(e,t,n){if(!e)return;const r=_i(e);return`${n||Ai(e)?"utc":"time"}Format(${t}, ${r})`}(t,e,o)}({field:l,timeUnit:Ha(e)?null===(a=Li(e.timeUnit))||void 0===a?void 0:a.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Ka(e)&&(null===(s=e.scale)||void 0===s?void 0:s.type)===ao.UTC});return n?{signal:n}:void 0}if(t=xa({type:c,specifiedFormat:t,config:o,normalizeStack:i}),Ha(e)&&lr(e.bin)){return{signal:Ea(l,ns(e,{expr:r,binSuffix:"end"}),t,n,o)}}return t||"quantitative"===Wa(e)?{signal:`${Oa(l,t)}`}:{signal:`isValid(${l}) ? ${l} : ""+${l}`}}function va(e,t,n){return Ha(e)?n?`${ns(e,{expr:t,suffix:"end"})}-${ns(e,{expr:t,suffix:"start"})}`:ns(e,{expr:t}):function(e){const{datum:t}=e;return Oi(t)?Ri(t):`${he(t)}`}(e)}function ba({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(null!=a||(a=va(e,r,i)),"datum.value"!==a&&Ha(e)&&lr(e.bin)){return{signal:Ea(a,ns(e,{expr:r,binSuffix:"end"}),t,n,o)}}return{signal:ha(n,a,t)}}function ya(e,t,n,r,i,o){var a;if(!pa(r)){if(void 0===n&&void 0===r&&i.customFormatTypes&&"quantitative"===Wa(e)){if(i.normalizedNumberFormatType&&Za(e)&&"normalize"===e.stack)return;if(i.numberFormatType)return}if(Za(e)&&"normalize"===e.stack&&i.normalizedNumberFormat)return xa({type:"quantitative",config:i,normalizeStack:!0});if(bs(e)){const t=Ha(e)?null===(a=Li(e.timeUnit))||void 0===a?void 0:a.unit:void 0;if(void 0===t&&i.customFormatTypes&&i.timeFormatType)return;return function({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){if(e)return e;if(t)return{signal:_i(t)};return r?void 0:n.timeFormat}({specifiedFormat:n,timeUnit:t,config:i,omitTimeFormatConfig:o})}return xa({type:t,specifiedFormat:n,config:i})}}function wa(e,t,n){var r;return e&&(br(e)||"number"===e||"time"===e)?e:bs(t)&&"time"!==n&&"utc"!==n?Ha(t)&&(null===(r=Li(null==t?void 0:t.timeUnit))||void 0===r?void 0:r.utc)?"utc":"time":void 0}function xa({type:e,specifiedFormat:t,config:n,normalizeStack:r}){return(0,K.HD)(t)?t:e===eo?r?n.normalizedNumberFormat:n.numberFormat:void 0}function Oa(e,t){return`format(${e}, "${t||""}")`}function Sa(e,t,n,r){var i;return pa(n)?ha(n,e,t):Oa(e,null!==(i=(0,K.HD)(t)?t:void 0)&&void 0!==i?i:r.numberFormat)}function Ea(e,t,n,r,i){if(void 0===n&&void 0===r&&i.customFormatTypes&&i.numberFormatType)return Ea(e,t,i.numberFormat,i.numberFormatType,i);const o=Sa(e,n,r,i),a=Sa(t,n,r,i);return`${Ji(e,!1)} ? "null" : ${o} + "${ga}" + ${a}`}const ka="min",ja={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Ca(e){return e in ja}function Ra(e){return!!(null==e?void 0:e.encoding)}function Ta(e){return e&&("count"===e.op||!!e.field)}function Da(e){return e&&(0,K.kJ)(e)}function Pa(e){return"row"in e||"column"in e}function Aa(e){return!!e&&"header"in e}function Na(e){return"facet"in e}var Fa=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function $a(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function Ia(e){return"sort"in e}function _a({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Xa(e)&&void 0!==e.bandPosition)return e.bandPosition;if(Ha(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return Yo(n.type)?0:Nr("timeUnitBandPosition",n,r);if(lr(o))return.5}}function La({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){var s,l,c;const u=an(e),d=Ar(a?"size":u,r,i,{vgChannel:u});if(void 0!==d)return d;if(Ha(t)){const{timeUnit:e,bin:a}=t;if(e&&!n)return{band:Nr("timeUnitBandSize",r,i)};if(lr(a)&&!bo(o))return{band:1}}return Yo(r.type)?o?bo(o)?(null===(s=i[r.type])||void 0===s?void 0:s.discreteBandSize)||{band:1}:null===(l=i[r.type])||void 0===l?void 0:l.continuousBandSize:null===(c=i[r.type])||void 0===c?void 0:c.discreteBandSize:void 0}function Ma(e,t,n,r){return!!(lr(e.bin)||e.timeUnit&&Ja(e)&&"temporal"===e.type)&&void 0!==_a({fieldDef:e,fieldDef2:t,markDef:n,config:r})}function za(e){return e&&"condition"in e}function Ba(e){const t=null==e?void 0:e.condition;return!!t&&!(0,K.kJ)(t)&&Ha(t)}function Ua(e){const t=null==e?void 0:e.condition;return!!t&&!(0,K.kJ)(t)&&Xa(t)}function Ha(e){return e&&(!!e.field||"count"===e.aggregate)}function Wa(e){return null==e?void 0:e.type}function Ga(e){return e&&"datum"in e}function qa(e){return Ja(e)&&!rs(e)||Va(e)}function Va(e){return Ga(e)&&(0,K.hj)(e.datum)}function Xa(e){return Ha(e)||Ga(e)}function Ja(e){return e&&("field"in e||"count"===e.aggregate)&&"type"in e}function Ya(e){return e&&"value"in e&&"value"in e}function Ka(e){return e&&("scale"in e||"sort"in e)}function Za(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function Qa(e){return e&&"legend"in e}function es(e){return e&&("format"in e||"formatType"in e)}function ts(e){return pe(e,["legend","axis","header","scale"])}function ns(e,t={}){var n,r,i;let o=e.field;const a=t.prefix;let s=t.suffix,l="";if(function(e){return"count"===e.aggregate}(e))o=Xe("count");else{let a;if(!t.nofn)if(function(e){return"op"in e}(e))a=e.op;else{const{bin:c,aggregate:u,timeUnit:d}=e;lr(c)?(a=sr(c),s=(null!==(n=t.binSuffix)&&void 0!==n?n:"")+(null!==(r=t.suffix)&&void 0!==r?r:"")):u?tr(u)?(l=`["${o}"]`,o=`argmax_${u.argmax}`):er(u)?(l=`["${o}"]`,o=`argmin_${u.argmin}`):a=String(u):d&&(a=function(e){const t=Li(e),{utc:n}=t,r=Ti(t,["utc"]);return r.unit?(n?"utc":"")+Te(r).map((e=>Ne(`${"unit"===e?"":`_${e}_`}${r[e]}`))).join(""):(n?"utc":"")+"timeunit"+Te(r).map((e=>Ne(`_${e}_${r[e]}`))).join("")}(d),s=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(null!==(i=t.suffix)&&void 0!==i?i:""))}a&&(o=o?`${a}_${o}`:a)}return s&&(o=`${o}_${s}`),a&&(o=`${a}_${o}`),t.forAs?Ue(o):t.expr?Le(o,t.expr)+l:ze(o)+l}function rs(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ha(e)&&!!e.bin;case"temporal":return!1}throw new Error(ti(e.type))}const is=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(tr(t))return`${i} for argmax(${t.argmax})`;if(er(t))return`${i} for argmin(${t.argmin})`;const o=Li(r),a=t||(null==o?void 0:o.unit)||(null==o?void 0:o.maxbins)&&"timeunit"||lr(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}(e);default:return function(e,t){var n;const{field:r,bin:i,timeUnit:o,aggregate:a}=e;if("count"===a)return t.countTitle;if(lr(i))return`${r} (binned)`;if(o){const e=null===(n=Li(o))||void 0===n?void 0:n.unit;if(e)return`${r} (${Fi(e).join("-")})`}else if(a)return tr(a)?`${r} for max ${a.argmax}`:er(a)?`${r} for min ${a.argmin}`:`${Ie(a)} of ${r}`;return r}(e,t)}};let os=is;function as(e){os=e}function ss(e,t,{allowDisabling:n,includeDefault:r=!0}){var i,o;const a=null===(i=ls(e))||void 0===i?void 0:i.title;if(!Ha(e))return null!=a?a:e.title;const s=e,l=r?cs(s,t):void 0;return n?We(a,s.title,l):null!==(o=null!=a?a:s.title)&&void 0!==o?o:l}function ls(e){return Za(e)&&e.axis?e.axis:Qa(e)&&e.legend?e.legend:Aa(e)&&e.header?e.header:void 0}function cs(e,t){return os(e,t)}function us(e){var t;if(es(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}{const n=null!==(t=ls(e))&&void 0!==t?t:{},{format:r,formatType:i}=n;return{format:r,formatType:i}}}function ds(e){return Ha(e)?e:Ba(e)?e.condition:void 0}function fs(e){return Xa(e)?e:Ua(e)?e.condition:void 0}function ps(e,t,n,r={}){if((0,K.HD)(e)||(0,K.hj)(e)||(0,K.jn)(e)){return xi(function(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${he(n)}}.`}(t,(0,K.HD)(e)?"string":(0,K.hj)(e)?"number":"boolean",e)),{value:e}}return Xa(e)?hs(e,t,n,r):Ua(e)?Object.assign(Object.assign({},e),{condition:hs(e.condition,t,n,r)}):e}function hs(e,t,n,r){if(es(e)){const{format:i,formatType:o}=e,a=Fa(e,["format","formatType"]);if(pa(o)&&!n.customFormatTypes)return xi(Zr(t)),hs(a,t,n,r)}else{const i=Za(e)?"axis":Qa(e)?"legend":Aa(e)?"header":null;if(i&&e[i]){const o=e[i],{format:a,formatType:s}=o,l=Fa(o,["format","formatType"]);if(pa(s)&&!n.customFormatTypes)return xi(Zr(t)),hs(Object.assign(Object.assign({},e),{[i]:l}),t,n,r)}}return Ha(e)?gs(e,t,r):function(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=(0,K.hj)(n)?"quantitative":(0,K.HD)(n)?"nominal":Oi(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}(e)}function gs(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:a}=e,s=Object.assign({},e);if(n||!r||nr(r)||tr(r)||er(r)||(xi(function(e){return`Invalid aggregation operator "${e}".`}(r)),delete s.aggregate),i&&(s.timeUnit=Li(i)),a&&(s.field=`${a}`),lr(o)&&(s.bin=ms(o,t)),cr(o)&&!Rn(t)&&xi(function(e){return`Channel ${e} should not be used with "binned" bin.`}(t)),Ja(s)){const{type:e}=s,t=function(e){if(e)switch(e=e.toLowerCase()){case"q":case eo:return"quantitative";case"t":case no:return"temporal";case"o":case to:return"ordinal";case"n":case ro:return"nominal";case io:return"geojson"}}(e);e!==t&&(s.type=t),"quantitative"!==e&&ir(r)&&(xi(function(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}(e,r)),s.type="quantitative")}else if(!tn(t)){const e=function(e,t){var n;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Ia(e)&&(0,K.kJ)(e.sort))return"ordinal";const{aggregate:r,bin:i,timeUnit:o}=e;if(o)return"temporal";if(i||r&&!tr(r)&&!er(r))return"quantitative";if(Ka(e)&&(null===(n=e.scale)||void 0===n?void 0:n.type))switch(so[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(s,t);s.type=e}if(Ja(s)){const{compatible:e,warning:n}=function(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Qe:case et:case tt:return rs(e)?vs:{compatible:!1,warning:ai(t)};case nt:case rt:case at:case st:case mt:case vt:case bt:case Ct:case Tt:case Dt:case Pt:case At:case Nt:case xt:case ut:case lt:case Ft:return vs;case pt:case gt:case ft:case ht:return n!==eo?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:vs;case Ot:case St:case Et:case kt:case wt:case dt:case ct:case it:case ot:return"nominal"!==n||e.sort?vs:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case yt:case jt:return rs(e)||Ka(r=e)&&xo(null===(i=r.scale)||void 0===i?void 0:i.type)?vs:{compatible:!1,warning:si(t)};case Rt:return"nominal"!==e.type||"sort"in e?vs:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}var r,i}(s,t)||{};!1===e&&xi(n)}if(Ia(s)&&(0,K.HD)(s.sort)){const{sort:e}=s;if(Ca(e))return Object.assign(Object.assign({},s),{sort:{encoding:e}});const t=e.substr(1);if("-"===e.charAt(0)&&Ca(t))return Object.assign(Object.assign({},s),{sort:{encoding:t,order:"descending"}})}if(Aa(s)){const{header:e}=s;if(e){const{orient:t}=e,n=Fa(e,["orient"]);if(t)return Object.assign(Object.assign({},s),{header:Object.assign(Object.assign({},n),{labelOrient:e.labelOrient||t,titleOrient:e.titleOrient||t})})}}return s}function ms(e,t){return(0,K.jn)(e)?{maxbins:fr(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:Object.assign(Object.assign({},e),{maxbins:fr(t)})}const vs={compatible:!0};function bs(e){const{formatType:t}=us(e);return"time"===t||!t&&((n=e)&&("temporal"===n.type||Ha(n)&&!!n.timeUnit));var n}function ys(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var o;const a=t&&(null===(o=Li(t))||void 0===o?void 0:o.unit);let s,l=a||"temporal"===n;return pr(e)?s=e.expr:br(e)?s=e.signal:Oi(e)?(l=!0,s=Ri(e)):((0,K.HD)(e)||(0,K.hj)(e))&&l&&(s=`datetime(${he(e)})`,function(e){return!!Di[e]}(a)&&((0,K.hj)(e)&&e<1e4||(0,K.HD)(e)&&isNaN(Date.parse(e)))&&(s=Ri({[a]:e}))),s?r&&l?`time(${s})`:s:i?void 0:he(e)}function ws(e,t){const{type:n}=e;return t.map((t=>{const r=ys(t,{timeUnit:Ha(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:t}))}function xs(e,t){return lr(e.bin)?qn(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Os={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Ss(e){return null==e?void 0:e.condition}const Es=["domain","grid","labels","ticks","title"],ks={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},js={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Cs=Object.assign(Object.assign({},js),{style:1,labelExpr:1,encoding:1});function Rs(e){return!!Cs[e]}Te(Cs);const Ts=Te({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function Ds(e){return"mark"in e}class Ps{constructor(e,t){this.name=e,this.run=t}hasMatchingType(e){return!!Ds(e)&&(Zo(t=e.mark)?t.type:t)===this.name;var t}}var As=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Ns(e,t){const n=e&&e[t];return!!n&&((0,K.kJ)(n)?be(n,(e=>!!e.field)):Ha(n)||Ba(n))}function Fs(e,t){const n=e&&e[t];return!!n&&((0,K.kJ)(n)?be(n,(e=>!!e.field)):Ha(n)||Ga(n)||Ua(n))}function $s(e,t){if(Rn(t)){const n=e[t];if((Ha(n)||Ga(n))&&Qi(n.type)){return Fs(e,sn(t))}}return!1}function Is(e){return be(Wt,(t=>{if(Ns(e,t)){const n=e[t];if((0,K.kJ)(n))return be(n,(e=>!!e.aggregate));{const e=ds(n);return e&&!!e.aggregate}}return!1}))}function _s(e,t){const n=[],r=[],i=[],o=[],a={};return zs(e,((s,l)=>{if(Ha(s)){const{field:c,aggregate:u,bin:d,timeUnit:f}=s,p=As(s,["field","aggregate","bin","timeUnit"]);if(u||f||d){const e=ls(s),h=null==e?void 0:e.title;let g=ns(s,{forAs:!0});const m=Object.assign(Object.assign(Object.assign({},h?[]:{title:ss(s,t,{allowDisabling:!0})}),p),{field:g});if(u){let e;if(tr(u)?(e="argmax",g=ns({op:"argmax",field:u.argmax},{forAs:!0}),m.field=`${g}.${c}`):er(u)?(e="argmin",g=ns({op:"argmin",field:u.argmin},{forAs:!0}),m.field=`${g}.${c}`):"boxplot"!==u&&"errorbar"!==u&&"errorband"!==u&&(e=u),e){const t={op:e,as:g};c&&(t.field=c),o.push(t)}}else if(n.push(g),Ja(s)&&lr(d)){if(r.push({bin:d,field:c,as:g}),n.push(ns(s,{binSuffix:"end"})),xs(s,l)&&n.push(ns(s,{binSuffix:"range"})),Rn(l)){const e={field:`${g}_end`};a[`${l}2`]=e}m.bin="binned",tn(l)||(m.type=eo)}else if(f){i.push({timeUnit:f,field:c,as:g});const e=Ja(s)&&s.type!==no&&"time";e&&(l===Ct||l===Pt?m.formatType=e:!function(e){return!!En[e]}(l)?Rn(l)&&(m.axis=Object.assign({formatType:e},m.axis)):m.legend=Object.assign({formatType:e},m.legend))}a[l]=m}else n.push(c),a[l]=e[l]}else a[l]=e[l]})),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function Ls(e,t,n){const r=Vn(t,n);if(!r)return!1;if("binned"===r){const n=e[t===it?nt:rt];return!!(Ha(n)&&Ha(e[t])&&cr(n.bin))}return!0}function Ms(e,t){const n={};for(const r of Te(e)){const i=ps(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function zs(e,t,n){if(e)for(const r of Te(e)){const i=e[r];if((0,K.kJ)(i))for(const e of i)t.call(n,e,r);else t.call(n,i,r)}}function Bs(e,t){return Te(t).reduce(((n,r)=>{switch(r){case nt:case rt:case At:case Ft:case Nt:case it:case ot:case at:case st:case ut:case dt:case lt:case ct:case ft:case pt:case ht:case gt:case Ct:case yt:case xt:case Pt:return n;case Rt:if("line"===e||"trail"===e)return n;case Tt:case Dt:{const e=t[r];if((0,K.kJ)(e)||Ha(e))for(const t of(0,K.IX)(e))t.aggregate||n.push(ns(t,{}));return n}case wt:if("trail"===e)return n;case mt:case vt:case bt:case Ot:case St:case Et:case jt:case kt:{const e=ds(t[r]);return e&&!e.aggregate&&n.push(ns(e,{})),n}}}),[])}var Us=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Hs(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};return{tooltip:[...e.map((({fieldPrefix:e,titlePrefix:n})=>{const i=r?` of ${Ws(t)}`:"";return{field:e+t.field,type:t.type,title:br(n)?{signal:`${n}"${escape(i)}"`}:n+i}})),...Oe(function(e){const t=[];for(const n of Te(e))if(Ns(e,n)){const r=e[n],i=(0,K.IX)(r);for(const e of i)Ha(e)?t.push(e):Ba(e)&&t.push(e.condition)}return t}(n).map(ts),ge)]}}function Ws(e){const{title:t,field:n}=e;return We(t,n)}function Gs(e,t,n,r,i){const{scale:o,axis:a}=n;return({partName:s,mark:l,positionPrefix:c,endPositionPrefix:u,extraEncoding:d={}})=>{const f=Ws(n);return qs(e,s,i,{mark:l,encoding:Object.assign(Object.assign(Object.assign({[t]:Object.assign(Object.assign(Object.assign({field:`${c}_${n.field}`,type:n.type},void 0!==f?{title:f}:{}),void 0!==o?{scale:o}:{}),void 0!==a?{axis:a}:{})},(0,K.HD)(u)?{[`${t}2`]:{field:`${u}_${n.field}`}}:{}),r),d)})}}function qs(e,t,n,r){const{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||void 0===e[t]&&n[t]?[Object.assign(Object.assign({},r),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),a?{opacity:a}:{}),Zo(r.mark)?r.mark:{type:r.mark}),{style:`${s}-${String(t)}`}),(0,K.jn)(e[t])?{}:e[t])})]:[]}function Vs(e,t,n){const{encoding:r}=e,i="vertical"===t?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:Xs(o,n),continuousAxisChannelDef2:Xs(a,n),continuousAxisChannelDefError:Xs(s,n),continuousAxisChannelDefError2:Xs(l,n),continuousAxis:i}}function Xs(e,t){if(null==e?void 0:e.aggregate){const{aggregate:n}=e,r=Us(e,["aggregate"]);return n!==t&&xi(function(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}(n,t)),r}return e}function Js(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(Zo(n)&&n.orient)return n.orient;if(qa(i)){if(qa(o)){const e=Ha(i)&&i.aggregate,n=Ha(o)&&o.aggregate;if(e||n!==t){if(n||e!==t){if(e===t&&n===t)throw new Error("Both x and y cannot have aggregate");return bs(o)&&!bs(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(qa(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}var Ys=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Ks="boxplot",Zs=new Ps(Ks,el);function Qs(e){return(0,K.hj)(e)?"tukey":e}function el(e,{config:t}){var n,r;e=Object.assign(Object.assign({},e),{encoding:Ms(e.encoding,t)});const{mark:i,encoding:o,params:a,projection:s}=e,l=Ys(e,["mark","encoding","params","projection"]),c=Zo(i)?i:{type:i};a&&xi(Xr("boxplot"));const u=null!==(n=c.extent)&&void 0!==n?n:t.boxplot.extent,d=Ar("size",c,t),f=Qs(u),{bins:p,timeUnits:h,transform:g,continuousAxisChannelDef:m,continuousAxis:v,groupby:b,aggregate:y,encodingWithoutContinuousAxis:w,ticksOrient:x,boxOrient:O,customTooltipWithoutAggregatedField:S}=function(e,t,n){const r=Js(e,Ks),{continuousAxisChannelDef:i,continuousAxis:o}=Vs(e,r,Ks),a=i.field,s=Qs(t),l=[...tl(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:("min-max"===s?"lower_whisker_":"min_")+a},{op:"max",field:a,as:("min-max"===s?"upper_whisker_":"max_")+a}],c="min-max"===s||"tukey"===s?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],u=e.encoding,d=o,f=(u[d],Ys(u,["symbol"==typeof d?d:d+""])),{customTooltipWithoutAggregatedField:p,filteredEncoding:h}=function(e){const{tooltip:t}=e,n=Us(e,["tooltip"]);if(!t)return{filteredEncoding:n};let r,i;if((0,K.kJ)(t)){for(const e of t)e.aggregate?(r||(r=[]),r.push(e)):(i||(i=[]),i.push(e));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return(0,K.kJ)(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}(f),{bins:g,timeUnits:m,aggregate:v,groupby:b,encoding:y}=_s(h,n),w="vertical"===r?"horizontal":"vertical",x=r,O=[...g,...m,{aggregate:[...v,...l],groupby:b},...c];return{bins:g,timeUnits:m,transform:O,groupby:b,aggregate:v,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:y,ticksOrient:w,boxOrient:x,customTooltipWithoutAggregatedField:p}}(e,u,t),{color:E,size:k}=w,j=Ys(w,["color","size"]),C=e=>Gs(c,v,m,e,t.boxplot),R=C(j),T=C(w),D=C(Object.assign(Object.assign({},j),k?{size:k}:{})),P=Hs([{fieldPrefix:"min-max"===f?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===f?"lower_whisker_":"min_",titlePrefix:"Min"}],m,w),A={type:"tick",color:"black",opacity:1,orient:x,invalid:null,aria:!1},N="min-max"===f?P:Hs([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,w),F=[...R({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:N}),...R({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:N}),...R({partName:"ticks",mark:A,positionPrefix:"lower_whisker",extraEncoding:N}),...R({partName:"ticks",mark:A,positionPrefix:"upper_whisker",extraEncoding:N})],$=[..."tukey"!==f?F:[],...T({partName:"box",mark:Object.assign(Object.assign({type:"bar"},d?{size:d}:{}),{orient:O,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:P}),...D({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},(0,K.Kn)(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),d?{size:d}:{}),{orient:x,aria:!1}),positionPrefix:"mid_box",extraEncoding:P})];if("min-max"===f)return Object.assign(Object.assign({},l),{transform:(null!==(r=l.transform)&&void 0!==r?r:[]).concat(g),layer:$});const I=`datum["lower_box_${m.field}"]`,_=`datum["upper_box_${m.field}"]`,L=`(${_} - ${I})`,M=`${I} - ${u} * ${L}`,z=`${_} + ${u} * ${L}`,B=`datum["${m.field}"]`,U={joinaggregate:tl(m.field),groupby:b},H={transform:[{filter:`(${M} <= ${B}) && (${B} <= ${z})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...y],groupby:b}],layer:F},{tooltip:W}=j,G=Ys(j,["tooltip"]),{scale:q,axis:V}=m,X=Ws(m),J=pe(V,["title"]),Y=qs(c,"outliers",t.boxplot,{transform:[{filter:`(${B} < ${M}) || (${B} > ${z})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[v]:Object.assign(Object.assign(Object.assign({field:m.field,type:m.type},void 0!==X?{title:X}:{}),void 0!==q?{scale:q}:{}),Re(J)?{}:{axis:J})},G),E?{color:E}:{}),S?{tooltip:S}:{})})[0];let Z;const Q=[...p,...h,U];return Y?Z={transform:Q,layer:[Y,H]}:(Z=H,Z.transform.unshift(...Q)),Object.assign(Object.assign({},l),{layer:[Z,{transform:g,layer:$}]})}function tl(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}var nl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const rl="errorbar",il=new Ps(rl,ol);function ol(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:Ms(e.encoding,t)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:l,tooltipEncoding:c}=sl(e,rl,t);delete o.size;const u=Gs(s,i,r,o,t.errorbar),d=s.thickness,f=s.size,p=Object.assign(Object.assign({type:"tick",orient:a,aria:!1},void 0!==d?{thickness:d}:{}),void 0!==f?{size:f}:{}),h=[...u({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:c}),...u({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:c}),...u({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},void 0!==d?{size:d}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return Object.assign(Object.assign(Object.assign({},l),{transform:n}),h.length>1?{layer:h}:Object.assign({},h[0]))}function al(e,t){const{encoding:n}=e;if(function(e){return(Xa(e.x)||Xa(e.y))&&!Xa(e.x2)&&!Xa(e.y2)&&!Xa(e.xError)&&!Xa(e.xError2)&&!Xa(e.yError)&&!Xa(e.yError2)}(n))return{orient:Js(e,t),inputType:"raw"};const r=function(e){return Xa(e.x2)||Xa(e.y2)}(n),i=function(e){return Xa(e.xError)||Xa(e.xError2)||Xa(e.yError)||Xa(e.yError2)}(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const e=n.x2,r=n.y2;if(Xa(e)&&Xa(r))throw new Error(`${t} cannot have both x2 and y2`);if(Xa(e)){if(qa(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if(Xa(r)){if(qa(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const e=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(Xa(r)&&!Xa(e))throw new Error(`${t} cannot have xError2 without xError`);if(Xa(s)&&!Xa(i))throw new Error(`${t} cannot have yError2 without yError`);if(Xa(e)&&Xa(i))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Xa(e)){if(qa(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(Xa(i)){if(qa(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function sl(e,t,n){var r;const{mark:i,encoding:o,params:a,projection:s}=e,l=nl(e,["mark","encoding","params","projection"]),c=Zo(i)?i:{type:i};a&&xi(Xr(t));const{orient:u,inputType:d}=al(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:p,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:g,continuousAxis:m}=Vs(e,u,t),{errorBarSpecificAggregate:v,postAggregateCalculates:b,tooltipSummary:y,tooltipTitleWithFieldName:w}=function(e,t,n,r,i,o,a,s){let l=[],c=[];const u=t.field;let d,f=!1;if("raw"===o){const t=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":s.errorbar.center,n=e.extent?e.extent:"mean"===t?"stderr":"iqr";if("median"===t!=("iqr"===n)&&xi(function(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}(t,n,a)),"stderr"===n||"stdev"===n)l=[{op:n,field:u,as:`extent_${u}`},{op:t,field:u,as:`center_${u}`}],c=[{calculate:`datum["center_${u}"] + datum["extent_${u}"]`,as:`upper_${u}`},{calculate:`datum["center_${u}"] - datum["extent_${u}"]`,as:`lower_${u}`}],d=[{fieldPrefix:"center_",titlePrefix:Ie(t)},{fieldPrefix:"upper_",titlePrefix:ll(t,n,"+")},{fieldPrefix:"lower_",titlePrefix:ll(t,n,"-")}],f=!0;else{let e,t,r;"ci"===n?(e="mean",t="ci0",r="ci1"):(e="median",t="q1",r="q3"),l=[{op:t,field:u,as:`lower_${u}`},{op:r,field:u,as:`upper_${u}`},{op:e,field:u,as:`center_${u}`}],d=[{fieldPrefix:"upper_",titlePrefix:ss({field:u,aggregate:r,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:ss({field:u,aggregate:t,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ss({field:u,aggregate:e,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&xi((p=e.center,`${(h=e.extent)?"extent ":""}${h&&p?"and ":""}${p?"center ":""}${h&&p?"are ":"is "}not needed when data are aggregated.`)),"aggregated-upper-lower"===o?(d=[],c=[{calculate:`datum["${n.field}"]`,as:`upper_${u}`},{calculate:`datum["${u}"]`,as:`lower_${u}`}]):"aggregated-error"===o&&(d=[{fieldPrefix:"",titlePrefix:u}],c=[{calculate:`datum["${u}"] + datum["${r.field}"]`,as:`upper_${u}`}],i?c.push({calculate:`datum["${u}"] + datum["${i.field}"]`,as:`lower_${u}`}):c.push({calculate:`datum["${u}"] - datum["${r.field}"]`,as:`lower_${u}`}));for(const e of c)d.push({fieldPrefix:e.as.substring(0,6),titlePrefix:Be(Be(e.calculate,'datum["',""),'"]',"")})}var p,h;return{postAggregateCalculates:c,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}(c,f,p,h,g,d,t,n),x=o,O=m,S=(x[O],"x"===m?"x2":"y2"),E=(x[S],"x"===m?"xError":"yError"),k=(x[E],"x"===m?"xError2":"yError2"),j=(x[k],nl(x,["symbol"==typeof O?O:O+"","symbol"==typeof S?S:S+"","symbol"==typeof E?E:E+"","symbol"==typeof k?k:k+""])),{bins:C,timeUnits:R,aggregate:T,groupby:D,encoding:P}=_s(j,n),A=[...T,...v],N="raw"!==d?[]:D,F=Hs(y,f,P,w);return{transform:[...null!==(r=l.transform)&&void 0!==r?r:[],...C,...R,...0===A.length?[]:[{aggregate:A,groupby:N}],...b],groupby:N,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:"vertical"===u?"horizontal":"vertical",markDef:c,outerSpec:l,tooltipEncoding:F}}function ll(e,t,n){return`${Ie(e)} ${n} ${t}`}const cl="errorband",ul=new Ps(cl,dl);function dl(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:Ms(e.encoding,t)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:l}=sl(e,cl,t),c=a,u=Gs(c,i,r,o,t.errorband),d=void 0!==e.encoding.x&&void 0!==e.encoding.y;let f={type:d?"area":"rect"},p={type:d?"line":"rule"};const h=Object.assign(Object.assign({},c.interpolate?{interpolate:c.interpolate}:{}),c.tension&&c.interpolate?{tension:c.tension}:{});return d?(f=Object.assign(Object.assign(Object.assign({},f),h),{ariaRoleDescription:"errorband"}),p=Object.assign(Object.assign(Object.assign({},p),h),{aria:!1})):c.interpolate?xi(mi("interpolate")):c.tension&&xi(mi("tension")),Object.assign(Object.assign({},s),{transform:n,layer:[...u({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...u({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:l}),...u({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:l})]})}const fl={};function pl(e,t,n){const r=new Ps(e,t);fl[e]={normalizer:r,parts:n}}pl(Ks,el,["box","median","outliers","rule","ticks"]),pl(rl,ol,["ticks","rule"]),pl(cl,dl,["band","borders"]);const hl=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],gl={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},ml={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},vl=Te(gl),bl=Te(ml),yl=Te({header:1,headerRow:1,headerColumn:1,headerFacet:1}),wl=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],xl={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ol=(Te(xl),"_vgsid_"),Sl={point:{on:"click",fields:[Ol],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function El(e){return"legend"===e||!!(null==e?void 0:e.legend)}function kl(e){return El(e)&&(0,K.Kn)(e)}function jl(e){return!!(null==e?void 0:e.select)}var Cl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Rl(e){const t=[];for(const n of e||[]){if(jl(n))continue;const{expr:e,bind:r}=n,i=Cl(n,["expr","bind"]);if(r&&e){const n=Object.assign(Object.assign({},i),{bind:r,init:e});t.push(n)}else{const n=Object.assign(Object.assign(Object.assign({},i),e?{update:e}:{}),r?{bind:r}:{});t.push(n)}}return t}function Tl(e){return"concat"in e}function Dl(e){return"vconcat"in e}function Pl(e){return"hconcat"in e}function Al({step:e,offsetIsDiscrete:t}){var n;return t?null!==(n=e.for)&&void 0!==n?n:"offset":"position"}function Nl(e){return(0,K.Kn)(e)&&void 0!==e.step}function Fl(e){return e.view||e.width||e.height}const $l=Te({align:1,bounds:1,center:1,columns:1,spacing:1});var Il=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function _l(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e["width"===t?"continuousWidth":"continuousHeight"]}function Ll(e,t){const n=Ml(e,t);return Nl(n)?n.step:zl}function Ml(e,t){var n;return We(null!==(n=e[t])&&void 0!==n?n:e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const zl=20;const Bl={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:zl},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:ia,circle:{},geoshape:{},image:{},line:{},point:{},rect:oa,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Sl,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},Ul=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Hl={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Wl={blue:Ul[0],orange:Ul[1],red:Ul[2],teal:Ul[3],green:Ul[4],yellow:Ul[5],purple:Ul[6],pink:Ul[7],brown:Ul[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Gl(e){const t=Te(e||{}),n={};for(const r of t){const t=e[r];n[r]=Ss(t)?kr(t):jr(t)}return n}const ql=[...ta,...Ts,...yl,"background","padding","legend","lineBreak","scale","style","title","view"];function Vl(e={}){const{color:t,font:n,fontSize:r,selection:i}=e,o=Il(e,["color","font","fontSize","selection"]),a=(0,K.fE)({},ue(Bl),n?function(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function(e={}){return{signals:[{name:"color",value:(0,K.Kn)(e)?Object.assign(Object.assign({},Wl),e):Wl}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},r?function(e){return{signals:[{name:"fontSize",value:(0,K.Kn)(e)?Object.assign(Object.assign({},Hl),e):Hl}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(r):{},o||{});i&&(0,z.writeConfig)(a,"selection",i,!0);const s=pe(a,ql);for(const e of["background","lineBreak","padding"])a[e]&&(s[e]=jr(a[e]));for(const e of ta)a[e]&&(s[e]=hr(a[e]));for(const e of Ts)a[e]&&(s[e]=Gl(a[e]));for(const e of yl)a[e]&&(s[e]=hr(a[e]));return a.legend&&(s.legend=hr(a.legend)),a.scale&&(s.scale=hr(a.scale)),a.style&&(s.style=function(e){const t=Te(e),n={};for(const r of t)n[r]=Gl(e[r]);return n}(a.style)),a.title&&(s.title=hr(a.title)),a.view&&(s.view=hr(a.view)),s}const Xl=new Set(["view",...Ko]),Jl=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Yl=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function Kl(e){e=ue(e);for(const t of Jl)delete e[t];if(e.axis)for(const t in e.axis)Ss(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of hl)delete e.legend[t];if(e.mark){for(const t of ea)delete e.mark[t];e.mark.tooltip&&(0,K.Kn)(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Rl(e.params)),delete e.params);for(const t of Xl){for(const n of ea)delete e[t][n];const n=Yl[t];if(n)for(const r of n)delete e[t][r];Zl(e,t)}for(const t of Te(fl))delete e[t];!function(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=mr(e.title);Re(t)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),t));Re(n)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),n));Re(r)?delete e.title:e.title=r}(e);for(const t in e)(0,K.Kn)(e[t])&&Re(e[t])&&delete e[t];return Re(e)?void 0:e}function Zl(e,t,n,r){const i=r?e[t][r]:e[t];"view"===t&&(n="cell");const o=Object.assign(Object.assign({},i),e.style[null!=n?n:t]);Re(o)||(e.style[null!=n?n:t]=o),r||delete e[t]}function Ql(e){return"layer"in e}var ec=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class tc{map(e,t){return Na(e)?this.mapFacet(e,t):function(e){return"repeat"in e}(e)?this.mapRepeat(e,t):Pl(e)?this.mapHConcat(e,t):Dl(e)?this.mapVConcat(e,t):Tl(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}mapLayerOrUnit(e,t){if(Ql(e))return this.mapLayer(e,t);if(Ds(e))return this.mapUnit(e,t);throw new Error(zr(e))}mapLayer(e,t){return Object.assign(Object.assign({},e),{layer:e.layer.map((e=>this.mapLayerOrUnit(e,t)))})}mapHConcat(e,t){return Object.assign(Object.assign({},e),{hconcat:e.hconcat.map((e=>this.map(e,t)))})}mapVConcat(e,t){return Object.assign(Object.assign({},e),{vconcat:e.vconcat.map((e=>this.map(e,t)))})}mapConcat(e,t){const{concat:n}=e,r=ec(e,["concat"]);return Object.assign(Object.assign({},r),{concat:n.map((e=>this.map(e,t)))})}mapFacet(e,t){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}mapRepeat(e,t){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}}const nc={zero:1,center:1,normalize:1};const rc=new Set([$o,_o,Io,Uo,zo,qo,Vo,Mo,Ho,Wo]),ic=new Set([_o,Io,$o]);function oc(e){return Ha(e)&&"quantitative"===Wa(e)&&!e.bin}function ac(e,t){var n,r;const i="x"===t?"y":"radius",o=e[t],a=e[i];if(Ha(o)&&Ha(a))if(oc(o)&&oc(a)){if(o.stack)return t;if(a.stack)return i;const e=Ha(o)&&!!o.aggregate;if(e!==(Ha(a)&&!!a.aggregate))return e?t:i;{const e=null===(n=o.scale)||void 0===n?void 0:n.type,s=null===(r=a.scale)||void 0===r?void 0:r.type;if(e&&"linear"!==e)return i;if(s&&"linear"!==s)return t}}else{if(oc(o))return t;if(oc(a))return i}else{if(oc(o))return t;if(oc(a))return i}}function sc(e,t){var n,r;const i=Zo(e)?e.type:e;if(!rc.has(i))return null;const o=ac(t,"x")||ac(t,"theta");if(!o)return null;const a=t[o],s=Ha(a)?ns(a,{}):void 0,l=function(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(o),c=[],u=new Set;if(t[l]){const e=t[l],n=Ha(e)?ns(e,{}):void 0;n&&n!==s&&(c.push(l),u.add(n));const r="x"===l?"xOffset":"yOffset",i=t[r],o=Ha(i)?ns(i,{}):void 0;o&&o!==s&&(c.push(r),u.add(o))}const d=kn.reduce(((e,n)=>{if("tooltip"!==n&&Ns(t,n)){const r=t[n];for(const t of(0,K.IX)(r)){const r=ds(t);if(r.aggregate)continue;const i=ns(r,{});i&&u.has(i)||e.push({channel:n,fieldDef:r})}}return e}),[]);let f;return void 0!==a.stack?f=(0,K.jn)(a.stack)?a.stack?"zero":null:a.stack:ic.has(i)&&(f="zero"),f&&f in nc?Is(t)&&0===d.length?null:(null===(n=null==a?void 0:a.scale)||void 0===n?void 0:n.type)&&(null===(r=null==a?void 0:a.scale)||void 0===r?void 0:r.type)!==ao.LINEAR?(xi(function(e){return`Cannot stack non-linear scale (${e}).`}(a.scale.type)),null):Xa(t[on(o)])?(void 0!==a.stack&&xi(`Cannot stack "${p=o}" if there is already "${p}2".`),null):(Ha(a)&&a.aggregate&&!or.has(a.aggregate)&&xi(`Stacking is applied even though the aggregate function is non-summative ("${a.aggregate}").`),{groupbyChannels:c,groupbyFields:u,fieldChannel:o,impute:null!==a.impute&&Jo(i),stackBy:d,offset:f}):null;var p}var lc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function cc(e){const{point:t,line:n}=e,r=lc(e,["point","line"]);return Te(r).length>1?r:r.type}function uc(e){for(const t of["line","area","rule","trail"])e[t]&&(e=Object.assign(Object.assign({},e),{[t]:pe(e[t],["point","line"])}));return e}function dc(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?(0,K.Kn)(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?(0,K.Kn)(t.point)?t.point:{}:void 0}function fc(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class pc{constructor(){this.name="path-overlay"}hasMatchingType(e,t){if(Ds(e)){const{mark:n,encoding:r}=e,i=Zo(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!dc(i,t[i.type],r);case"area":return!!dc(i,t[i.type],r)||!!fc(i,t[i.type])}}return!1}run(e,t,n){const{config:r}=t,{params:i,projection:o,mark:a,encoding:s}=e,l=lc(e,["params","projection","mark","encoding"]),c=Ms(s,r),u=Zo(a)?a:{type:a},d=dc(u,r[u.type],c),f="area"===u.type&&fc(u,r[u.type]),p=[Object.assign(Object.assign({},i?{params:i}:{}),{mark:cc(Object.assign(Object.assign({},"area"===u.type&&void 0===u.opacity&&void 0===u.fillOpacity?{opacity:.7}:{}),u)),encoding:pe(c,["shape"])})],h=sc(u,c);let g=c;if(h){const{fieldChannel:e,offset:t}=h;g=Object.assign(Object.assign({},c),{[e]:Object.assign(Object.assign({},c[e]),t?{stack:t}:{})})}return f&&p.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"line"},fe(u,["clip","interpolate","tension","tooltip"])),f),encoding:g})),d&&p.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},fe(u,["clip","tooltip"])),d),encoding:g})),n(Object.assign(Object.assign({},l),{layer:p}),Object.assign(Object.assign({},t),{config:uc(r)}))}}var hc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function gc(e,t){return t?Pa(e)?xc(e,t):bc(e,t):e}function mc(e,t){return t?xc(e,t):e}function vc(e,t,n){const r=t[e];return(i=r)&&!(0,K.HD)(i)&&"repeat"in i?r.repeat in n?Object.assign(Object.assign({},t),{[e]:n[r.repeat]}):void xi(function(e){return`Unknown repeated value "${e}".`}(r.repeat)):t;var i}function bc(e,t){if(void 0!==(e=vc("field",e,t))){if(null===e)return null;if(Ia(e)&&Ta(e.sort)){const n=vc("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function yc(e,t){if(Ha(e))return bc(e,t);{const n=vc("datum",e,t);return n===e||n.type||(n.type="nominal"),n}}function wc(e,t){if(!Xa(e)){if(Ua(e)){const n=yc(e.condition,t);if(n)return Object.assign(Object.assign({},e),{condition:n});{const{condition:t}=e;return hc(e,["condition"])}}return e}{const n=yc(e,t);if(n)return n;if(za(e))return{condition:e.condition}}}function xc(e,t){const n={};for(const r in e)if((0,K.nr)(e,r)){const i=e[r];if((0,K.kJ)(i))n[r]=i.map((e=>wc(e,t))).filter((e=>e));else{const e=wc(i,t);void 0!==e&&(n[r]=e)}}return n}class Oc{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(Ds(e)){const{encoding:t,mark:n}=e;if("line"===n||Zo(n)&&"line"===n.type)for(const e of en){const n=t[nn(e)];if(t[e]&&(Ha(n)&&!cr(n.bin)||Ga(n)))return!0}}return!1}run(e,t,n){const{encoding:r,mark:i}=e;var o,a;return xi((o=!!r.x2,a=!!r.y2,`Line mark is for continuous lines and thus cannot be used with ${o&&a?"x2 and y2":o?"x2":"y2"}. We will use the rule mark (line segments) instead.`)),n(Object.assign(Object.assign({},e),{mark:(0,K.Kn)(i)?Object.assign(Object.assign({},i),{type:"rule"}):"rule"}),t)}}var Sc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Ec({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Te(e),...Te(t)]);for(const o of i){const i=t[o],a=e[o];if(Xa(i)){const e=Object.assign(Object.assign({},a),i);r[o]=e}else Ua(i)?r[o]=Object.assign(Object.assign({},i),{condition:Object.assign(Object.assign({},a),i.condition)}):i||null===i?r[o]=i:(n||Ya(a)||br(a)||Xa(a)||(0,K.kJ)(a))&&(r[o]=a)}}else r=t;return!r||Re(r)?void 0:r}function kc(e){const{parentProjection:t,projection:n}=e;return t&&n&&xi(function(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${he(t)} is overridden by a child projection ${he(n)}.`}({parentProjection:t,projection:n})),null!=n?n:t}function jc(e){return"filter"in e}function Cc(e){return void 0!==(null==e?void 0:e.stop)}function Rc(e){return"lookup"in e}function Tc(e){return"pivot"in e}function Dc(e){return"density"in e}function Pc(e){return"quantile"in e}function Ac(e){return"regression"in e}function Nc(e){return"loess"in e}function Fc(e){return"sample"in e}function $c(e){return"window"in e}function Ic(e){return"joinaggregate"in e}function _c(e){return"flatten"in e}function Lc(e){return"calculate"in e}function Mc(e){return"bin"in e}function zc(e){return"impute"in e}function Bc(e){return"timeUnit"in e}function Uc(e){return"aggregate"in e}function Hc(e){return"stack"in e}function Wc(e){return"fold"in e}var Gc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function qc(e,t){const{transform:n}=e,r=Gc(e,["transform"]);if(n){const e=n.map((e=>{if(jc(e))return{filter:Jc(e,t)};if(Mc(e)&&ur(e.bin))return Object.assign(Object.assign({},e),{bin:Xc(e.bin)});if(Rc(e)){const t=e.from,{selection:n}=t,r=Gc(t,["selection"]);return n?Object.assign(Object.assign({},e),{from:Object.assign({param:n},r)}):e}return e}));return Object.assign(Object.assign({},r),{transform:e})}return e}function Vc(e,t){var n,r;const i=ue(e);if(Ha(i)&&ur(i.bin)&&(i.bin=Xc(i.bin)),Ka(i)&&(null===(r=null===(n=i.scale)||void 0===n?void 0:n.domain)||void 0===r?void 0:r.selection)){const e=i.scale.domain,{selection:t}=e,n=Gc(e,["selection"]);i.scale.domain=Object.assign(Object.assign({},n),t?{param:t}:{})}if(za(i))if((0,z.isArray)(i.condition))i.condition=i.condition.map((e=>{const{selection:n,param:r,test:i}=e,o=Gc(e,["selection","param","test"]);return r?e:Object.assign(Object.assign({},o),{test:Jc(e,t)})}));else{const e=Vc(i.condition,t),{selection:n,param:r,test:o}=e,a=Gc(e,["selection","param","test"]);i.condition=r?i.condition:Object.assign(Object.assign({},a),{test:Jc(i.condition,t)})}return i}function Xc(e){const t=e.extent;if(null==t?void 0:t.selection){const{selection:n}=t,r=Gc(t,["selection"]);return Object.assign(Object.assign({},e),{extent:Object.assign(Object.assign({},r),{param:n})})}return e}function Jc(e,t){const n=e=>le(e,(e=>{var n,r,i;const o={param:e,empty:null===(n=t.emptySelections[e])||void 0===n||n};return null!==(r=(i=t.selectionPredicates)[e])&&void 0!==r||(i[e]=[]),t.selectionPredicates[e].push(o),o}));return e.selection?n(e.selection):le(e.test||e.filter,(e=>e.selection?n(e.selection):e))}class Yc extends tc{map(e,t){var n;const r=null!==(n=t.selections)&&void 0!==n?n:[];if(e.params&&!Ds(e)){const t=[];for(const n of e.params)jl(n)?r.push(n):t.push(n);e.params=t}return t.selections=r,super.map(e,Kc(e,t))}mapUnit(e,t){var n;const r=t.selections;if(!r||!r.length)return e;const i=(null!==(n=t.path)&&void 0!==n?n:[]).concat(e.name),o=[];for(const t of r)if(t.views&&t.views.length)for(const n of t.views)((0,z.isString)(n)&&(n===e.name||i.indexOf(n)>=0)||(0,z.isArray)(n)&&n.map((e=>i.indexOf(e))).every(((e,t,n)=>-1!==e&&(0===t||e>n[t-1]))))&&o.push(t);else o.push(t);return o.length&&(e.params=o),e}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Yc.prototype[e];Yc.prototype[e]=function(e,n){return t.call(this,e,Kc(e,n))}}function Kc(e,t){var n;return e.name?Object.assign(Object.assign({},t),{path:(null!==(n=t.path)&&void 0!==n?n:[]).concat(e.name)}):t}function Zc(e,t){void 0===t&&(t=Vl(e.config));const n=function(e,t={}){const n={config:t};return tu.map(Qc.map(eu.map(e,n),n),n)}(e,t),{width:r,height:i}=e,o=function(e,t,n){let{width:r,height:i}=t;const o=Ds(e)||Ql(e),a={};o?"container"==r&&"container"==i?(a.type="fit",a.contains="padding"):"container"==r?(a.type="fit-x",a.contains="padding"):"container"==i&&(a.type="fit-y",a.contains="padding"):("container"==r&&(xi(Ur("width")),r=void 0),"container"==i&&(xi(Ur("height")),i=void 0));const s=Object.assign(Object.assign(Object.assign({type:"pad"},a),n?nu(n.autosize):{}),nu(e.autosize));"fit"!==s.type||o||(xi(Br),s.type="pad");"container"==r&&"fit"!=s.type&&"fit-x"!=s.type&&xi(Hr("width"));"container"==i&&"fit"!=s.type&&"fit-y"!=s.type&&xi(Hr("height"));if(ce(s,{type:"pad"}))return;return s}(n,{width:r,height:i,autosize:e.autosize},t);return Object.assign(Object.assign({},n),o?{autosize:o}:{})}const Qc=new class extends tc{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Zs,il,ul,new pc,new Oc]}map(e,t){if(Ds(e)){const n=Ns(e.encoding,Qe),r=Ns(e.encoding,et),i=Ns(e.encoding,tt);if(n||r||i)return this.mapFacetedUnit(e,t)}return super.map(e,t)}mapUnit(e,t){const{parentEncoding:n,parentProjection:r}=t,i=mc(e.encoding,t.repeater),o=Object.assign(Object.assign({},e),i?{encoding:i}:{});if(n||r)return this.mapUnitWithParentEncodingOrProjection(o,t);const a=this.mapLayerOrUnit.bind(this);for(const e of this.nonFacetUnitNormalizers)if(e.hasMatchingType(o,t.config))return e.run(o,t,a);return o}mapRepeat(e,t){return function(e){return!(0,K.kJ)(e.repeat)&&e.repeat.layer}(e)?this.mapLayerRepeat(e,t):this.mapNonLayerRepeat(e,t)}mapLayerRepeat(e,t){const{repeat:n,spec:r}=e,i=Sc(e,["repeat","spec"]),{row:o,column:a,layer:s}=n,{repeater:l={},repeaterPrefix:c=""}=t;return o||a?this.mapRepeat(Object.assign(Object.assign({},e),{repeat:Object.assign(Object.assign({},o?{row:o}:{}),a?{column:a}:{}),spec:{repeat:{layer:s},spec:r}}),t):Object.assign(Object.assign({},i),{layer:s.map((e=>{const n=Object.assign(Object.assign({},l),{layer:e}),i=`${(r.name||"")+c}child__layer_${Ne(e)}`,o=this.mapLayerOrUnit(r,Object.assign(Object.assign({},t),{repeater:n,repeaterPrefix:i}));return o.name=i,o}))})}mapNonLayerRepeat(e,t){var n;const{repeat:r,spec:i,data:o}=e,a=Sc(e,["repeat","spec","data"]);!(0,K.kJ)(r)&&e.columns&&(e=pe(e,["columns"]),xi(Yr("repeat")));const s=[],{repeater:l={},repeaterPrefix:c=""}=t,u=!(0,K.kJ)(r)&&r.row||[l?l.row:null],d=!(0,K.kJ)(r)&&r.column||[l?l.column:null],f=(0,K.kJ)(r)&&r||[l?l.repeat:null];for(const e of f)for(const n of u)for(const o of d){const a={repeat:e,row:n,column:o,layer:l.layer},u=(i.name||"")+c+"child__"+((0,K.kJ)(r)?`${Ne(e)}`:(r.row?`row_${Ne(n)}`:"")+(r.column?`column_${Ne(o)}`:"")),d=this.map(i,Object.assign(Object.assign({},t),{repeater:a,repeaterPrefix:u}));d.name=u,s.push(pe(d,["data"]))}const p=(0,K.kJ)(r)?e.columns:r.column?r.column.length:1;return Object.assign(Object.assign({data:null!==(n=i.data)&&void 0!==n?n:o,align:"all"},a),{columns:p,concat:s})}mapFacet(e,t){const{facet:n}=e;return Pa(n)&&e.columns&&(e=pe(e,["columns"]),xi(Yr("facet"))),super.mapFacet(e,t)}mapUnitWithParentEncodingOrProjection(e,t){const{encoding:n,projection:r}=e,{parentEncoding:i,parentProjection:o,config:a}=t,s=kc({parentProjection:o,projection:r}),l=Ec({parentEncoding:i,encoding:mc(n,t.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},e),s?{projection:s}:{}),l?{encoding:l}:{}),{config:a})}mapFacetedUnit(e,t){const n=e.encoding,{row:r,column:i,facet:o}=n,a=Sc(n,["row","column","facet"]),{mark:s,width:l,projection:c,height:u,view:d,params:f,encoding:p}=e,h=Sc(e,["mark","width","projection","height","view","params","encoding"]),{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},t),v=mc(a,t.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},h),m),{facet:g,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{width:l}:{}),u?{height:u}:{}),d?{view:d}:{}),c?{projection:c}:{}),{mark:s,encoding:v}),f?{params:f}:{})}),t)}getFacetMappingAndLayout(e,t){var n;const{row:r,column:i,facet:o}=e;if(r||i){o&&xi(`Facet encoding dropped as ${(a=[...r?[Qe]:[],...i?[et]:[]]).join(" and ")} ${a.length>1?"are":"is"} also specified.`);const t={},s={};for(const r of[Qe,et]){const i=e[r];if(i){const{align:e,center:o,spacing:a,columns:l}=i,c=Sc(i,["align","center","spacing","columns"]);t[r]=c;for(const e of["align","center","spacing"])void 0!==i[e]&&(null!==(n=s[e])&&void 0!==n||(s[e]={}),s[e][r]=i[e])}}return{facetMapping:t,layout:s}}{const{align:e,center:n,spacing:r,columns:i}=o;return{facetMapping:gc(Sc(o,["align","center","spacing","columns"]),t.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},e?{align:e}:{}),n?{center:n}:{}),r?{spacing:r}:{}),i?{columns:i}:{})}}var a}mapLayer(e,t){var{parentEncoding:n,parentProjection:r}=t,i=Sc(t,["parentEncoding","parentProjection"]);const{encoding:o,projection:a}=e,s=Sc(e,["encoding","projection"]),l=Object.assign(Object.assign({},i),{parentEncoding:Ec({parentEncoding:n,encoding:o,layer:!0}),parentProjection:kc({parentProjection:r,projection:a})});return super.mapLayer(s,l)}},eu=new class extends tc{map(e,t){var n,r;return null!==(n=t.emptySelections)&&void 0!==n||(t.emptySelections={}),null!==(r=t.selectionPredicates)&&void 0!==r||(t.selectionPredicates={}),e=qc(e,t),super.map(e,t)}mapLayerOrUnit(e,t){if((e=qc(e,t)).encoding){const n={};for(const[r,i]of Pe(e.encoding))n[r]=Vc(i,t);e=Object.assign(Object.assign({},e),{encoding:n})}return super.mapLayerOrUnit(e,t)}mapUnit(e,t){const n=e,{selection:r}=n,i=Gc(n,["selection"]);return r?Object.assign(Object.assign({},i),{params:Pe(r).map((([e,n])=>{var r;const i=n,{init:o,bind:a,empty:s}=i,l=Gc(i,["init","bind","empty"]);"single"===l.type?(l.type="point",l.toggle=!1):"multi"===l.type&&(l.type="point"),t.emptySelections[e]="none"!==s;for(const n of De(null!==(r=t.selectionPredicates[e])&&void 0!==r?r:{}))n.empty="none"!==s;return{name:e,value:o,select:l,bind:a}}))}):e}},tu=new Yc;function nu(e){return(0,K.HD)(e)?{type:e}:null!=e?e:{}}const ru=["background","padding"];function iu(e,t){const n={};for(const t of ru)e&&void 0!==e[t]&&(n[t]=jr(e[t]));return t&&(n.params=e.params),n}class ou{constructor(e={},t={}){this.explicit=e,this.implicit=t}clone(){return new ou(ue(this.explicit),ue(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(e){return We(this.explicit[e],this.implicit[e])}getWithExplicit(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:t,explicit:n}){void 0!==t&&this.set(e,t,n)}set(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}copyKeyFromSplit(e,{explicit:t,implicit:n}){void 0!==t[e]?this.set(e,t[e],!0):void 0!==n[e]&&this.set(e,n[e],!1)}copyKeyFromObject(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}copyAll(e){for(const t of Te(e.combine())){const n=e.getWithExplicit(t);this.setWithExplicit(t,n)}}}function au(e){return{explicit:!0,value:e}}function su(e){return{explicit:!1,value:e}}function lu(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:cu(t,n,r,i)}}function cu(e,t,n,r){return e.explicit&&t.explicit&&xi(function(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${he(n)} and ${he(r)}). Using ${he(n)}.`}(n,r,e.value,t.value)),e}function uu(e,t,n,r,i=cu){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ce(e.value,t.value)?e:i(e,t,n,r)}class du extends ou{constructor(e={},t={},n=!1){super(e,t),this.explicit=e,this.implicit=t,this.parseNothing=n}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function fu(e){return"url"in e}function pu(e){return"values"in e}function hu(e){return"name"in e&&!fu(e)&&!pu(e)&&!gu(e)}function gu(e){return e&&(mu(e)||vu(e)||bu(e))}function mu(e){return"sequence"in e}function vu(e){return"sphere"in e}function bu(e){return"graticule"in e}var yu;!function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"}(yu||(yu={}));var wu=n(46417),xu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Ou(e,t=!0,n=K.yR){if((0,K.kJ)(e)){const r=e.map((e=>Ou(e,t,n)));return t?`[${r.join(", ")}]`:r}return Oi(e)?n(t?Ri(e):function(e){const t=Ci(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(he(e)):e}function Su(e,t){var n;for(const r of De(null!==(n=e.component.selection)&&void 0!==n?n:{})){const n=r.name;let i=`${n}${Ld}, ${"global"===r.resolve?"true":`{unit: ${Ud(e)}}`}`;for(const n of Bd)n.defined(r)&&(n.signals&&(t=n.signals(e,r,t)),n.modifyExpr&&(i=n.modifyExpr(e,r,i)));t.push({name:n+Md,on:[{events:{signal:r.name+Ld},update:`modify(${(0,K.m8)(r.name+_d)}, ${i})`}]})}return ku(t)}function Eu(e,t){var n;for(const r of De(null!==(n=e.component.selection)&&void 0!==n?n:{}))for(const n of Bd)n.defined(r)&&n.marks&&(t=n.marks(e,r,t));return t}function ku(e){return e.map((e=>(e.on&&!e.on.length&&delete e.on,e)))}class ju{constructor(e,t){this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,t){this._children.includes(e)?xi("Attempt to add the same child twice."):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}removeChild(e){const t=this._children.indexOf(e);return this._children.splice(t,1),t}remove(){let e=this._parent.removeChild(this);for(const t of this._children)t._parent=this._parent,this._parent.addChild(t,e++)}insertAsParentOf(e){const t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}swapWithParent(){const e=this._parent,t=e.parent;for(const t of this._children)t.parent=e;this._children=[],e.removeChild(this);const n=e.parent.removeChild(e);this._parent=t,t.addChild(this,n),e.parent=this}}class Cu extends ju{constructor(e,t,n,r){super(e,t),this.type=n,this.refCounts=r,this._source=this._name=t,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${qe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}var Ru=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Tu extends ju{constructor(e,t){super(e),this.formula=t}clone(){return new Tu(null,ue(this.formula))}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,t)=>{const{field:n,timeUnit:r}=t;if(r){const i=ns(t,{forAs:!0});e[ge({as:i,field:n,timeUnit:r})]={as:i,field:n,timeUnit:r}}return e}),{});return Re(n)?null:new Tu(e,n)}static makeFromTransform(e,t){const n=Object.assign({},t),{timeUnit:r}=n,i=Ru(n,["timeUnit"]),o=Li(r),a=Object.assign(Object.assign({},i),{timeUnit:o});return new Tu(e,{[ge(a)]:a})}merge(e){this.formula=Object.assign({},this.formula);for(const t in e.formula)this.formula[t]||(this.formula[t]=e.formula[t]);for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}removeFormulas(e){const t={};for(const[n,r]of Pe(this.formula))e.has(r.as)||(t[n]=r);this.formula=t}producedFields(){return new Set(De(this.formula).map((e=>e.as)))}dependentFields(){return new Set(De(this.formula).map((e=>e.field)))}hash(){return`TimeUnit ${ge(this.formula)}`}assemble(){const e=[];for(const t of De(this.formula)){const{field:n,as:r,timeUnit:i}=t,o=Li(i),{unit:a,utc:s}=o,l=Ru(o,["unit","utc"]);e.push(Object.assign(Object.assign(Object.assign(Object.assign({field:ze(n),type:"timeunit"},a?{units:Fi(a)}:{}),s?{timezone:"utc"}:{}),l),{as:[r,`${r}_end`]}))}return e}}var Du=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Pu="_tuple_fields";class Au{constructor(...e){this.items=e,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Nu={defined:()=>!0,parse:(e,t,n)=>{var r;const i=t.name,o=null!==(r=t.project)&&void 0!==r?r:t.project=new Au,a={},s={},l=new Set,c=(e,t)=>{const n="visual"===t?e.channel:e.field;let r=Ne(`${i}_${n}`);for(let e=1;l.has(r);e++)r=Ne(`${i}_${n}_${e}`);return l.add(r),{[t]:r}},u=t.type,d=e.config.selection[u],f=void 0!==n.value?(0,K.IX)(n.value):null;let{fields:p,encodings:h}=(0,K.Kn)(n.select)?n.select:{};if(!p&&!h&&f)for(const e of f)if((0,K.Kn)(e))for(const t of Te(e))Zt[t]?(h||(h=[])).push(t):"interval"===u?(xi('Interval selections should be initialized using "x" and/or "y" keys.'),h=d.encodings):(p||(p=[])).push(t);p||h||(h=d.encodings,"fields"in d&&(p=d.fields));for(const t of null!=h?h:[]){const n=e.fieldDef(t);if(n){let r=n.field;if(n.aggregate){xi(Vr(t,n.aggregate));continue}if(!r){xi(qr(t));continue}if(n.timeUnit){r=e.vgField(t);const i={timeUnit:n.timeUnit,as:r,field:n.field};s[ge(i)]=i}if(!a[r]){let i="E";if("interval"===u){yo(e.getScaleComponent(t).get("type"))&&(i="R")}else n.bin&&(i="R-RE");const s={field:r,channel:t,type:i};s.signals=Object.assign(Object.assign({},c(s,"data")),c(s,"visual")),o.items.push(a[r]=s),o.hasField[r]=o.hasChannel[t]=a[r],o.hasSelectionId=o.hasSelectionId||r===Ol}}else xi(qr(t))}for(const e of null!=p?p:[]){if(o.hasField[e])continue;const t={type:"E",field:e};t.signals=Object.assign({},c(t,"data")),o.items.push(t),o.hasField[e]=t,o.hasSelectionId=o.hasSelectionId||e===Ol}f&&(t.init=f.map((e=>o.items.map((t=>(0,K.Kn)(e)?void 0!==e[t.channel]?e[t.channel]:e[t.field]:e))))),Re(s)||(o.timeUnit=new Tu(null,s))},signals:(e,t,n)=>{const r=t.name+Pu;return n.filter((e=>e.name===r)).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map((e=>{const{signals:t,hasLegend:n}=e,r=Du(e,["signals","hasLegend"]);return r.field=ze(r.field),r}))})}},Fu=Nu,$u={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!qn(i))continue;const o=e.getScaleComponent(i),a=o?o.get("type"):void 0;o&&yo(a)?(o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)):xi("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter((e=>0===n.filter((t=>t.name===e.signals.data)).length));if(!e.parent||Lu(e)||0===r.length)return n;const i=n.filter((e=>e.name===t.name))[0];let o=i.update;if(o.indexOf(zd)>=0)i.update=`{${r.map((e=>`${(0,K.m8)(ze(e.field))}: ${e.signals.data}`)).join(", ")}}`;else{for(const e of r){const t=`${(0,K.m8)(ze(e.field))}: ${e.signals.data}`;o.includes(t)||(o=`${o.substring(0,o.length-1)}, ${t}}`)}i.update=o}return n.concat(r.map((e=>({name:e.signals.data}))))},signals:(e,t,n)=>{if(e.parent&&!Lu(e))for(const e of t.scales){const t=n.filter((t=>t.name===e.signals.data))[0];t.push="outer",delete t.value,delete t.update}return n}},Iu=$u;function _u(e,t){return`domain(${(0,K.m8)(e.scaleName(t))})`}function Lu(e){var t;return e.parent&&Ih(e.parent)&&(null!==(t=!e.parent.parent)&&void 0!==t?t:Lu(e.parent.parent))}var Mu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const zu="_brush",Bu="_scale_trigger",Uu={defined:e=>"interval"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+Pu,o=Iu.defined(t),a=t.init?t.init[0]:null,s=[],l=[];if(t.translate&&!o){const e=`!event.item || event.item.mark.name !== ${(0,K.m8)(r+zu)}`;Wu(t,((t,n)=>{var r,i;const o=(0,K.IX)(null!==(r=(i=n.between[0]).filter)&&void 0!==r?r:i.filter=[]);return o.includes(e)||o.push(e),t}))}t.project.items.forEach(((r,i)=>{const o=r.channel;if(o!==nt&&o!==rt)return void xi("Interval selections only support x and y encoding channels.");const c=a?a[i]:null,u=function(e,t,n,r){const i=n.channel,o=n.signals.visual,a=n.signals.data,s=Iu.defined(t),l=(0,K.m8)(e.scaleName(i)),c=e.getScaleComponent(i),u=c?c.get("type"):void 0,d=e=>`scale(${l}, ${e})`,f=e.getSizeSignalRef(i===nt?"width":"height").signal,p=`${i}(unit)`,h=Wu(t,((e,t)=>[...e,{events:t.between[0],update:`[${p}, ${p}]`},{events:t,update:`[${o}[0], clamp(${p}, 0, ${f})]`}]));return h.push({events:{signal:t.name+Bu},update:yo(u)?`[${d(`${a}[0]`)}, ${d(`${a}[1]`)}]`:"[0, 0]"}),s?[{name:a,on:[]}]:[Object.assign(Object.assign({name:o},r?{init:Ou(r,!0,d)}:{value:[]}),{on:h}),Object.assign(Object.assign({name:a},r?{init:Ou(r)}:{}),{on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${l}, ${o})`}]})]}(e,t,r,c),d=r.signals.data,f=r.signals.visual,p=(0,K.m8)(e.scaleName(o)),h=yo(e.getScaleComponent(o).get("type"))?"+":"";n.push(...u),s.push(d),l.push({scaleName:e.scaleName(o),expr:`(!isArray(${d}) || (${h}invert(${p}, ${f})[0] === ${h}${d}[0] && ${h}invert(${p}, ${f})[1] === ${h}${d}[1]))`})})),!o&&l.length&&n.push({name:r+Bu,value:{},on:[{events:l.map((e=>({scale:e.scaleName}))),update:`${l.map((e=>e.expr)).join(" && ")} ? ${r+Bu} : {}`}]});const c=`unit: ${Ud(e)}, fields: ${i}, values`;return n.concat(Object.assign(Object.assign({name:r+Ld},a?{init:`{${c}: ${Ou(a)}}`}:{}),s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${c}: [${s}]} : null`}]}:{}))},marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,a=null==i?void 0:i.signals.visual,s=null==o?void 0:o.signals.visual,l=`data(${(0,K.m8)(t.name+_d)})`;if(Iu.defined(t)||!i&&!o)return n;const c={x:void 0!==i?{signal:`${a}[0]`}:{value:0},y:void 0!==o?{signal:`${s}[0]`}:{value:0},x2:void 0!==i?{signal:`${a}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${s}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const t of Te(c))c[t]=[Object.assign({test:`${l}.length && ${l}[0].unit === ${Ud(e)}`},c[t]),{value:0}];const u=t.mark,{fill:d,fillOpacity:f,cursor:p}=u,h=Mu(u,["fill","fillOpacity","cursor"]),g=Te(h).reduce(((e,t)=>(e[t]=[{test:[void 0!==i&&`${a}[0] !== ${a}[1]`,void 0!==o&&`${s}[0] !== ${s}[1]`].filter((e=>e)).join(" && "),value:h[t]},{value:null}],e)),{});return[{name:`${r+zu}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:f}},update:c}},...n,{name:r+zu,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},p?{cursor:{value:p}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},c),g)}}]}},Hu=Uu;function Wu(e,t){return e.events.reduce(((e,n)=>n.between?t(e,n):(xi(`${n} is not an ordered event stream for interval selections.`),e)),[])}const Gu={defined:e=>"point"===e.type,signals:(e,t,n)=>{var r;const i=t.name,o=i+Pu,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",l=De(null!==(r=e.component.selection)&&void 0!==r?r:{}).reduce(((e,t)=>"interval"===t.type?e.concat(t.name+zu):e),[]).map((e=>`indexof(item().mark.name, '${e}') < 0`)).join(" && "),c="datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0"+(l?` && ${l}`:"");let u=`unit: ${Ud(e)}, `;if(t.project.hasSelectionId)u+=`${Ol}: ${s}[${(0,K.m8)(Ol)}]`;else{u+=`fields: ${o}, values: [${a.items.map((t=>{const n=e.fieldDef(t.channel);return(null==n?void 0:n.bin)?`[${s}[${(0,K.m8)(e.vgField(t.channel,{}))}], ${s}[${(0,K.m8)(e.vgField(t.channel,{binSuffix:"end"}))}]]`:`${s}[${(0,K.m8)(t.field)}]`})).join(", ")}]`}const d=t.events;return n.concat([{name:i+Ld,on:d?[{events:d,update:`${c} ? {${u}} : null`,force:!0}]:[]}])}},qu=Gu;function Vu(e,t,n,r){const i=za(t)&&t.condition,o=r(t);if(i){return{[n]:[...(0,K.IX)(i).map((t=>{const n=r(t);if(function(e){return e.param}(t)){const{param:r,empty:i}=t,o=Yd(e,{param:r,empty:i});return Object.assign({test:o},n)}{const r=Zd(e,t.test);return Object.assign({test:r},n)}})),...void 0!==o?[o]:[]]}}return void 0!==o?{[n]:o}:{}}function Xu(e,t="text"){const n=e.encoding[t];return Vu(e,n,t,(t=>Ju(t,e.config)))}function Ju(e,t,n="datum"){if(e){if(Ya(e))return Rr(e.value);if(Xa(e)){const{format:r,formatType:i}=us(e);return ma({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Yu(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if((0,K.kJ)(a))return{tooltip:Zu({tooltip:a},o,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Vu(e,a,"tooltip",(e=>{const a=Ju(e,i,s);if(a)return a;if(null===e)return;let l=Ar("tooltip",r,i);return!0===l&&(l={content:"encoding"}),(0,K.HD)(l)?{value:l}:(0,K.Kn)(l)?br(l)?l:"encoding"===l.content?Zu(n,o,i,t):{signal:s}:void 0}))}}function Ku(e,t,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",a=[];function s(r,s){const l=nn(s),c=Ja(r)?r:Object.assign(Object.assign({},r),{type:e[l].type}),u=c.title||cs(c,n),d=(0,K.IX)(u).join(", ");let f;if(Rn(s)){const t="x"===s?"x2":"y2",r=ds(e[t]);if(cr(c.bin)&&r){const e=ns(c,{expr:o}),a=ns(r,{expr:o}),{format:s,formatType:l}=us(c);f=Ea(e,a,s,l,n),i[t]=!0}}if((Rn(s)||s===ut||s===lt)&&t&&t.fieldChannel===s&&"normalize"===t.offset){const{format:e,formatType:t}=us(c);f=ma({fieldOrDatumDef:c,format:e,formatType:t,expr:o,config:n,normalizeStack:!0}).signal}null!=f||(f=Ju(c,n,o).signal),a.push({channel:s,key:d,value:f})}zs(e,((e,t)=>{Ha(e)?s(e,t):Ba(e)&&s(e.condition,t)}));const l={};for(const{channel:e,key:t,value:n}of a)i[e]||l[t]||(l[t]=n);return l}function Zu(e,t,n,{reactiveGeom:r}={}){const i=Ku(e,t,n,{reactiveGeom:r}),o=Pe(i).map((([e,t])=>`"${e}": ${t}`));return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Qu(e){const{markDef:t,config:n}=e,r=Ar("aria",t,n);return!1===r?{}:Object.assign(Object.assign(Object.assign({},r?{aria:r}:{}),function(e){const{mark:t,markDef:n,config:r}=e;if(!1===r.aria)return{};const i=Ar("ariaRoleDescription",n,r);if(null!=i)return{ariaRoleDescription:{value:i}};return t in Or?{}:{ariaRoleDescription:{value:t}}}(e)),function(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Vu(e,o,"description",(t=>Ju(t,e.config)));const a=Ar("description",n,r);if(null!=a)return{description:Rr(a)};if(!1===r.aria)return{};const s=Ku(t,i,r);if(Re(s))return;return{description:{signal:Pe(s).map((([e,t],n)=>`"${n>0?"; ":""}${e}: " + (${t})`)).join(" + ")}}}(e))}function ed(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:l}=n;void 0===s&&(null!=l||(l=Ar(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),void 0!==l&&(s=Rr(l)));const c=i[e];return Vu(t,c,null!=a?a:e,(n=>da({channel:e,channelDef:n,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s})))}function td(e,t={filled:void 0}){var n,r,i,o;const{markDef:a,encoding:s,config:l}=e,{type:c}=a,u=null!==(n=t.filled)&&void 0!==n?n:Ar("filled",a,l),d=ve(["bar","point","circle","square","geoshape"],c)?"transparent":void 0,f=null!==(i=null!==(r=Ar(!0===u?"color":void 0,a,l,{vgChannel:"fill"}))&&void 0!==r?r:l.mark[!0===u&&"color"])&&void 0!==i?i:d,p=null!==(o=Ar(!1===u?"color":void 0,a,l,{vgChannel:"stroke"}))&&void 0!==o?o:l.mark[!1===u&&"color"],h=u?"fill":"stroke",g=Object.assign(Object.assign({},f?{fill:Rr(f)}:{}),p?{stroke:Rr(p)}:{});return a.color&&(u?a.fill:a.stroke)&&xi(ni("property",{fill:"fill"in a,stroke:"stroke"in a})),Object.assign(Object.assign(Object.assign(Object.assign({},g),ed("color",e,{vgChannel:h,defaultValue:u?f:p})),ed("fill",e,{defaultValue:s.fill?f:void 0})),ed("stroke",e,{defaultValue:s.stroke?p:void 0}))}function nd({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,a=t[o],s=n[o];if(("xOffset"===o||"yOffset"===o)&&s){return{offsetType:"encoding",offset:da({channel:o,channelDef:s,markDef:t,config:null==r?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Rr(a),bandPosition:i})}}const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function rd(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:a,stack:s}=t,l=i[e],c=i[on(e)],u=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:p}=nd({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),h=id({model:t,defaultPos:n,channel:e,scaleName:u,scale:d}),g=!l&&Rn(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:function(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(Xa(n)&&i&&t===i.fieldChannel){if(Ha(n)){let e=n.bandPosition;if(void 0!==e||"text"!==a.type||"radius"!==t&&"theta"!==t||(e=.5),void 0!==e)return ua({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:e,offset:o})}return ca(n,r,{suffix:"end"},{offset:o})}return aa(e)}({channel:e,channelDef:l,channel2Def:c,markDef:o,config:a,scaleName:u,scale:d,stack:s,offset:f,defaultRef:h,bandPosition:"encoding"===p?0:void 0});return g?{[r||e]:g}:void 0}function id({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=e;return()=>{const s=nn(n),l=rn(n),c=Ar(n,o,a,{vgChannel:l});if(void 0!==c)return fa(n,c);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const e=i.get("type");if(ve([ao.LOG,ao.TIME,ao.UTC],e));else if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}if("zeroOrMin"===t)return"y"===s?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const t=e[an(n)];return Object.assign(Object.assign({},t),{mult:.5})}}}}const od={left:"x",center:"xc",right:"x2"},ad={top:"y",middle:"yc",bottom:"y2"};function sd(e,t,n,r="middle"){if("radius"===e||"theta"===e)return rn(e);const i="x"===e?"align":"baseline",o=Ar(i,t,n);let a;return br(o)?(xi(function(e){return`The ${e} for range marks cannot be an expression`}(i)),a=void 0):a=o,"x"===e?od[a||("top"===r?"left":"center")]:ad[a||r]}function ld(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?cd(e,t,{defaultPos:n,defaultPos2:r}):rd(e,t,{defaultPos:n})}function cd(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,a=on(e),s=an(e),l=function(e,t,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,l=nn(n),c=an(n),u=rn(n),d=r[l],f=e.scaleName(l),p=e.getScaleComponent(l),{offset:h}=nd(n in r||n in o?{channel:n,markDef:o,encoding:r,model:e}:{channel:l,markDef:o,encoding:r,model:e});if(!d&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude)){const t=an(n),r=e.markDef[t];return null!=r?{[t]:{value:r}}:{[u]:{field:e.getName(n)}}}const g=function({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:l,defaultRef:c}){if(Xa(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0))return ca(t,o,{suffix:"start"},{offset:l});return aa({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:l,defaultRef:c})}({channel:n,channelDef:d,channel2Def:r[n],markDef:o,config:s,scaleName:f,scale:p,stack:a,offset:h,defaultRef:void 0});if(void 0!==g)return{[u]:g};return ud(n,o)||ud(n,{[n]:Fr(n,o,s.style),[c]:Fr(c,o,s.style)})||ud(n,s[i])||ud(n,s.mark)||{[u]:id({model:e,defaultPos:t,channel:n,scaleName:f,scale:p})()}}(t,r,a),c=l[s]?sd(e,i,o):rn(e);return Object.assign(Object.assign({},rd(e,t,{defaultPos:n,vgChannel:c})),l)}function ud(e,t){const n=an(e),r=rn(e);if(void 0!==t[r])return{[r]:fa(e,t[r])};if(void 0!==t[e])return{[r]:fa(e,t[e])};if(t[n]){const r=t[n];if(!na(r))return{[n]:fa(e,r)};xi(function(e){return`Position range does not support relative band size for ${e}.`}(n))}}function dd(e,t){var n,r;const{config:i,encoding:o,markDef:a}=e,s=a.type,l=on(t),c=an(t),u=o[t],d=o[l],f=e.getScaleComponent(t),p=f?f.get("type"):void 0,h=a.orient,g=null!==(r=null!==(n=o[c])&&void 0!==n?n:o.size)&&void 0!==r?r:Ar("size",a,i,{vgChannel:c}),m="bar"===s&&("x"===t?"vertical"===h:"horizontal"===h);return!Ha(u)||!(lr(u.bin)||cr(u.bin)||u.timeUnit&&!d)||g&&!na(g)||bo(p)?(Xa(u)&&bo(p)||m)&&!d?function(e,t,n){const{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,l=n.scaleName(t),c=n.getScaleComponent(t),u=an(t),d=on(t),f=function(e){switch(e){case nt:return"xOffset";case rt:return"yOffset";case it:return"x2Offset";case ot:return"y2Offset";case ut:return"thetaOffset";case lt:return"radiusOffset";case dt:return"theta2Offset";case ct:return"radius2Offset"}}(t),p=n.scaleName(f),h="horizontal"===s&&"y"===t||"vertical"===s&&"x"===t;let g;(i.size||r.size)&&(h?g=ed("size",n,{vgChannel:u,defaultRef:Rr(r.size)}):xi(function(e){return`Cannot apply size to non-oriented mark "${e}".`}(r.type)));const m=!!g,v=La({channel:t,fieldDef:e,markDef:r,config:o,scaleType:null==c?void 0:c.get("type"),useVlSizeChannel:h});g=g||{[u]:fd(u,p||l,c,o,v)};const b="band"===(null==c?void 0:c.get("type"))&&na(v)&&!m?"top":"middle",y=sd(t,r,o,b),w="xc"===y||"yc"===y,{offset:x,offsetType:O}=nd({channel:t,markDef:r,encoding:i,model:n,bandPosition:w?.5:0}),S=aa({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:c,stack:a,offset:x,defaultRef:id({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:c}),bandPosition:w?"encoding"===O?0:.5:br(v)?{signal:`(1-${v})/2`}:na(v)?(1-v.band)/2:0});if(u)return Object.assign({[y]:S},g);{const e=rn(d),t=g[u],n=x?Object.assign(Object.assign({},t),{offset:x}):t;return{[y]:S,[e]:(0,K.kJ)(S)?[S[0],Object.assign(Object.assign({},S[1]),{offset:n})]:Object.assign(Object.assign({},S),{offset:n})}}}(u,t,e):cd(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"}):function({fieldDef:e,fieldDef2:t,channel:n,model:r}){var i,o,a;const{config:s,markDef:l,encoding:c}=r,u=r.getScaleComponent(n),d=r.scaleName(n),f=u?u.get("type"):void 0,p=u.get("reverse"),h=La({channel:n,fieldDef:e,markDef:l,config:s,scaleType:f}),g=null===(i=r.component.axes[n])||void 0===i?void 0:i[0],m=null!==(o=null==g?void 0:g.get("translate"))&&void 0!==o?o:.5,v=Rn(n)&&null!==(a=Ar("binSpacing",l,s))&&void 0!==a?a:0,b=on(n),y=rn(n),w=rn(b),{offset:x}=nd({channel:n,markDef:l,encoding:c,model:r,bandPosition:0}),O=br(h)?{signal:`(1-${h.signal})/2`}:na(h)?(1-h.band)/2:.5;if(lr(e.bin)||e.timeUnit)return{[w]:hd({fieldDef:e,scaleName:d,bandPosition:O,offset:pd(b,v,p,m,x)}),[y]:hd({fieldDef:e,scaleName:d,bandPosition:br(O)?{signal:`1-${O.signal}`}:1-O,offset:pd(n,v,p,m,x)})};if(cr(e.bin)){const r=ca(e,d,{},{offset:pd(b,v,p,m,x)});if(Ha(t))return{[w]:r,[y]:ca(t,d,{},{offset:pd(n,v,p,m,x)})};if(ur(e.bin)&&e.bin.step)return{[w]:r,[y]:{signal:`scale("${d}", ${ns(e,{expr:"datum"})} + ${e.bin.step})`,offset:pd(n,v,p,m,x)}}}return void xi(vi(b))}({fieldDef:u,fieldDef2:d,channel:t,model:e})}function fd(e,t,n,r,i){if(na(i)){if(!n)return{mult:i.band,field:{group:e}};{const e=n.get("type");if("band"===e){let e=`bandwidth('${t}')`;return 1!==i.band&&(e=`${i.band} * ${e}`),{signal:`max(0.25, ${e})`}}1!==i.band&&(xi(function(e){return`Cannot use the relative band size with ${e} scale.`}(e)),i=void 0)}}else{if(br(i))return i;if(i)return{value:i}}if(n){const e=n.get("range");if(yr(e)&&(0,K.hj)(e.step))return{value:e.step-2}}return{value:Ll(r.view,e)-2}}function pd(e,t,n,r,i){if(It(e))return 0;const o="x"===e||"y2"===e?-t/2:t/2;if(br(n)||br(i)||br(r)){const e=Dr(n),t=Dr(i),a=Dr(r);return{signal:(a?`${a} + `:"")+(e?`(${e} ? -1 : 1) * `:"")+(t?`(${t} + ${o})`:o)}}return i=i||0,r+(n?-i-o:+i+o)}function hd({fieldDef:e,scaleName:t,bandPosition:n,offset:r}){return ua({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r})}const gd=new Set(["aria","width","height"]);function md(e,t){const{fill:n,stroke:r}="include"===t.color?td(e):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(e,t){return xr.reduce(((n,r)=>(gd.has(r)||void 0===e[r]||"ignore"===t[r]||(n[r]=Rr(e[r])),n)),{})}(e.markDef,t)),vd(e,"fill",n)),vd(e,"stroke",r)),ed("opacity",e)),ed("fillOpacity",e)),ed("strokeOpacity",e)),ed("strokeWidth",e)),ed("strokeDash",e)),function(e){const{encoding:t,mark:n}=e,r=t.order;return!Jo(n)&&Ya(r)?Vu(e,r,"zindex",(e=>Rr(e.value))):{}}(e)),Yu(e)),Xu(e,"href")),Qu(e))}function vd(e,t,n){const{config:r,mark:i,markDef:o}=e;if("hide"===Ar("invalid",o,r)&&n&&!Jo(i)){const r=function(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&yo(i)&&(t[o]=!0)}return t}),{}),i=Te(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>la(e,t))).join(` ${e} `)}return}(e,{invalid:!0,channels:Gn});if(r)return{[t]:[{test:r,value:null},...(0,K.IX)(n)]}}return n?{[t]:n}:{}}function bd(e){const{config:t,markDef:n}=e;if(Ar("invalid",n,t)){const t=function(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{var r;const i=e.getScaleComponent(n);if(i){const o=i.get("type"),a=e.vgField(n,{expr:"datum",binSuffix:(null===(r=e.stack)||void 0===r?void 0:r.impute)?"mid":void 0});a&&yo(o)&&(t[a]=!0)}return t}),{}),i=Te(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>la(e,t))).join(` ${e} `)}return}(e,{channels:Cn});if(t)return{defined:{signal:t}}}return{}}function yd(e,t){if(void 0!==t)return{[e]:Rr(t)}}const wd="voronoi",xd={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(wd)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Jo(o))return xi(function(e){return`The "nearest" transform is not supported for ${e} marks.`}(o)),n;const a={name:e.getName(wd),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Yu(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,l=!1;return n.forEach(((t,n)=>{var r;const i=null!==(r=t.name)&&void 0!==r?r:"";i===e.component.mark[0].name?s=n:i.indexOf(wd)>=0&&(l=!0)})),l||n.splice(s+1,0,a),n}},Od=xd,Sd={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!El(e.bind),parse:(e,t,n)=>Wd(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=Od.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach(((e,i)=>{var l,c;const u=Ne(`${r}_${e.field}`);n.filter((e=>e.name===u)).length||n.unshift(Object.assign(Object.assign({name:u},a?{init:Ou(a[i])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${(0,K.m8)(e.field)}] : null`}]:[],bind:null!==(c=null!==(l=o[e.field])&&void 0!==l?l:o[e.channel])&&void 0!==c?c:o}))})),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter((e=>e.name===r+Ld))[0],a=r+Pu,s=i.items.map((e=>Ne(`${r}_${e.field}`))),l=s.map((e=>`${e} !== null`)).join(" && ");return s.length&&(o.update=`${l} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},Ed=Sd,kd="_toggle",jd={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+kd,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ld,r=t.name+kd;return`${r} ? null : ${n}, `+("global"===t.resolve?`${r} ? null : true, `:`${r} ? null : {unit: ${Ud(e)}}, `)+`${r} ? ${n} : null`}},Cd={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t)=>{t.clear&&(t.clear=(0,K.HD)(t.clear)?(0,wu.r)(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Ed.defined(t))for(const e of t.project.items){const r=n.findIndex((n=>n.name===Ne(`${t.name}_${e.field}`)));-1!==r&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type)for(const e of t.project.items){const t=n.findIndex((t=>t.name===e.signals.visual));if(r(t,"[0, 0]"),-1===t){r(n.findIndex((t=>t.name===e.signals.data)),"null")}}else{let e=n.findIndex((e=>e.name===t.name+Ld));r(e,"null"),jd.defined(t)&&(e=n.findIndex((e=>e.name===t.name+kd)),r(e,"false"))}return n}},Rd={defined:e=>{const t="global"===e.resolve&&e.bind&&El(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==Ol;return t&&!n&&xi("Legend bindings are only supported for selections over an individual field or encoding channel."),t&&n},parse:(e,t,n)=>{var r;const i=ue(n);if(i.select=(0,K.HD)(i.select)?{type:i.select,toggle:t.toggle}:Object.assign(Object.assign({},i.select),{toggle:t.toggle}),Wd(t,i),(0,z.isObject)(n.select)&&(n.select.on||n.select.clear)){const e='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of t.events)n.filter=(0,K.IX)(null!==(r=n.filter)&&void 0!==r?r:[]),n.filter.includes(e)||n.filter.push(e)}const o=kl(t.bind)?t.bind.legend:"click",a=(0,K.HD)(o)?(0,wu.r)(o,"view"):(0,K.IX)(o);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=kl(t.bind)&&t.bind.legend,o=e=>t=>{const n=ue(t);return n.markname=e,n};for(const e of t.project.items){if(!e.hasLegend)continue;const a=`${Ne(e.field)}_legend`,s=`${r}_${a}`;if(0===n.filter((e=>e.name===s)).length){const e=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift(Object.assign(Object.assign({name:s},t.init?{}:{value:null}),{on:[{events:e,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${s}`,force:!0}]}))}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find((e=>e.name===r+Ld)),a=r+Pu,s=i.items.filter((e=>e.hasLegend)).map((e=>Ne(`${r}_${Ne(e.field)}_legend`))),l=`${s.map((e=>`${e} !== null`)).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map((e=>({signal:e}))),update:l}):s.length>0&&(o.update=l,delete o.value,delete o.on);const c=n.find((e=>e.name===r+kd)),u=kl(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push(Object.assign(Object.assign({},c.on[0]),{events:u})):c.on[0].events=u),n}};const Td="_translate_anchor",Dd="_translate_delta",Pd={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Iu.defined(t),o=r+Td,{x:a,y:s}=t.project.hasChannel;let l=(0,wu.r)(t.translate,"scope");return i||(l=l.map((e=>(e.between[0].markname=r+zu,e)))),n.push({name:o,value:{},on:[{events:l.map((e=>e.between[0])),update:"{x: x(unit), y: y(unit)"+(void 0!==a?`, extent_x: ${i?_u(e,nt):`slice(${a.signals.visual})`}`:"")+(void 0!==s?`, extent_y: ${i?_u(e,rt):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+Dd,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==a&&Ad(e,t,a,"width",n),void 0!==s&&Ad(e,t,s,"height",n),n}};function Ad(e,t,n,r,i){var o,a;const s=t.name,l=s+Td,c=s+Dd,u=n.channel,d=Iu.defined(t),f=i.filter((e=>e.name===n.signals[d?"data":"visual"]))[0],p=e.getSizeSignalRef(r).signal,h=e.getScaleComponent(u),g=h.get("type"),m=h.get("reverse"),v=`${l}.extent_${u}`,b=`${d?"log"===g?"panLog":"symlog"===g?"panSymlog":"pow"===g?"panPow":"panLinear":"panLinear"}(${v}, ${`${d?u===nt?m?"":"-":m?"-":"":""}${c}.${u} / ${d?`${p}`:`span(${v})`}`}${d?"pow"===g?`, ${null!==(o=h.get("exponent"))&&void 0!==o?o:1}`:"symlog"===g?`, ${null!==(a=h.get("constant"))&&void 0!==a?a:1}`:"":""})`;f.on.push({events:{signal:c},update:d?b:`clampRange(${b}, 0, ${p})`})}const Nd="_zoom_anchor",Fd="_zoom_delta",$d={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Iu.defined(t),o=r+Fd,{x:a,y:s}=t.project.hasChannel,l=(0,K.m8)(e.scaleName(nt)),c=(0,K.m8)(e.scaleName(rt));let u=(0,wu.r)(t.zoom,"scope");return i||(u=u.map((e=>(e.markname=r+zu,e)))),n.push({name:r+Nd,on:[{events:u,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter((e=>!!e)).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==a&&Id(e,t,a,"width",n),void 0!==s&&Id(e,t,s,"height",n),n}};function Id(e,t,n,r,i){var o,a;const s=t.name,l=n.channel,c=Iu.defined(t),u=i.filter((e=>e.name===n.signals[c?"data":"visual"]))[0],d=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(l),p=f.get("type"),h=c?_u(e,l):u.name,g=s+Fd,m=`${c?"log"===p?"zoomLog":"symlog"===p?"zoomSymlog":"pow"===p?"zoomPow":"zoomLinear":"zoomLinear"}(${h}, ${`${s}${Nd}.${l}`}, ${g}${c?"pow"===p?`, ${null!==(o=f.get("exponent"))&&void 0!==o?o:1}`:"symlog"===p?`, ${null!==(a=f.get("constant"))&&void 0!==a?a:1}`:"":""})`;u.on.push({events:{signal:g},update:c?m:`clampRange(${m}, 0, ${d})`})}const _d="_store",Ld="_tuple",Md="_modify",zd="vlSelectionResolve",Bd=[qu,Hu,Fu,jd,Ed,Iu,Rd,Cd,Pd,$d,Od];function Ud(e,{escape:t}={escape:!0}){let n=t?(0,K.m8)(e.name):e.name;const r=function(e){let t=e.parent;for(;t&&!Fh(t);)t=t.parent;return t}(e);if(r){const{facet:e}=r;for(const t of Ut)e[t]&&(n+=` + '__facet_${t}_' + (facet[${(0,K.m8)(r.vgField(t))}])`)}return n}function Hd(e){var t;return De(null!==(t=e.component.selection)&&void 0!==t?t:{}).reduce(((e,t)=>e||t.project.hasSelectionId),!1)}function Wd(e,t){!(0,z.isString)(t.select)&&t.select.on||delete e.events,!(0,z.isString)(t.select)&&t.select.clear||delete e.clear,!(0,z.isString)(t.select)&&t.select.toggle||delete e.toggle}var Gd=n(3368);function qd(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...qd(e.object)),t.push(...qd(e.property))),t)}function Vd(e){return"MemberExpression"===e.object.type?Vd(e.object):"datum"===e.object.name}function Xd(e){const t=(0,Gd.BJ)(e),n=new Set;return t.visit((e=>{"MemberExpression"===e.type&&Vd(e)&&n.add(qd(e).slice(1).join("."))})),n}class Jd extends ju{constructor(e,t,n){super(e),this.model=t,this.filter=n,this.expr=Zd(this.model,this.filter,this),this._dependentFields=Xd(this.expr)}clone(){return new Jd(null,this.model,ue(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Yd(e,t,n,r="datum"){const i=(0,K.HD)(t)?t:t.param,o=Ne(i),a=(0,K.m8)(o+_d);let s;try{s=e.getSelectionComponent(o,i)}catch(e){return`!!${o}`}if(s.project.timeUnit){const t=null!=n?n:e.component.data.raw,r=s.project.timeUnit.clone();t.parent?r.insertAsParentOf(t):t.parent=r}const l=`${s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest("}${a}, ${r}${"global"===s.resolve?")":`, ${(0,K.m8)(s.resolve)})`}`,c=`length(data(${a}))`;return!1===t.empty?`${c} && ${l}`:`!${c} || ${l}`}function Kd(e,t,n){const r=Ne(t),i=n.encoding;let o,a=n.field;try{o=e.getSelectionComponent(r,t)}catch(e){return r}if(i||a){if(i&&!a){const e=o.project.items.filter((e=>e.channel===i));!e.length||e.length>1?(a=o.project.items[0].field,xi((e.length?"Multiple ":"No ")+`matching ${(0,K.m8)(i)} encoding found for selection ${(0,K.m8)(n.param)}. `+`Using "field": ${(0,K.m8)(a)}.`)):a=e[0].field}}else a=o.project.items[0].field,o.project.items.length>1&&xi(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${(0,K.m8)(a)}.`);return`${o.name}[${(0,K.m8)(ze(a))}]`}function Zd(e,t,n){return Fe(t,(t=>(0,K.HD)(t)?t:function(e){return null==e?void 0:e.param}(t)?Yd(e,t,n):Xi(t)))}var Qd=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function ef(e,t,n,r){var i,o,a,s,l;null!==(i=e.encode)&&void 0!==i||(e.encode={}),null!==(o=(s=e.encode)[t])&&void 0!==o||(s[t]={}),null!==(a=(l=e.encode[t]).update)&&void 0!==a||(l.update={}),e.encode[t].update[n]=r}function tf(e,t,n,r={header:!1}){var i,o;const a=e.combine(),{disable:s,orient:l,scale:c,labelExpr:u,title:d,zindex:f}=a,p=Qd(a,["disable","orient","scale","labelExpr","title","zindex"]);if(!s){for(const e in p){const n=ks[e],r=p[e];if(n&&n!==t&&"both"!==n)delete p[e];else if(Ss(r)){const{condition:t}=r,n=Qd(r,["condition"]),i=(0,K.IX)(t),o=Os[e];if(o){const{vgProp:t,part:r}=o;ef(p,r,t,[...i.map((e=>{const{test:t}=e,n=Qd(e,["test"]);return Object.assign({test:Zd(null,t)},n)})),n]),delete p[e]}else if(null===o){const t={signal:i.map((e=>{const{test:t}=e,n=Qd(e,["test"]);return`${Zd(null,t)} ? ${Tr(n)} : `})).join("")+Tr(n)};p[e]=t}}else if(br(r)){const t=Os[e];if(t){const{vgProp:n,part:i}=t;ef(p,i,n,r),delete p[e]}}ve(["labelAlign","labelBaseline"],e)&&null===p[e]&&delete p[e]}if("grid"===t){if(!p.grid)return;if(p.encode){const{grid:e}=p.encode;p.encode=Object.assign({},e?{grid:e}:{}),Re(p.encode)&&delete p.encode}return Object.assign(Object.assign({scale:c,orient:l},p),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:We(f,0)})}{if(!r.header&&e.mainExtracted)return;if(void 0!==u){let e=u;(null===(o=null===(i=p.encode)||void 0===i?void 0:i.labels)||void 0===o?void 0:o.update)&&br(p.encode.labels.update.text)&&(e=Be(u,"datum.label",p.encode.labels.update.text.signal)),ef(p,"labels","text",{signal:e})}if(null===p.labelAlign&&delete p.labelAlign,p.encode){for(const t of Es)e.hasAxisPart(t)||delete p.encode[t];Re(p.encode)&&delete p.encode}const t=function(e,t){if(e)return(0,K.kJ)(e)&&!vr(e)?e.map((e=>cs(e,t))).join(", "):e}(d,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:c,orient:l,grid:!1},t?{title:t}:{}),p),!1===n.aria?{aria:!1}:{}),{zindex:We(f,0)})}}}function nf(e){const{axes:t}=e.component,n=[];for(const r of Cn)if(t[r])for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const t="x"===r?"height":"width",i=e.getSizeSignalRef(t).signal;t!==i&&n.push({name:t,update:i})}return n}function rf(e,t,n,r){return Object.assign.apply(null,[{},...e.map((e=>{if("axisOrient"===e){const e="x"===n?"bottom":"left",i=t["x"===n?"axisBottom":"axisLeft"]||{},o=t["x"===n?"axisTop":"axisRight"]||{},a=new Set([...Te(i),...Te(o)]),s={};for(const t of a.values())s[t]={signal:`${r.signal} === "${e}" ? ${Dr(i[t])} : ${Dr(o[t])}`};return s}return t[e]}))])}function of(e,t){var n;const r=[{}];for(const i of e){let e=null===(n=t[i])||void 0===n?void 0:n.style;if(e){e=(0,K.IX)(e);for(const n of e)r.push(t.style[n])}}return Object.assign.apply(null,r)}function af(e,t,n,r={}){var i;const o=$r(e,n,t);if(void 0!==o)return{configFrom:"style",configValue:o};for(const t of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==(null===(i=r[t])||void 0===i?void 0:i[e]))return{configFrom:t,configValue:r[t][e]};return{}}const sf={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return ya(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return wa(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>{var r;return null!==(r=t.grid)&&void 0!==r?r:function(e,t){return!bo(e)&&Ha(t)&&!lr(null==t?void 0:t.bin)&&!cr(null==t?void 0:t.bin)}(n,e)},gridScale:({model:e,channel:t})=>function(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n);return}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||uf(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||cf(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>{var r;return null!==(r=e.labelFlush)&&void 0!==r?r:function(e,t){if("x"===t&&ve(["quantitative","temporal"],e))return!0;return}(t.type,n)},labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{var r;return null!==(r=e.labelOverlap)&&void 0!==r?r:function(e,t,n,r){if(n&&!(0,K.Kn)(r)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy";return}(t.type,n,Ha(t)&&!!t.timeUnit,Ha(t)?t.sort:void 0)},orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var o;const a="x"===e?"width":"y"===e?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return null!==(o=n.tickCount)&&void 0!==o?o:function({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!bo(t)&&"log"!==t){if(Ha(e)){if(lr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&ve(["month","hours","day","quarter"],null===(i=Li(e.timeUnit))||void 0===i?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}return}({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const r=df(t,n);if(void 0!==r)return r;const i=t.typedFieldDef(n),o="x"===n?"x2":"y2",a=t.fieldDef(o);return _r(i?[$a(i)]:[],Ha(a)?[$a(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function(e,t){const n=e.values;if((0,K.kJ)(n))return ws(t,n);if(br(n))return n;return}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>{var r;return null!==(r=e.zindex)&&void 0!==r?r:function(e,t){if("rect"===e&&rs(t))return 1;return 0}(n,t)}};function lf(e){return`(((${e.signal} % 360) + 360) % 360)`}function cf(e,t,n,r){if(void 0!==e){if("x"===n){if(br(e)){const n=lf(e);return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${br(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(br(t)){const n=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${n} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(br(e)){const n=lf(e);return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${n} && ${n} <= 135) === ${br(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(br(t)){const n=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function uf(e,t,n){if(void 0===e)return;const r="x"===n,i=r?0:90,o=r?"bottom":"left";if(br(e)){const n=lf(e);return{signal:`(${i?`(${n} + 90)`:n} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${n} && ${n} < ${180+i}) === ${br(t)?`(${t.signal} === "${o}")`:t===o} ? "left" : "right"`}}if((e+i)%180==0)return r?null:"center";if(br(t)){const n=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${n} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function df(e,t){const n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?Lr(o,a):o||(a||(void 0!==o?o:void 0!==a?a:void 0))}class ff extends ju{constructor(e,t){super(e),this.transform=t,this._dependentFields=Xd(this.transform.calculate)}clone(){return new ff(null,ue(this.transform))}static parseAllForSortIndex(e,t){return t.forEachFieldDef(((t,n)=>{if(Ka(t)&&Da(t.sort)){const{field:r,timeUnit:i}=t,o=t.sort,a=o.map(((e,t)=>`${Xi({field:r,timeUnit:i,equal:e})} ? ${t} : `)).join("")+o.length;e=new ff(e,{calculate:a,as:pf(t,n,{forAs:!0})})}})),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${ge(this.transform)}`}}function pf(e,t,n){return ns(e,Object.assign({prefix:t,suffix:"sort_index"},null!=n?n:{}))}function hf(e,t){return ve(["top","bottom"],t)?"column":ve(["left","right"],t)||"row"===e?"row":"column"}function gf(e,t,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return We((t||{})[e],i[e],n.header[e])}function mf(e,t,n,r){const i={};for(const o of e){const e=gf(o,t||{},n,r);void 0!==e&&(i[o]=e)}return i}const vf=["row","column"],bf=["header","footer"];function yf(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=mf(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=hf(t,s),c=Ye(a);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===t?{orient:"left"}:{}),{style:"guide-title"}),xf(c,l)),wf(l,c,o)),Rf(r,i,t,vl,gl))}}function wf(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=uf(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function xf(e,t){const n=cf(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function Of(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of bf)if(n[i])for(const o of n[i]){const a=kf(e,t,i,n,o);null!=a&&r.push(a)}return r}function Sf(e,t){var n;const{sort:r}=e;return Ta(r)?{field:ns(r,{expr:"datum"}),order:null!==(n=r.order)&&void 0!==n?n:"ascending"}:(0,K.kJ)(r)?{field:pf(e,t,{expr:"datum"}),order:"ascending"}:{field:ns(e,{expr:"datum"}),order:null!=r?r:"ascending"}}function Ef(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:l}=mf(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),c=ma({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,u=hf(t,s);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:l?Be(Be(l,"datum.label",c),"datum.value",ns(e,{expr:"parent"})):c}},"row"===t?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),xf(o,u)),wf(u,o,a)),Rf(n,e,t,bl,ml))}function kf(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:e}=mf(["labelOrient"],a.header,s,t);("row"===t&&!ve(["top","bottom"],e)||"column"===t&&!ve(["left","right"],e))&&(o=Ef(a,t,s))}const l=Fh(e)&&!Pa(e.facet),c=i.axes,u=(null==c?void 0:c.length)>0;if(o||u){const s="row"===t?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Sf(a,t)}:{}),u&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[s]:i.sizeSignal}}}:{}),u?{axes:c}:{})}}return null}const jf={column:{start:0,end:1},row:{start:1,end:0}};function Cf(e,t){return jf[t][e]}function Rf(e,t,n,r,i){const o={};for(const a of r){if(!i[a])continue;const r=gf(a,null==t?void 0:t.header,e,n);void 0!==r&&(o[i[a]]=r)}return o}function Tf(e){return[...Df(e,"width"),...Df(e,"height"),...Df(e,"childWidth"),...Df(e,"childHeight")]}function Df(e,t){const n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];const i=e.getSizeSignalRef(t).signal;if("step"===r){const t=e.getScaleComponent(n);if(t){const r=t.get("type"),o=t.get("range");if(bo(r)&&yr(o)){const r=e.scaleName(n);if(Fh(e.parent)){if("independent"===e.parent.component.resolve.scale[n])return[Pf(r,o)]}return[Pf(r,o),{name:i,update:Af(r,t,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const t=i.endsWith("width"),n=t?"containerSize()[0]":"containerSize()[1]",r=`isFinite(${n}) ? ${n} : ${_l(e.config.view,t?"width":"height")}`;return[{name:i,init:r,on:[{update:r,events:"window:resize"}]}]}return[{name:i,value:r}]}function Pf(e,t){const n=`${e}_step`;return br(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Af(e,t,n){const r=t.get("type"),i=t.get("padding"),o=We(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a="band"===r?void 0!==a?a:i:1,`bandspace(${n}, ${Dr(a)}, ${Dr(o)}) * ${e}_step`}function Nf(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function Ff(e,t){return Te(e).reduce(((n,r)=>{const i=e[r];return Object.assign(Object.assign({},n),Vu(t,i,r,(e=>Rr(e.value))))}),{})}function $f(e,t){if(Fh(t))return"theta"===e?"independent":"shared";if(Ih(t))return"shared";if($h(t))return Rn(e)||"theta"===e||"radius"===e?"independent":"shared";throw new Error("invalid model type for resolve")}function If(e,t){const n=e.scale[t],r=Rn(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&xi(function(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}(t)),"independent"):e[r][t]||"shared"}const _f=Object.assign(Object.assign({},xl),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),Lf=Te(_f);class Mf extends ou{}const zf={symbols:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){var a,s,l,c,u,d,f,p;if("symbol"!==o)return;const{markDef:h,encoding:g,config:m,mark:v}=n,b=h.filled&&"trail"!==v;let y=Object.assign(Object.assign({},function(e,t,n){for(const r of n){const n=Nr(r,t.markDef,t.config);void 0!==n&&(e[r]=Rr(n))}return e}({},n,Qo)),td(n,{filled:b}));const w=null!==(a=i.get("symbolOpacity"))&&void 0!==a?a:m.legend.symbolOpacity,x=null!==(s=i.get("symbolFillColor"))&&void 0!==s?s:m.legend.symbolFillColor,O=null!==(l=i.get("symbolStrokeColor"))&&void 0!==l?l:m.legend.symbolStrokeColor,S=void 0===w?null!==(c=Bf(g.opacity))&&void 0!==c?c:h.opacity:void 0;if(y.fill)if("fill"===r||b&&r===mt)delete y.fill;else if(y.fill.field)x?delete y.fill:(y.fill=Rr(null!==(u=m.legend.symbolBaseFillColor)&&void 0!==u?u:"black"),y.fillOpacity=Rr(null!=S?S:1));else if((0,K.kJ)(y.fill)){const e=null!==(p=null!==(f=Uf(null!==(d=g.fill)&&void 0!==d?d:g.color))&&void 0!==f?f:h.fill)&&void 0!==p?p:b&&h.color;e&&(y.fill=Rr(e))}if(y.stroke)if("stroke"===r||!b&&r===mt)delete y.stroke;else if(y.stroke.field||O)delete y.stroke;else if((0,K.kJ)(y.stroke)){const e=We(Uf(g.stroke||g.color),h.stroke,b?h.color:void 0);e&&(y.stroke={value:e})}if(r!==Ot){const e=Ha(t)&&Wf(n,i,t);e?y.opacity=[Object.assign({test:e},Rr(null!=S?S:1)),Rr(m.legend.unselectedOpacity)]:S&&(y.opacity=Rr(S))}return y=Object.assign(Object.assign({},y),e),Re(y)?void 0:y},gradient:function(e,{model:t,legendType:n,legendCmpt:r}){var i;if("gradient"!==n)return;const{config:o,markDef:a,encoding:s}=t;let l={};const c=void 0===(null!==(i=r.get("gradientOpacity"))&&void 0!==i?i:o.legend.gradientOpacity)?Bf(s.opacity)||a.opacity:void 0;c&&(l.opacity=Rr(c));return l=Object.assign(Object.assign({},l),e),Re(l)?void 0:l},labels:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=Ha(t)?Wf(n,i,t):void 0,l=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:c,formatType:u}=o;let d;pa(u)?d=ba({fieldOrDatumDef:t,field:"datum.value",format:c,formatType:u,config:a}):void 0===c&&void 0===u&&a.customFormatTypes&&("quantitative"===t.type&&a.numberFormatType?d=ba({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):"temporal"===t.type&&a.timeFormatType&&Ha(t)&&void 0===t.timeUnit&&(d=ba({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));const f=Object.assign(Object.assign(Object.assign({},l?{opacity:l}:{}),d?{text:d}:{}),e);return Re(f)?void 0:f},entries:function(e,{legendCmpt:t}){const n=t.get("selections");return(null==n?void 0:n.length)?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}};function Bf(e){return Hf(e,((e,t)=>Math.max(e,t.value)))}function Uf(e){return Hf(e,((e,t)=>We(e,t.value)))}function Hf(e,t){return function(e){const t=null==e?void 0:e.condition;return!!t&&((0,K.kJ)(t)||Ya(t))}(e)?(0,K.IX)(e.condition).reduce(t,e.value):Ya(e)?e.value:void 0}function Wf(e,t,n){const r=t.get("selections");if(!(null==r?void 0:r.length))return;const i=(0,K.m8)(n.field);return r.map((e=>`(!length(data(${(0,K.m8)(Ne(e)+_d)})) || (${e}[${i}] && indexof(${e}[${i}], datum.value) >= 0))`)).join(" || ")}const Gf={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return ya(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return wa(r,t,n)},gradientLength:e=>{var t,n;const{legend:r,legendConfig:i}=e;return null!==(n=null!==(t=r.gradientLength)&&void 0!==t?t:i.gradientLength)&&void 0!==n?n:function({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:l}=e;if(wo(i))return"horizontal"===n?"top"===r||"bottom"===r?Xf(t,"width",a,o):a:Xf(t,"height",l,s);return}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>{var r,i;return null!==(i=null!==(r=e.labelOverlap)&&void 0!==r?r:t.labelOverlap)&&void 0!==i?i:function(e){if(ve(["quantile","threshold","log","symlog"],e))return"greedy";return}(n)},symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>{var i;return null!==(i=e.symbolType)&&void 0!==i?i:function(e,t,n,r){var i;if("shape"!==t){const e=null!==(i=Uf(n))&&void 0!==i?i:r;if(e)return e}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,r.shape,t.shape)},title:({fieldOrDatumDef:e,config:t})=>ss(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(zt(n)&&wo(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function(e,t){const n=e.values;if((0,K.kJ)(n))return ws(t,n);if(br(n))return n;return}(t,e)};function qf(e){const{legend:t}=e;return We(t.type,function({channel:e,timeUnit:t,scaleType:n}){if(zt(e)){if(ve(["quarter","month","day"],t))return"symbol";if(wo(n))return"gradient"}return"symbol"}(e))}function Vf({legendConfig:e,legendType:t,orient:n,legend:r}){var i,o;return null!==(o=null!==(i=r.direction)&&void 0!==i?i:e[t?"gradientDirection":"symbolDirection"])&&void 0!==o?o:function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}function Xf(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Jf(e){const t=Nh(e)?function(e){const{encoding:t}=e,n={};for(const r of[mt,...wl]){const i=fs(t[r]);i&&e.getScaleComponent(r)&&(r===yt&&Ha(i)&&i.type===io||(n[r]=Kf(e,r)))}return n}(e):function(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Jf(r);for(const i of Te(r.component.legends))n.legend[i]=If(e.component.resolve,i),"shared"===n.legend[i]&&(t[i]=Zf(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Te(t))for(const t of e.children)t.component.legends[r]&&"shared"===n.legend[r]&&delete t.component.legends[r];return t}(e);return e.component.legends=t,t}function Yf(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!(null==n?void 0:n.values);case"title":if("title"===t&&e===(null==r?void 0:r.title))return!0}return e===(n||{})[t]}function Kf(e,t){var n,r,i;let o=e.legend(t);const{markDef:a,encoding:s,config:l}=e,c=l.legend,u=new Mf({},function(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function(e,t,n){var r,i,o,a;const s=null===(r=e.fieldDef(t))||void 0===r?void 0:r.field;for(const r of De(null!==(i=e.component.selection)&&void 0!==i?i:{})){const e=null!==(o=r.project.hasField[s])&&void 0!==o?o:r.project.hasChannel[t];if(e&&Rd.defined(r)){const t=null!==(a=n.get("selections"))&&void 0!==a?a:[];t.push(r.name),n.set("selections",t,!1),e.hasLegend=!0}}}(e,t,u);const d=void 0!==o?!o:c.disable;if(u.set("disable",d,void 0!==o),d)return u;o=o||{};const f=e.getScaleComponent(t).get("type"),p=fs(s[t]),h=Ha(p)?null===(n=Li(p.timeUnit))||void 0===n?void 0:n.unit:void 0,g=o.orient||l.legend.orient||"right",m=qf({legend:o,channel:t,timeUnit:h,scaleType:f}),v={legend:o,channel:t,model:e,markDef:a,encoding:s,fieldOrDatumDef:p,legendConfig:c,config:l,scaleType:f,orient:g,legendType:m,direction:Vf({legend:o,legendType:m,orient:g,legendConfig:c})};for(const n of Lf){if("gradient"===m&&n.startsWith("symbol")||"symbol"===m&&n.startsWith("gradient"))continue;const r=n in Gf?Gf[n](v):o[n];if(void 0!==r){const i=Yf(r,n,o,e.fieldDef(t));(i||void 0===l.legend[n])&&u.set(n,r,i)}}const b=null!==(r=null==o?void 0:o.encoding)&&void 0!==r?r:{},y=u.get("selections"),w={},x={fieldOrDatumDef:p,model:e,channel:t,legendCmpt:u,legendType:m};for(const t of["labels","legend","title","symbols","gradient","entries"]){const n=Ff(null!==(i=b[t])&&void 0!==i?i:{},e),r=t in zf?zf[t](n,x):n;void 0===r||Re(r)||(w[t]=Object.assign(Object.assign(Object.assign({},(null==y?void 0:y.length)&&Ha(p)?{name:`${Ne(p.field)}_legend_${t}`}:{}),(null==y?void 0:y.length)?{interactive:!!y}:{}),{update:r}))}return Re(w)||u.set("encode",w,!!(null==o?void 0:o.encoding)),u}function Zf(e,t){var n,r,i,o;if(!e)return t.clone();const a=e.getWithExplicit("orient"),s=t.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;let l=!1;for(const n of Lf){const r=uu(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",((e,t)=>{switch(n){case"symbolType":return Qf(e,t);case"title":return Mr(e,t);case"type":return l=!0,su("symbol")}return cu(e,t,n,"legend")}));e.setWithExplicit(n,r)}return l&&((null===(r=null===(n=e.implicit)||void 0===n?void 0:n.encode)||void 0===r?void 0:r.gradient)&&$e(e.implicit,["encode","gradient"]),(null===(o=null===(i=e.explicit)||void 0===i?void 0:i.encode)||void 0===o?void 0:o.gradient)&&$e(e.explicit,["encode","gradient"])),e}function Qf(e,t){return"circle"===t.value?t:e}var ep=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function tp(e){const t=e.component.legends,n={};for(const r of Te(t)){const i=e.getScaleComponent(r),o=he(i.get("domains"));if(n[o])for(const e of n[o]){Zf(e,t[r])||n[o].push(t[r])}else n[o]=[t[r].clone()]}const r=De(n).flat().map((t=>function(e,t){var n,r,i;const o=e.combine(),{disable:a,labelExpr:s,selections:l}=o,c=ep(o,["disable","labelExpr","selections"]);if(a)return;!1===t.aria&&null==c.aria&&(c.aria=!1);if(null===(n=c.encode)||void 0===n?void 0:n.symbols){const e=c.encode.symbols.update;!e.fill||"transparent"===e.fill.value||e.stroke||c.stroke||(e.stroke={value:"transparent"});for(const t of wl)c[t]&&delete e[t]}c.title||delete c.title;if(void 0!==s){let e=s;(null===(i=null===(r=c.encode)||void 0===r?void 0:r.labels)||void 0===i?void 0:i.update)&&br(c.encode.labels.update.text)&&(e=Be(s,"datum.label",c.encode.labels.update.text.signal)),function(e,t,n,r){var i,o,a,s,l;null!==(i=e.encode)&&void 0!==i||(e.encode={}),null!==(o=(s=e.encode)[t])&&void 0!==o||(s[t]={}),null!==(a=(l=e.encode[t]).update)&&void 0!==a||(l.update={}),e.encode[t].update[n]=r}(c,"labels","text",{signal:e})}return c}(t,e.config))).filter((e=>void 0!==e));return r}function np(e){return Ih(e)||$h(e)?function(e){return e.children.reduce(((e,t)=>e.concat(t.assembleProjections())),rp(e))}(e):rp(e)}function rp(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map((e=>e.signal)).join(", ")}]`},o=t.data.reduce(((t,n)=>{const r=br(n)?n.signal:`data('${e.lookupDataSource(n)}')`;return ve(t,r)||t.push(r),t}),[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const ip=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class op extends ou{constructor(e,t,n,r){super(Object.assign({},t),{name:e}),this.specifiedProjection=t,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function ap(e){e.component.projection=Nh(e)?function(e){var t;if(e.hasProjection){const n=hr(e.specifiedProjection),r=!(n&&(null!=n.scale||null!=n.translate)),i=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,o=r?function(e){const t=[],{encoding:n}=e;for(const r of[[pt,ft],[gt,ht]])(fs(n[r[0]])||fs(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});e.channelHasField(yt)&&e.typedFieldDef(yt).type===io&&t.push({signal:e.getName(`geojson_${t.length}`)});0===t.length&&t.push(e.requestDataName(yu.Main));return t}(e):void 0,a=new op(e.projectionName(!0),Object.assign(Object.assign({},null!==(t=hr(e.config.projection))&&void 0!==t?t:{}),null!=n?n:{}),i,o);return a.get("type")||a.set("type","equalEarth",!1),a}return}(e):function(e){if(0===e.children.length)return;let t;for(const t of e.children)ap(t);const n=ye(e.children,(e=>{const n=e.component.projection;if(n){if(t){const e=function(e,t){const n=ye(ip,(n=>!(0,K.nr)(e.explicit,n)&&!(0,K.nr)(t.explicit,n)||!!((0,K.nr)(e.explicit,n)&&(0,K.nr)(t.explicit,n)&&ce(e.get(n),t.get(n)))));if(ce(e.size,t.size)){if(n)return e;if(ce(e.explicit,{}))return t;if(ce(t.explicit,{}))return e}return null}(t,n);return e&&(t=e),!!e}return t=n,!0}return!0}));if(t&&n){const n=e.projectionName(!0),r=new op(n,t.specifiedProjection,t.size,ue(t.data));for(const t of e.children){const e=t.component.projection;e&&(e.isFit&&r.data.push(...t.component.projection.data),t.renameProjection(e.get("name"),n),e.merged=!0)}return r}return}(e)}var sp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function lp(e,t){return`${sr(e)}_${t}`}function cp(e,t,n){var r;const i=lp(null!==(r=ms(n,void 0))&&void 0!==r?r:{},t);return e.getName(`${i}_bins`)}function up(e,t,n){let r,i;r=function(e){return"as"in e}(e)?(0,K.HD)(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[ns(e,{forAs:!0}),ns(e,{binSuffix:"end",forAs:!0})];const o=Object.assign({},ms(t,void 0)),a=lp(o,e.field),{signal:s,extentSignal:l}=function(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,a);if(dr(o.extent)){const e=o.extent;i=Kd(n,e.param,e),delete o.extent}return{key:a,binComponent:Object.assign(Object.assign(Object.assign({bin:o,field:e.field,as:[r]},s?{signal:s}:{}),l?{extentSignal:l}:{}),i?{span:i}:{})}}class dp extends ju{constructor(e,t){super(e),this.bins=t}clone(){return new dp(null,ue(this.bins))}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,n,r)=>{if(Ja(n)&&lr(n.bin)){const{key:i,binComponent:o}=up(n,n.bin,t);e[i]=Object.assign(Object.assign(Object.assign({},o),e[i]),function(e,t,n,r){var i,o;if(xs(t,n)){const a=Nh(e)&&null!==(o=null!==(i=e.axis(n))&&void 0!==i?i:e.legend(n))&&void 0!==o?o:{},s=ns(t,{expr:"datum"}),l=ns(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ns(t,{binSuffix:"range",forAs:!0}),formula:Ea(s,l,a.format,a.formatType,r)}}return{}}(t,n,r,t.config))}return e}),{});return Re(n)?null:new dp(e,n)}static makeFromTransform(e,t,n){const{key:r,binComponent:i}=up(t,t.bin,n);return new dp(e,{[r]:i})}merge(e,t){for(const n of Te(e.bins))n in this.bins?(t(e.bins[n].signal,this.bins[n].signal),this.bins[n].as=Oe([...this.bins[n].as,...e.bins[n].as],ge)):this.bins[n]=e.bins[n];for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}producedFields(){return new Set(De(this.bins).map((e=>e.as)).flat(2))}dependentFields(){return new Set(De(this.bins).map((e=>e.field)))}hash(){return`Bin ${ge(this.bins)}`}assemble(){return De(this.bins).flatMap((e=>{const t=[],[n,...r]=e.as,i=e.bin,{extent:o}=i,a=sp(i,["extent"]),s=Object.assign(Object.assign(Object.assign({type:"bin",field:ze(e.field),as:n,signal:e.signal},dr(o)?{extent:null}:{extent:o}),e.span?{span:{signal:`span(${e.span})`}}:{}),a);!o&&e.extentSignal&&(t.push({type:"extent",field:ze(e.field),signal:e.extentSignal}),s.extent={signal:e.extentSignal}),t.push(s);for(const e of r)for(let r=0;r<2;r++)t.push({type:"formula",expr:ns({field:n[r]},{expr:"datum"}),as:e[r]});return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))}}function fp(e,t,n,r){var i;const o=Nh(r)?r.encoding[on(t)]:void 0;if(Ja(n)&&Nh(r)&&Ma(n,o,r.markDef,r.config))e.add(ns(n,{})),e.add(ns(n,{suffix:"end"})),n.bin&&xs(n,t)&&e.add(ns(n,{binSuffix:"range"}));else if(t in _t){const n=function(e){switch(e){case ft:return"y";case ht:return"y2";case pt:return"x";case gt:return"x2"}}(t);e.add(r.getName(n))}else e.add(ns(n));return Ka(n)&&function(e){return(0,z.isObject)(e)&&"field"in e}(null===(i=n.scale)||void 0===i?void 0:i.range)&&e.add(n.scale.range.field),e}class pp extends ju{constructor(e,t,n){super(e),this.dimensions=t,this.measures=n}clone(){return new pp(null,new Set(this.dimensions),ue(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(e,t){let n=!1;t.forEachFieldDef((e=>{e.aggregate&&(n=!0)}));const r={},i=new Set;return n?(t.forEachFieldDef(((e,n)=>{var o,a,s,l;const{aggregate:c,field:u}=e;if(c)if("count"===c)null!==(o=r["*"])&&void 0!==o||(r["*"]={}),r["*"].count=new Set([ns(e,{forAs:!0})]);else{if(er(c)||tr(c)){const e=er(c)?"argmin":"argmax",t=c[e];null!==(a=r[t])&&void 0!==a||(r[t]={}),r[t][e]=new Set([ns({op:e,field:t},{forAs:!0})])}else null!==(s=r[u])&&void 0!==s||(r[u]={}),r[u][c]=new Set([ns(e,{forAs:!0})]);qn(n)&&"unaggregated"===t.scaleDomain(n)&&(null!==(l=r[u])&&void 0!==l||(r[u]={}),r[u].min=new Set([ns({field:u,aggregate:"min"},{forAs:!0})]),r[u].max=new Set([ns({field:u,aggregate:"max"},{forAs:!0})]))}else fp(i,n,e,t)})),i.size+Te(r).length===0?null:new pp(e,i,r)):null}static makeFromTransform(e,t){var n,r,i;const o=new Set,a={};for(const e of t.aggregate){const{op:t,field:i,as:o}=e;t&&("count"===t?(null!==(n=a["*"])&&void 0!==n||(a["*"]={}),a["*"].count=new Set([o||ns(e,{forAs:!0})])):(null!==(r=a[i])&&void 0!==r||(a[i]={}),a[i][t]=new Set([o||ns(e,{forAs:!0})])))}for(const e of null!==(i=t.groupby)&&void 0!==i?i:[])o.add(e);return o.size+Te(a).length===0?null:new pp(e,o,a)}merge(e){return Ee(this.dimensions,e.dimensions)?(function(e,t){var n;for(const r of Te(t)){const i=t[r];for(const t of Te(i))r in e?e[r][t]=new Set([...null!==(n=e[r][t])&&void 0!==n?n:[],...i[t]]):e[r]={[t]:i[t]}}}(this.measures,e.measures),!0):(function(...e){yi.debug(...e)}("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Te(this.measures)])}producedFields(){const e=new Set;for(const t of Te(this.measures))for(const n of Te(this.measures[t])){const r=this.measures[t][n];0===r.size?e.add(`${n}_${t}`):r.forEach(e.add,e)}return e}hash(){return`Aggregate ${ge({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],t=[],n=[];for(const r of Te(this.measures))for(const i of Te(this.measures[r]))for(const o of this.measures[r][i])n.push(o),e.push(i),t.push("*"===r?null:ze(r));return{type:"aggregate",groupby:[...this.dimensions].map(ze),ops:e,fields:t,as:n}}}class hp extends ju{constructor(e,t,n,r){super(e),this.model=t,this.name=n,this.data=r;for(const e of Ut){const n=t.facet[e];if(n){const{bin:r,sort:i}=n;this[e]=Object.assign({name:t.getName(`${e}_domain`),fields:[ns(n),...lr(r)?[ns(n,{binSuffix:"end"})]:[]]},Ta(i)?{sortField:i}:(0,K.kJ)(i)?{sortIndexField:pf(n,e)}:{})}}this.childModel=t.child}hash(){let e="Facet";for(const t of Ut)this[t]&&(e+=` ${t.charAt(0)}:${ge(this[t])}`);return e}get fields(){var e;const t=[];for(const n of Ut)(null===(e=this[n])||void 0===e?void 0:e.fields)&&t.push(...this[n].fields);return t}dependentFields(){const e=new Set(this.fields);for(const t of Ut)this[t]&&(this[t].sortField&&e.add(this[t].sortField.field),this[t].sortIndexField&&e.add(this[t].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const t of Cn){const n=this.childModel.component.scales[t];if(n&&!n.merged){const r=n.get("type"),i=n.get("range");if(bo(r)&&yr(i)){const n=lh(ch(this.childModel,t));n?e[t]=n:xi(Gr(t))}}}return e}assembleRowColumnHeaderData(e,t,n){const r={row:"y",column:"x",facet:void 0}[e],i=[],o=[],a=[];r&&n&&n[r]&&(t?(i.push(`distinct_${n[r]}`),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push(`distinct_${n[r]}`));const{sortField:s,sortIndexField:l}=this[e];if(s){const{op:e=ka,field:t}=s;i.push(t),o.push(e),a.push(ns(s,{forAs:!0}))}else l&&(i.push(l),o.push("max"),a.push(l));return{name:this[e].name,source:null!=t?t:this.data,transform:[Object.assign({type:"aggregate",groupby:this[e].fields},i.length?{fields:i,ops:o,as:a}:{})]}}assembleFacetHeaderData(e){var t,n;const{columns:r}=this.model.layout,{layoutHeaders:i}=this.model.component,o=[],a={};for(const e of vf){for(const r of bf){const o=null!==(t=i[e]&&i[e][r])&&void 0!==t?t:[];for(const t of o)if((null===(n=t.axes)||void 0===n?void 0:n.length)>0){a[e]=!0;break}}if(a[e]){const t=`length(data("${this.facet.name}"))`,n="row"===e?r?{signal:`ceil(${t} / ${r})`}:1:r?{signal:`min(${t}, ${r})`}:{signal:t};o.push({name:`${this.facet.name}_${e}`,transform:[{type:"sequence",start:0,stop:n}]})}}const{row:s,column:l}=a;return(s||l)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,e)),o}assemble(){var e,t;const n=[];let r=null;const i=this.getChildIndependentFieldsWithStep(),{column:o,row:a,facet:s}=this;if(o&&a&&(i.x||i.y)){r=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(null!==(e=i.x)&&void 0!==e?e:[],null!==(t=i.y)&&void 0!==t?t:[]),a=o.map((()=>"distinct"));n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:a}]})}for(const e of[et,Qe])this[e]&&n.push(this.assembleRowColumnHeaderData(e,r,i));if(s){const e=this.assembleFacetHeaderData(i);e&&n.push(...e)}return n}}function gp(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function mp(e){const t={};return se(e.filter,(e=>{var n;if(qi(e)){let r=null;Mi(e)?r=jr(e.equal):Bi(e)?r=jr(e.lte):zi(e)?r=jr(e.lt):Ui(e)?r=jr(e.gt):Hi(e)?r=jr(e.gte):Wi(e)?r=e.range[0]:Gi(e)&&(r=(null!==(n=e.oneOf)&&void 0!==n?n:e.in)[0]),r&&(Oi(r)?t[e.field]="date":(0,K.hj)(r)?t[e.field]="number":(0,K.HD)(r)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}})),t}function vp(e){const t={};function n(e){var n;bs(e)?t[e.field]="date":"quantitative"===e.type&&(n=e.aggregate,(0,K.HD)(n)&&ve(["min","max"],n))?t[e.field]="number":He(e.field)>1?e.field in t||(t[e.field]="flatten"):Ka(e)&&Ta(e.sort)&&He(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((Nh(e)||Fh(e))&&e.forEachFieldDef(((t,r)=>{if(Ja(t))n(t);else{const i=nn(r),o=e.fieldDef(i);n(Object.assign(Object.assign({},t),{type:o.type}))}})),Nh(e)){const{mark:n,markDef:r,encoding:i}=e;if(Jo(n)&&!e.encoding.order){const e=i["horizontal"===r.orient?"y":"x"];Ha(e)&&"quantitative"===e.type&&!(e.field in t)&&(t[e.field]="number")}}return t}class bp extends ju{constructor(e,t){super(e),this._parse=t}clone(){return new bp(null,ue(this._parse))}hash(){return`Parse ${ge(this._parse)}`}static makeExplicit(e,t,n){var r;let i={};const o=t.data;return!gu(o)&&(null===(r=null==o?void 0:o.format)||void 0===r?void 0:r.parse)&&(i=o.format.parse),this.makeWithAncestors(e,i,{},n)}static makeWithAncestors(e,t,n,r){for(const e of Te(n)){const t=r.getWithExplicit(e);void 0!==t.value&&(t.explicit||t.value===n[e]||"derived"===t.value||"flatten"===n[e]?delete n[e]:xi(Kr(e,n[e],t.value)))}for(const e of Te(t)){const n=r.get(e);void 0!==n&&(n===t[e]?delete t[e]:xi(Kr(e,t[e],n)))}const i=new ou(t,n);r.copyAll(i);const o={};for(const e of Te(i.combine())){const t=i.get(e);null!==t&&(o[e]=t)}return 0===Te(o).length||r.parseNothing?null:new bp(e,o)}get parse(){return this._parse}merge(e){this._parse=Object.assign(Object.assign({},this._parse),e.parse),e.remove()}assembleFormatParse(){const e={};for(const t of Te(this._parse)){const n=this._parse[t];1===He(t)&&(e[t]=n)}return e}producedFields(){return new Set(Te(this._parse))}dependentFields(){return new Set(Te(this._parse))}assembleTransforms(e=!1){return Te(this._parse).filter((t=>!e||He(t)>1)).map((e=>{const t=function(e,t){const n=_e(e);if("number"===t)return`toNumber(${n})`;if("boolean"===t)return`toBoolean(${n})`;if("string"===t)return`toString(${n})`;if("date"===t)return`toDate(${n})`;if("flatten"===t)return n;if(t.startsWith("date:"))return`timeParse(${n},'${gp(t.slice(5,t.length))}')`;if(t.startsWith("utc:"))return`utcParse(${n},'${gp(t.slice(4,t.length))}')`;return xi(`Unrecognized parse "${t}".`),null}(e,this._parse[e]);if(!t)return null;return{type:"formula",expr:t,as:Ue(e)}})).filter((e=>null!==e))}}class yp extends ju{clone(){return new yp(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([Ol])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ol}}}class wp extends ju{constructor(e,t){super(e),this.params=t}clone(){return new wp(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${ge(this.params)}`}assemble(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}class xp extends ju{constructor(e,t){super(e),this.params=t}clone(){return new xp(null,this.params)}dependentFields(){return new Set}producedFields(){var e;return new Set([null!==(e=this.params.as)&&void 0!==e?e:"data"])}hash(){return`Hash ${ge(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}class Op extends ju{constructor(e){let t;if(super(null),null!=e||(e={name:"source"}),gu(e)||(t=e.format?Object.assign({},pe(e.format,["parse"])):{}),pu(e))this._data={values:e.values};else if(fu(e)){if(this._data={url:e.url},!t.type){let n=/(?:\.([^.]+))?$/.exec(e.url)[1];ve(["json","csv","tsv","dsv","topojson"],n)||(n="json"),t.type=n}}else vu(e)?this._data={values:[{type:"Sphere"}]}:(hu(e)||gu(e))&&(this._data={});this._generator=gu(e),e.name&&(this._name=e.name),t&&!Re(t)&&(this._data.format=t)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var Sp,Ep=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},kp=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};function jp(e){return e instanceof Op||e instanceof wp||e instanceof xp}class Cp{constructor(){Sp.set(this,void 0),Ep(this,Sp,!1,"f")}setModified(){Ep(this,Sp,!0,"f")}get modifiedFlag(){return kp(this,Sp,"f")}}Sp=new WeakMap;class Rp extends Cp{getNodeDepths(e,t,n){n.set(e,t);for(const r of e.children)this.getNodeDepths(r,t+1,n);return n}optimize(e){const t=[...this.getNodeDepths(e,0,new Map).entries()].sort(((e,t)=>t[1]-e[1]));for(const e of t)this.run(e[0]);return this.modifiedFlag}}class Tp extends Cp{optimize(e){this.run(e);for(const t of e.children)this.optimize(t);return this.modifiedFlag}}class Dp extends Tp{mergeNodes(e,t){const n=t.shift();for(const r of t)e.removeChild(r),r.parent=n,r.remove()}run(e){const t=e.children.map((e=>e.hash())),n={};for(let r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);for(const t of Te(n))n[t].length>1&&(this.setModified(),this.mergeNodes(e,n[t]))}}class Pp extends Tp{constructor(e){super(),this.requiresSelectionId=e&&Hd(e)}run(e){e instanceof yp&&(this.requiresSelectionId&&(jp(e.parent)||e.parent instanceof pp||e.parent instanceof bp)||(this.setModified(),e.remove()))}}class Ap extends Cp{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,t){let n=new Set;e instanceof Tu&&(n=e.producedFields(),ke(n,t)&&(this.setModified(),e.removeFormulas(t),0===e.producedFields.length&&e.remove()));for(const r of e.children)this.run(r,new Set([...t,...n]))}}class Np extends Tp{constructor(){super()}run(e){e instanceof Cu&&!e.isRequired()&&(this.setModified(),e.remove())}}class Fp extends Rp{run(e){if(!(jp(e)||e.numChildren()>1))for(const t of e.children)if(t instanceof bp)if(e instanceof bp)this.setModified(),e.merge(t);else{if(Ce(e.producedFields(),t.dependentFields()))continue;this.setModified(),t.swapWithParent()}}}class $p extends Rp{run(e){const t=[...e.children],n=e.children.filter((e=>e instanceof bp));if(e.numChildren()>1&&n.length>=1){const r={},i=new Set;for(const e of n){const t=e.parse;for(const e of Te(t))e in r?r[e]!==t[e]&&i.add(e):r[e]=t[e]}for(const e of i)delete r[e];if(!Re(r)){this.setModified();const n=new bp(e,r);for(const i of t){if(i instanceof bp)for(const e of Te(r))delete i.parse[e];e.removeChild(i),i.parent=n,i instanceof bp&&0===Te(i.parse).length&&i.remove()}}}}}class Ip extends Rp{run(e){e instanceof Cu||e.numChildren()>0||e instanceof hp||e instanceof Op||(this.setModified(),e.remove())}}class _p extends Rp{run(e){const t=e.children.filter((e=>e instanceof Tu)),n=t.pop();for(const e of t)this.setModified(),n.merge(e)}}class Lp extends Rp{run(e){const t=e.children.filter((e=>e instanceof pp)),n={};for(const e of t){const t=ge(e.groupBy);t in n||(n[t]=[]),n[t].push(e)}for(const t of Te(n)){const r=n[t];if(r.length>1){const t=r.pop();for(const n of r)t.merge(n)&&(e.removeChild(n),n.parent=t,n.remove(),this.setModified())}}}}class Mp extends Rp{constructor(e){super(),this.model=e}run(e){const t=!(jp(e)||e instanceof Jd||e instanceof bp||e instanceof yp),n=[],r=[];for(const i of e.children)i instanceof dp&&(t&&!Ce(e.producedFields(),i.dependentFields())?n.push(i):r.push(i));if(n.length>0){const t=n.pop();for(const e of n)t.merge(e,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof dp?e.merge(t,this.model.renameSignal.bind(this.model)):t.swapWithParent()}if(r.length>1){const e=r.pop();for(const t of r)e.merge(t,this.model.renameSignal.bind(this.model));this.setModified()}}}class zp extends Rp{run(e){const t=[...e.children];if(!be(t,(e=>e instanceof Cu))||e.numChildren()<=1)return;const n=[];let r;for(const i of t)if(i instanceof Cu){let t=i;for(;1===t.numChildren();){const[e]=t.children;if(!(e instanceof Cu))break;t=e}n.push(...t.children),r?(e.removeChild(i),i.parent=r.parent,r.parent.removeChild(r),r.parent=t,this.setModified()):r=t}else n.push(i);if(n.length){this.setModified();for(const e of n)e.parent.removeChild(e),e.parent=r}}}class Bp extends ju{constructor(e,t){super(e),this.transform=t}clone(){return new Bp(null,ue(this.transform))}addDimensions(e){this.transform.groupby=Oe(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){var t;return null!==(t=e.as)&&void 0!==t?t:ns(e)}hash(){return`JoinAggregateTransform ${ge(this.transform)}`}assemble(){const e=[],t=[],n=[];for(const r of this.transform.joinaggregate)t.push(r.op),n.push(this.getDefaultName(r)),e.push(void 0===r.field?null:r.field);const r=this.transform.groupby;return Object.assign({type:"joinaggregate",as:n,ops:t,fields:e},void 0!==r?{groupby:r}:{})}}class Up extends ju{constructor(e,t){super(e),this._stack=t}clone(){return new Up(null,ue(this._stack))}static makeFromTransform(e,t){const{stack:n,groupby:r,as:i,offset:o="zero"}=t,a=[],s=[];if(void 0!==t.sort)for(const e of t.sort)a.push(e.field),s.push(We(e.order,"ascending"));const l={field:a,order:s};let c;return c=function(e){return(0,K.kJ)(e)&&e.every((e=>(0,K.HD)(e)))&&e.length>1}(i)?i:(0,K.HD)(i)?[i,`${i}_end`]:[`${t.stack}_start`,`${t.stack}_end`],new Up(e,{dimensionFieldDefs:[],stackField:n,groupby:r,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(e,t){const n=t.stack,{encoding:r}=t;if(!n)return null;const{groupbyChannels:i,fieldChannel:o,offset:a,impute:s}=n,l=i.map((e=>ds(r[e]))).filter((e=>!!e)),c=function(e){return e.stack.stackBy.reduce(((e,t)=>{const n=ns(t.fieldDef);return n&&e.push(n),e}),[])}(t),u=t.encoding.order;let d;return d=(0,K.kJ)(u)||Ha(u)?Ir(u):c.reduce(((e,t)=>(e.field.push(t),e.order.push("y"===o?"descending":"ascending"),e)),{field:[],order:[]}),new Up(e,{dimensionFieldDefs:l,stackField:t.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:s,as:[t.vgField(o,{suffix:"start",forAs:!0}),t.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${ge(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:e,impute:t,groupby:n}=this._stack;return e.length>0?e.map((e=>e.bin?t?[ns(e,{binSuffix:"mid"})]:[ns(e,{}),ns(e,{binSuffix:"end"})]:[ns(e)])).flat():null!=n?n:[]}assemble(){const e=[],{facetby:t,dimensionFieldDefs:n,stackField:r,stackby:i,sort:o,offset:a,impute:s,as:l}=this._stack;if(s)for(const o of n){const{bandPosition:n=.5,bin:a}=o;if(a){const t=ns(o,{expr:"datum"}),r=ns(o,{expr:"datum",binSuffix:"end"});e.push({type:"formula",expr:`${n}*${t}+${1-n}*${r}`,as:ns(o,{binSuffix:"mid",forAs:!0})})}e.push({type:"impute",field:r,groupby:[...i,...t],key:ns(o,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...t],field:r,sort:o,as:l,offset:a}),e}}class Hp extends ju{constructor(e,t){super(e),this.transform=t}clone(){return new Hp(null,ue(this.transform))}addDimensions(e){this.transform.groupby=Oe(this.transform.groupby.concat(e),(e=>e))}dependentFields(){var e,t;const n=new Set;return(null!==(e=this.transform.groupby)&&void 0!==e?e:[]).forEach(n.add,n),(null!==(t=this.transform.sort)&&void 0!==t?t:[]).forEach((e=>n.add(e.field))),this.transform.window.map((e=>e.field)).filter((e=>void 0!==e)).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){var t;return null!==(t=e.as)&&void 0!==t?t:ns(e)}hash(){return`WindowTransform ${ge(this.transform)}`}assemble(){var e;const t=[],n=[],r=[],i=[];for(const e of this.transform.window)n.push(e.op),r.push(this.getDefaultName(e)),i.push(void 0===e.param?null:e.param),t.push(void 0===e.field?null:e.field);const o=this.transform.frame,a=this.transform.groupby;if(o&&null===o[0]&&null===o[1]&&n.every((e=>nr(e))))return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},void 0!==a?{groupby:a}:{});const s=[],l=[];if(void 0!==this.transform.sort)for(const t of this.transform.sort)s.push(t.field),l.push(null!==(e=t.order)&&void 0!==e?e:"ascending");const c={field:s,order:l},u=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:i,as:r,ops:n,fields:t,sort:c},void 0!==u?{ignorePeers:u}:{}),void 0!==a?{groupby:a}:{}),void 0!==o?{frame:o}:{})}}function Wp(e){if(e instanceof hp)if(1!==e.numChildren()||e.children[0]instanceof Cu){const n=e.model.component.data.main;Gp(n);const r=(t=e,function e(n){if(!(n instanceof hp)){const r=n.clone();if(r instanceof Cu){const e=qp+r.getSource();r.setSource(e),t.model.component.data.outputNodes[e]=r}else(r instanceof pp||r instanceof Up||r instanceof Hp||r instanceof Bp)&&r.addDimensions(t.fields);for(const t of n.children.flatMap(e))t.parent=r;return[r]}return n.children.flatMap(e)}),i=e.children.map(r).flat();for(const e of i)e.parent=n}else{const t=e.children[0];(t instanceof pp||t instanceof Up||t instanceof Hp||t instanceof Bp)&&t.addDimensions(e.fields),t.swapWithParent(),Wp(e)}else e.children.map(Wp);var t}function Gp(e){if(e instanceof Cu&&e.type===yu.Main&&1===e.numChildren()){const t=e.children[0];t instanceof hp||(t.swapWithParent(),Gp(e))}}const qp="scale_",Vp=5;function Xp(e){for(const t of e){for(const e of t.children)if(e.parent!==t)return!1;if(!Xp(t.children))return!1}return!0}function Jp(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Yp(e,t,n){let r=e.sources,i=!1;return i=Jp(new Np,r)||i,i=Jp(new Pp(t),r)||i,r=r.filter((e=>e.numChildren()>0)),i=Jp(new Ip,r)||i,r=r.filter((e=>e.numChildren()>0)),n||(i=Jp(new Fp,r)||i,i=Jp(new Mp(t),r)||i,i=Jp(new Ap,r)||i,i=Jp(new $p,r)||i,i=Jp(new Lp,r)||i,i=Jp(new _p,r)||i,i=Jp(new Dp,r)||i,i=Jp(new zp,r)||i),e.sources=r,i}class Kp{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,t){return new Kp((()=>e(t)))}}var Zp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Qp(e){Nh(e)?function(e){const t=e.component.scales;for(const n of Te(t)){const r=eh(e,n);if(t[n].setWithExplicit("domains",r),ih(e,n),e.component.data.isFaceted){let t=e;for(;!Fh(t)&&t.parent;)t=t.parent;if("shared"===t.component.resolve.scale[n])for(const e of r.value)wr(e)&&(e.data=qp+e.data.replace(qp,""))}}}(e):function(e){for(const t of e.children)Qp(t);const t=e.component.scales;for(const n of Te(t)){let r,i=null;for(const t of e.children){const e=t.component.scales[n];if(e){r=void 0===r?e.getWithExplicit("domains"):uu(r,e.getWithExplicit("domains"),"domains","scale",ah);const t=e.get("selectionExtent");i&&t&&i.param!==t.param&&xi(Jr),i=t}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}(e)}function eh(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=function(e,t,n,r){if("unaggregated"===e){const{valid:e,reason:r}=oh(t,n);if(!e)return void xi(r)}else if(void 0===e&&r.useUnaggregatedDomain){const{valid:e}=oh(t,n);if(e)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:i})),"x"===t&&fs(r.x2)?fs(r.x)?uu(nh(n,i,e,"x"),nh(n,i,e,"x2"),"domain","scale",ah):nh(n,i,e,"x2"):"y"===t&&fs(r.y2)?fs(r.y)?uu(nh(n,i,e,"y"),nh(n,i,e,"y2"),"domain","scale",ah):nh(n,i,e,"y2"):nh(n,i,e,t)}function th(e,t,n){var r;const i=null===(r=Li(n))||void 0===r?void 0:r.unit;return"temporal"===t||i?function(e,t,n){return e.map((e=>({signal:`{data: ${ys(e,{timeUnit:n,type:t})}}`})))}(e,t,i):[e]}function nh(e,t,n,r){const{encoding:i}=n,o=fs(i[r]),{type:a}=o,s=o.timeUnit;if(function(e){return null==e?void 0:e.unionWith}(t)){const i=nh(e,void 0,n,r),o=th(t.unionWith,a,s);return au([...i.value,...o])}if(br(t))return au([t]);if(t&&"unaggregated"!==t&&!Oo(t))return au(th(t,a,s));const l=n.stack;if(l&&r===l.fieldChannel){if("normalize"===l.offset)return su([[0,1]]);const e=n.requestDataName(yu.Main);return su([{data:e,field:n.vgField(r,{suffix:"start"})},{data:e,field:n.vgField(r,{suffix:"end"})}])}const c=qn(r)&&Ha(o)?function(e,t,n){if(!bo(n))return;const r=e.fieldDef(t),i=r.sort;if(Da(i))return{op:"min",field:pf(r,t),order:"ascending"};const{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map((e=>e.fieldDef.field))]):void 0;if(Ta(i)){return rh(i,o&&!a.has(i.field))}if(Ra(i)){const{encoding:t,order:n}=i,r=e.fieldDef(t),{aggregate:s,field:l}=r,c=o&&!a.has(l);if(er(s)||tr(s))return rh({field:ns(r),order:n},c);if(nr(s)||!s)return rh({op:s,field:l,order:n},c)}else{if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(ve(["ascending",void 0],i))return!0}return}(n,r,e):void 0;if(Ga(o)){return su(th([o.datum],a,s))}const u=o;if("unaggregated"===t){const e=n.requestDataName(yu.Main),{field:t}=o;return su([{data:e,field:ns({field:t,aggregate:"min"})},{data:e,field:ns({field:t,aggregate:"max"})}])}if(lr(u.bin)){if(bo(e))return su("bin-ordinal"===e?[]:[{data:Ae(c)?n.requestDataName(yu.Main):n.requestDataName(yu.Raw),field:n.vgField(r,xs(u,r)?{binSuffix:"range"}:{}),sort:!0!==c&&(0,K.Kn)(c)?c:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:e}=u;if(lr(e)){const t=cp(n,u.field,e);return su([new Kp((()=>{const e=n.getSignalName(t);return`[${e}.start, ${e}.stop]`}))])}return su([{data:n.requestDataName(yu.Main),field:n.vgField(r,{})}])}}if(u.timeUnit&&ve(["time","utc"],e)&&Ma(u,Nh(n)?n.encoding[on(r)]:void 0,n.markDef,n.config)){const e=n.requestDataName(yu.Main);return su([{data:e,field:n.vgField(r)},{data:e,field:n.vgField(r,{suffix:"end"})}])}return su(c?[{data:Ae(c)?n.requestDataName(yu.Main):n.requestDataName(yu.Raw),field:n.vgField(r),sort:c}]:[{data:n.requestDataName(yu.Main),field:n.vgField(r)}])}function rh(e,t){const{op:n,field:r,order:i}=e;return Object.assign(Object.assign({op:null!=n?n:t?"sum":ka},r?{field:ze(r)}:{}),i?{order:i}:{})}function ih(e,t){var n;const r=e.component.scales[t],i=e.specifiedScales[t].domain,o=null===(n=e.fieldDef(t))||void 0===n?void 0:n.bin,a=Oo(i)&&i,s=ur(o)&&dr(o.extent)&&o.extent;(a||s)&&r.set("selectionExtent",null!=a?a:s,!0)}function oh(e,t){const{aggregate:n,type:r}=e;return n?(0,K.HD)(n)&&!ar.has(n)?{valid:!1,reason:ui(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:di(e)}:{valid:!0}:{valid:!1,reason:ci(e)}}function ah(e,t,n,r){return e.explicit&&t.explicit&&xi(function(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${he(n)} and ${he(r)}). Using the union of the two domains.`}(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function sh(e){const t=Oe(e.map((e=>{if(wr(e)){const{sort:t}=e;return Zp(e,["sort"])}return e})),ge),n=Oe(e.map((e=>{if(wr(e)){const t=e.sort;return void 0===t||Ae(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((e=>void 0!==e)),ge);if(0===t.length)return;if(1===t.length){const t=e[0];if(wr(t)&&n.length>0){let e=n[0];if(n.length>1)xi(hi),e=!0;else if((0,K.Kn)(e)&&"field"in e){const n=e.field;t.field===n&&(e=!e.order||{order:e.order})}return Object.assign(Object.assign({},t),{sort:e})}return t}const r=Oe(n.map((e=>Ae(e)||!("op"in e)||(0,K.HD)(e.op)&&e.op in Qn?e:(xi(function(e){return`Dropping sort property ${he(e)} as unioned domains only support boolean or op "count", "min", and "max".`}(e)),!0))),ge);let i;1===r.length?i=r[0]:r.length>1&&(xi(hi),i=!0);const o=Oe(e.map((e=>wr(e)?e.data:null)),(e=>e));if(1===o.length&&null!==o[0]){return Object.assign({data:o[0],fields:t.map((e=>e.field))},i?{sort:i}:{})}return Object.assign({fields:t},i?{sort:i}:{})}function lh(e){if(wr(e)&&(0,K.HD)(e.field))return e.field;if(function(e){return!(0,K.kJ)(e)&&"fields"in e&&!("data"in e)}(e)){let t;for(const n of e.fields)if(wr(n)&&(0,K.HD)(n.field))if(t){if(t!==n.field)return xi("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),t}else t=n.field;return xi("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),t}if(function(e){return!(0,K.kJ)(e)&&"fields"in e&&"data"in e}(e)){xi("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const t=e.fields[0];return(0,K.HD)(t)?t:void 0}}function ch(e,t){const n=e.component.scales[t].get("domains").map((t=>(wr(t)&&(t.data=e.lookupDataSource(t.data)),t)));return sh(n)}var uh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function dh(e){return Ih(e)||$h(e)?e.children.reduce(((e,t)=>e.concat(dh(t))),fh(e)):fh(e)}function fh(e){return Te(e.component.scales).reduce(((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:l,range:c,reverse:u}=i,d=uh(i,["name","type","selectionExtent","domains","range","reverse"]),f=function(e,t,n,r){if(Rn(n)){if(yr(e))return{step:{signal:`${t}_step`}}}else if((0,K.Kn)(e)&&wr(e))return Object.assign(Object.assign({},e),{data:r.lookupDataSource(e.data)});return e}(i.range,o,n,e),p=ch(e,n),h=s?function(e,t,n,r){const i=Kd(e,t.param,t);return{signal:yo(n.get("type"))&&(0,K.kJ)(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}(e,s,r,p):null;return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:a},p?{domain:p}:{}),h?{domainRaw:h}:{}),{range:f}),void 0!==u?{reverse:u}:{}),d)),t}),[])}class ph extends ou{constructor(e,t){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",t)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||be(this.get("domains"),(e=>(0,K.kJ)(e)&&2===e.length&&e[0]<=0&&e[1]>=0))}}const hh=["range","scheme"];function gh(e,t){const n=e.fieldDef(t);if(null==n?void 0:n.bin){const{bin:r,field:i}=n,o=an(t),a=e.getName(o);if((0,K.Kn)(r)&&r.binned&&void 0!==r.step)return new Kp((()=>{const n=e.scaleName(t),i=`(domain("${n}")[1] - domain("${n}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${i})`}));if(lr(r)){const t=cp(e,i,r);return new Kp((()=>{const n=e.getSignalName(t),r=`(${n}.stop - ${n}.start) / ${n}.step`;return`${e.getSignalName(a)} / (${r})`}))}}}function mh(e,t){const n=t.specifiedScales[e],{size:r}=t,i=t.getScaleComponent(e).get("type");for(const r of hh)if(void 0!==n[r]){const o=Ao(i,r),a=No(e,r);if(o)if(a)xi(a);else switch(r){case"range":{const r=n.range;if((0,K.kJ)(r)){if(Rn(e))return au(r.map((e=>{if("width"===e||"height"===e){const n=t.getName(e),r=t.getSignalName.bind(t);return Kp.fromName(r,n)}return e})))}else if((0,K.Kn)(r))return au({data:t.requestDataName(yu.Main),field:r.field,sort:{op:"min",field:t.vgField(e)}});return au(r)}case"scheme":return au(vh(n[r]))}else xi(fi(i,r,e))}const o=e===nt||"xOffset"===e?"width":"height",a=r[o];if(Nl(a))if(Rn(e))if(bo(i)){const n=bh(a,t,e);if(n)return au({step:n})}else xi(pi(o));else if(Nn(e)){const n=e===at?"x":"y";if("band"===t.getScaleComponent(n).get("type")){const e=yh(a,i);if(e)return au(e)}}const{rangeMin:s,rangeMax:l}=n,c=function(e,t){const{size:n,config:r,mark:i,encoding:o}=t,a=t.getSignalName.bind(t),{type:s}=fs(o[e]),l=t.getScaleComponent(e),c=l.get("type"),{domain:u,domainMid:d}=t.specifiedScales[e];switch(e){case nt:case rt:{if(ve(["point","band"],c)){const i=wh(e,n,r.view);if(Nl(i)){return{step:bh(i,t,e)}}}const i=an(e),o=t.getName(i);return e===rt&&yo(c)?[Kp.fromName(a,o),0]:[0,Kp.fromName(a,o)]}case at:case st:return function(e,t,n){const r=e===at?"x":"y",i=t.getScaleComponent(r),o=i.get("type"),a=t.scaleName(r);if("band"===o){const e=wh(r,t.size,t.config.view);if(Nl(e)){const t=yh(e,n);if(t)return t}return[0,{signal:`bandwidth('${a}')`}]}return de(`Cannot use ${e} scale if ${r} scale is not discrete.`)}(e,t,c);case wt:{const o=xh(i,t.component.scales[e].get("zero"),r),a=function(e,t,n,r){const i={x:gh(n,"x"),y:gh(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const e=Sh(t,i,r.view);return(0,K.hj)(e)?e-1:new Kp((()=>`${e.signal} - 1`))}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const e=Sh(t,i,r.view);return(0,K.hj)(e)?Math.pow(Oh*e,2):new Kp((()=>`pow(${Oh} * ${e.signal}, 2)`))}}throw new Error(ii("size",e))}(i,n,t,r);return xo(c)?function(e,t,n){const r=()=>{const r=Dr(t),i=Dr(e),o=`(${r} - ${i}) / (${n} - 1)`;return`sequence(${i}, ${r} + ${o}, ${o})`};return br(t)?new Kp(r):{signal:r()}}(o,a,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&(0,K.kJ)(n)?n.length+1:(xi(function(e){return`Domain for ${e} is required for threshold scale.`}(r)),3)}}(c,r,u,e)):[o,a]}case ut:return[0,2*Math.PI];case xt:return[0,360];case lt:return[0,new Kp((()=>`min(${t.getSignalName("width")},${t.getSignalName("height")})/2`))];case kt:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case jt:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case yt:return"symbol";case mt:case vt:case bt:return"ordinal"===c?"nominal"===s?"category":"ordinal":void 0!==d?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case Ot:case St:case Et:return[r.scale.minOpacity,r.scale.maxOpacity]}}(e,t);return(void 0!==s||void 0!==l)&&Ao(i,"rangeMin")&&(0,K.kJ)(c)&&2===c.length?au([null!=s?s:c[0],null!=l?l:c[1]]):su(c)}function vh(e){return function(e){return!(0,K.HD)(e)&&!!e.name}(e)?Object.assign({scheme:e.name},pe(e,["name"])):{scheme:e}}function bh(e,t,n){var r,i,o,a,s;const{encoding:l}=t,c=t.getScaleComponent(n),u=sn(n),d=l[u];if("offset"===Al({step:e,offsetIsDiscrete:Xa(d)&&Qi(d.type)})&&Fs(l,u)){const n=t.getScaleComponent(u);let l=`domain('${t.scaleName(u)}').length`;if("band"===n.get("type")){l=`bandspace(${l}, ${null!==(i=null!==(r=n.get("paddingInner"))&&void 0!==r?r:n.get("padding"))&&void 0!==i?i:0}, ${null!==(a=null!==(o=n.get("paddingOuter"))&&void 0!==o?o:n.get("padding"))&&void 0!==a?a:0})`}const d=null!==(s=c.get("paddingInner"))&&void 0!==s?s:c.get("padding");return{signal:`${e.step} * ${l} / (1-${f=d,br(f)?f.signal:(0,K.m8)(f)})`}}return e.step;var f}function yh(e,t){if("offset"===Al({step:e,offsetIsDiscrete:bo(t)}))return{step:e.step}}function wh(e,t,n){const r=e===nt?"width":"height",i=t[r];return i||Ml(n,r)}function xh(e,t,n){if(t)return br(t)?{signal:`${t.signal} ? 0 : ${xh(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(ii("size",e))}const Oh=.95;function Sh(e,t,n){const r=Nl(e.width)?e.width.step:Ll(n,"width"),i=Nl(e.height)?e.height.step:Ll(n,"height");return t.x||t.y?new Kp((()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`)):Math.min(r,i)}function Eh(e,t){Nh(e)?function(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(const s of Te(n)){const l=a[s],c=n[s],u=e.getScaleComponent(s),d=fs(i[s]),f=l[t],p=u.get("type"),h=u.get("padding"),g=u.get("paddingInner"),m=Ao(p,t),v=No(s,t);if(void 0!==f&&(m?v&&xi(v):xi(fi(p,t,s))),m&&void 0===v)if(void 0!==f){const e=d.timeUnit,n=d.type;switch(t){case"domainMax":case"domainMin":Oi(l[t])||"temporal"===n||e?c.set(t,{signal:ys(l[t],{type:n,timeUnit:e})},!0):c.set(t,l[t],!0);break;default:c.copyKeyFromObject(t,l)}}else{const n=t in kh?kh[t]({model:e,channel:s,fieldOrDatumDef:d,scaleType:p,scalePadding:h,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:$s(i,s)}):r.scale[t];void 0!==n&&c.set(t,n,!1)}}}(e,t):Ch(e,t)}const kh={bins:({model:e,fieldOrDatumDef:t})=>Ha(t)?function(e,t){const n=t.bin;if(lr(n)){const r=cp(e,t.field,n);return new Kp((()=>e.getSignalName(r)))}if(cr(n)&&ur(n)&&void 0!==n.step)return{step:n.step};return}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function(e,t){if(ve([mt,vt,bt],e)&&"nominal"!==t)return"hcl";return}(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>function(e,t,n,r,i,o){var a;if((null===(a=ds(o))||void 0===a?void 0:a.bin)||(0,K.kJ)(n)||null!=i||null!=r||ve([ao.TIME,ao.UTC],e))return;return!!Rn(t)||void 0}(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>function(e,t,n,r,i,o){if(Rn(e)){if(wo(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:t,orient:a}=i;if("bar"===t&&(!Ha(r)||!r.bin&&!r.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if(t===ao.POINT)return n.pointPadding}return}(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>function(e,t,n,r,i,o=!1){if(void 0!==e)return;if(Rn(t)){const{bandPaddingInner:e,barBandPaddingInner:t,rectBandPaddingInner:r,bandWithNestedOffsetPaddingInner:a}=i;return o?a:We(e,"bar"===n?t:r)}if(Nn(t)&&r===ao.BAND)return i.offsetBandPaddingInner;return}(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>function(e,t,n,r,i,o=!1){if(void 0!==e)return;if(Rn(t)){const{bandPaddingOuter:e,bandWithNestedOffsetPaddingOuter:t}=i;if(o)return t;if(n===ao.BAND)return We(e,br(r)?{signal:`${r.signal}/2`}:r/2)}else if(Nn(t)){if(n===ao.POINT)return.5;if(n===ao.BAND)return i.offsetBandPaddingOuter}return}(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>function(e,t,n,r){if("x"===n&&void 0!==r.xReverse)return yo(e)&&"descending"===t?br(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(yo(e)&&"descending"===t)return!0;return}(t,Ha(e)?e.sort:void 0,n,r.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i})=>function(e,t,n,r,i){if(n&&"unaggregated"!==n&&yo(i)){if((0,K.kJ)(n)){const e=n[0],t=n[n.length-1];if(e<=0&&t>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!xo(i))return!0;if((!Ha(t)||!t.bin)&&ve([...Cn,...Dn],e)){const{orient:t,type:n}=r;return!ve(["bar","area","line","trail"],n)||!("horizontal"===t&&"y"===e||"vertical"===t&&"x"===e)}return!1}(e,t,n,r,i)};function jh(e){Nh(e)?function(e){const t=e.component.scales;for(const n of Gn){const r=t[n];if(!r)continue;const i=mh(n,e);r.setWithExplicit("range",i)}}(e):Ch(e,"range")}function Ch(e,t){const n=e.component.scales;for(const n of e.children)"range"===t?jh(n):Eh(n,t);for(const r of Te(n)){let i;for(const n of e.children){const e=n.component.scales[r];if(e){i=uu(i,e.getWithExplicit(t),t,"scale",lu(((e,n)=>"range"===t&&e.step&&n.step?e.step-n.step:0)))}}n[r].setWithExplicit(t,i)}}function Rh(e,t,n,r,i=!1){const o=function(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":if(zt(e)||"discrete"===Kn(e))return"shape"===e&&"ordinal"===t.type&&xi(li(e,"ordinal")),"ordinal";if(Rn(e)||Nn(e)){if(ve(["rect","bar","image","rule"],n.type))return"band";if(r)return"band"}else if("arc"===n.type&&e in Tn)return"band";return na(n[an(e)])||Za(t)&&(null===(i=t.axis)||void 0===i?void 0:i.tickBand)?"band":"point";case"temporal":return zt(e)?"time":"discrete"===Kn(e)?(xi(li(e,"temporal")),"ordinal"):Ha(t)&&t.timeUnit&&Li(t.timeUnit).utc?"utc":"time";case"quantitative":return zt(e)?Ha(t)&&lr(t.bin)?"bin-ordinal":"linear":"discrete"===Kn(e)?(xi(li(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(ti(t.type))}(t,n,r,i),{type:a}=e;return qn(t)?void 0!==a?function(e,t,n=!1){if(!qn(e))return!1;switch(e){case nt:case rt:case at:case st:case ut:case lt:return!!wo(t)||"band"===t||"point"===t&&!n;case wt:case kt:case Ot:case St:case Et:case xt:return wo(t)||xo(t)||ve(["band","point","ordinal"],t);case mt:case vt:case bt:return"band"!==t;case jt:case yt:return"ordinal"===t||xo(t)}}(t,a)?Ha(n)&&(s=a,l=n.type,!(ve([to,ro],l)?void 0===s||bo(s):l===no?ve([ao.TIME,ao.UTC,void 0],s):l!==eo||ho(s)||xo(s)||void 0===s))?(xi(function(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}(a,o)),o):a:(xi(function(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}(t,a,o)),o):o:null;var s,l}function Th(e){Nh(e)?e.component.scales=function(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of Gn){const a=fs(t[o]);if(a&&n===Xo&&o===yt&&a.type===io)continue;let s=a&&a.scale;if(Nn(o)){if(!$s(t,ln(o))){s&&xi(oi(o));continue}}if(a&&null!==s&&!1!==s){null!=s||(s={});const n=Rh(s,o,a,r,$s(t,o));i[o]=new ph(e.scaleName(`${o}`,!0),{value:n,explicit:s.type===n})}}return i}(e):e.component.scales=function(e){var t,n;const r=e.component.scales={},i={},o=e.component.resolve;for(const r of e.children){Th(r);for(const a of Te(r.component.scales))if(null!==(t=(n=o.scale)[a])&&void 0!==t||(n[a]=$f(a,e)),"shared"===o.scale[a]){const e=i[a],t=r.component.scales[a].getWithExplicit("type");e?lo(e.value,t.value)?i[a]=uu(e,t,"type","scale",Dh):(o.scale[a]="independent",delete i[a]):i[a]=t}}for(const t of Te(i)){const n=e.scaleName(t,!0),o=i[t];r[t]=new ph(n,o);for(const r of e.children){const e=r.component.scales[t];e&&(r.renameScale(e.get("name"),n),e.merged=!0)}}return r}(e)}const Dh=lu(((e,t)=>uo(e)-uo(t)));var Ph=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Ah{constructor(){this.nameMap={}}rename(e,t){this.nameMap[e]=t}has(e){return void 0!==this.nameMap[e]}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function Nh(e){return"unit"===(null==e?void 0:e.type)}function Fh(e){return"facet"===(null==e?void 0:e.type)}function $h(e){return"concat"===(null==e?void 0:e.type)}function Ih(e){return"layer"===(null==e?void 0:e.type)}class _h{constructor(e,t,n,r,i,o,a){var s,l;this.type=t,this.parent=n,this.config=i,this.correctDataNames=e=>{var t,n,r;return(null===(t=e.from)||void 0===t?void 0:t.data)&&(e.from.data=this.lookupDataSource(e.from.data)),(null===(r=null===(n=e.from)||void 0===n?void 0:n.facet)||void 0===r?void 0:r.data)&&(e.from.facet.data=this.lookupDataSource(e.from.facet.data)),e},this.parent=n,this.config=i,this.view=hr(a),this.name=null!==(s=e.name)&&void 0!==s?s:r,this.title=vr(e.title)?{text:e.title}:e.title?hr(e.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new Ah,this.projectionNameMap=n?n.projectionNameMap:new Ah,this.signalNameMap=n?n.signalNameMap:new Ah,this.data=e.data,this.description=e.description,this.transforms=(null!==(l=e.transform)&&void 0!==l?l:[]).map((e=>jc(e)?{filter:le(e.filter,Yi)}:e)),this.layout="layer"===t||"unit"===t?{}:function(e,t,n){var r,i;const o=n[t],a={},{spacing:s,columns:l}=o;void 0!==s&&(a.spacing=s),void 0!==l&&(Na(e)&&!Pa(e.facet)||Tl(e))&&(a.columns=l),Dl(e)&&(a.columns=1);for(const t of $l)if(void 0!==e[t])if("spacing"===t){const n=e[t];a[t]=(0,K.hj)(n)?n:{row:null!==(r=n.row)&&void 0!==r?r:s,column:null!==(i=n.column)&&void 0!==i?i:s}}else a[t]=e[t];return a}(e,t,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:Na(e)||(null==n?void 0:n.component.data.isFaceted)&&void 0===e.data},layoutSize:new ou,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},o?ue(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function(e,{ignoreRange:t}={}){Th(e),Qp(e);for(const t of Po)Eh(e,t);t||jh(e)}(this)}parseProjection(){ap(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Jf(this)}assembleEncodeFromView(e){const{style:t}=e,n=Ph(e,["style"]),r={};for(const e of Te(n)){const t=n[e];void 0!==t&&(r[e]=Rr(t))}return r}assembleGroupEncodeEntry(e){let t={};return this.view&&(t=this.assembleEncodeFromView(this.view)),e||(this.description&&(t.description=Rr(this.description)),"unit"!==this.type&&"layer"!==this.type)?Re(t)?void 0:t:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!=t?t:{})}assembleLayout(){if(!this.layout)return;const e=this.layout,{spacing:t}=e,n=Ph(e,["spacing"]),{component:r,config:i}=this,o=function(e,t){const n={};for(const r of Ut){const i=e[r];if(null==i?void 0:i.facetFieldDef){const{titleAnchor:e,titleOrient:o}=mf(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=hf(r,o),s=Cf(e,a);void 0!==s&&(n[a]=s)}}return Re(n)?void 0:n}(r.layoutHeaders,i);return Object.assign(Object.assign(Object.assign({padding:t},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let t=[];for(const n of Ut)e[n].title&&t.push(yf(this,n));for(const e of vf)t=t.concat(Of(this,e));return t}assembleAxes(){return function(e,t){const{x:n=[],y:r=[]}=e;return[...n.map((e=>tf(e,"grid",t))),...r.map((e=>tf(e,"grid",t))),...n.map((e=>tf(e,"main",t))),...r.map((e=>tf(e,"main",t)))].filter((e=>e))}(this.component.axes,this.config)}assembleLegends(){return tp(this)}assembleProjections(){return np(this)}assembleTitle(){var e,t,n;const r=null!==(e=this.title)&&void 0!==e?e:{},{encoding:i}=r,o=Ph(r,["encoding"]),a=Object.assign(Object.assign(Object.assign({},mr(this.config.title).nonMarkTitleProperties),o),i?{encode:{update:i}}:{});if(a.text)return ve(["unit","layer"],this.type)?ve(["middle",void 0],a.anchor)&&(null!==(t=a.frame)&&void 0!==t||(a.frame="group")):null!==(n=a.anchor)&&void 0!==n||(a.anchor="start"),Re(a)?void 0:a}assembleGroup(e=[]){const t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);const n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Fh(this.parent)?dh(this):[];r.length>0&&(t.scales=r);const i=this.assembleAxes();i.length>0&&(t.axes=i);const o=this.assembleLegends();return o.length>0&&(t.legends=o),t}getName(e){return Ne((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(yu[e].toLowerCase())}requestDataName(e){const t=this.getDataName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t}getSizeSignalRef(e){if(Fh(this.parent)){const t=Pn(Nf(e)),n=this.component.scales[t];if(n&&!n.merged){const e=n.get("type"),r=n.get("range");if(bo(e)&&yr(r)){const e=n.get("name"),r=lh(ch(this,t));if(r){return{signal:Af(e,n,ns({aggregate:"distinct",field:r},{expr:"datum"}))}}return xi(Gr(t)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const t=this.component.data.outputNodes[e];return t?t.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,t){this.signalNameMap.rename(e,t)}renameScale(e,t){this.scaleNameMap.rename(e,t)}renameProjection(e,t){this.projectionNameMap.rename(e,t)}scaleName(e,t){return t?this.getName(e):Qt(e)&&qn(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}projectionName(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,t){let n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(`Cannot find a selection named "${t}".`);return n}hasAxisOrientSignalRef(){var e,t;return(null===(e=this.component.axes.x)||void 0===e?void 0:e.some((e=>e.hasOrientSignalRef())))||(null===(t=this.component.axes.y)||void 0===t?void 0:t.some((e=>e.hasOrientSignalRef())))}}class Lh extends _h{vgField(e,t={}){const n=this.fieldDef(e);if(n)return ns(n,t)}reduceFieldDef(e,t){return function(e,t,n,r){return e?Te(e).reduce(((n,i)=>{const o=e[i];return(0,K.kJ)(o)?o.reduce(((e,n)=>t.call(r,e,n,i)),n):t.call(r,n,o,i)}),n):n}(this.getMapping(),((t,n,r)=>{const i=ds(n);return i?e(t,i,r):t}),t)}forEachFieldDef(e,t){zs(this.getMapping(),((t,n)=>{const r=ds(t);r&&e(r,n)}),t)}}var Mh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class zh extends ju{constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=ue(t);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"value",null!==(i=o[1])&&void 0!==i?i:"density"],t.groupby&&null==t.minsteps&&null==t.maxsteps&&null==t.steps&&(this.transform.steps=200)}clone(){return new zh(null,ue(this.transform))}dependentFields(){var e;return new Set([this.transform.density,...null!==(e=this.transform.groupby)&&void 0!==e?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${ge(this.transform)}`}assemble(){const e=this.transform,{density:t}=e,n=Mh(e,["density"]);return Object.assign({type:"kde",field:t},n)}}class Bh extends ju{constructor(e,t){super(e),this.filter=t}clone(){return new Bh(null,Object.assign({},this.filter))}static make(e,t){const{config:n,mark:r,markDef:i}=t;if("filter"!==Ar("invalid",i,n))return null;const o=t.reduceFieldDef(((e,n,i)=>{const o=qn(i)&&t.getScaleComponent(i);if(o){yo(o.get("type"))&&"count"!==n.aggregate&&!Jo(r)&&(e[n.field]=n)}return e}),{});return Te(o).length?new Bh(e,o):null}dependentFields(){return new Set(Te(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${ge(this.filter)}`}assemble(){const e=Te(this.filter).reduce(((e,t)=>{const n=this.filter[t],r=ns(n,{expr:"datum"});return null!==n&&("temporal"===n.type?e.push(`(isDate(${r}) || (isValid(${r}) && isFinite(+${r})))`):"quantitative"===n.type&&(e.push(`isValid(${r})`),e.push(`isFinite(+${r})`))),e}),[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}class Uh extends ju{constructor(e,t){super(e),this.transform=t,this.transform=ue(t);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map(((e,t)=>{var n;return null!==(n=r[t])&&void 0!==n?n:e}))}clone(){return new Uh(this.parent,ue(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${ge(this.transform)}`}assemble(){const{flatten:e,as:t}=this.transform;return{type:"flatten",fields:e,as:t}}}class Hh extends ju{constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=ue(t);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"key",null!==(i=o[1])&&void 0!==i?i:"value"]}clone(){return new Hh(null,ue(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${ge(this.transform)}`}assemble(){const{fold:e,as:t}=this.transform;return{type:"fold",fields:e,as:t}}}class Wh extends ju{constructor(e,t,n,r){super(e),this.fields=t,this.geojson=n,this.signal=r}clone(){return new Wh(null,ue(this.fields),this.geojson,this.signal)}static parseAll(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;let n=0;for(const r of[[pt,ft],[gt,ht]]){const i=r.map((e=>{const n=fs(t.encoding[e]);return Ha(n)?n.field:Ga(n)?{expr:`${n.datum}`}:Ya(n)?{expr:`${n.value}`}:void 0}));(i[0]||i[1])&&(e=new Wh(e,i,null,t.getName("geojson_"+n++)))}if(t.channelHasField(yt)){const r=t.typedFieldDef(yt);r.type===io&&(e=new Wh(e,null,r.field,t.getName("geojson_"+n++)))}return e}dependentFields(){var e;const t=(null!==(e=this.fields)&&void 0!==e?e:[]).filter(K.HD);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${ge(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class Gh extends ju{constructor(e,t,n,r){super(e),this.projection=t,this.fields=n,this.as=r}clone(){return new Gh(null,this.projection,ue(this.fields),ue(this.as))}static parseAll(e,t){if(!t.projectionName())return e;for(const n of[[pt,ft],[gt,ht]]){const r=n.map((e=>{const n=fs(t.encoding[e]);return Ha(n)?n.field:Ga(n)?{expr:`${n.datum}`}:Ya(n)?{expr:`${n.value}`}:void 0})),i=n[0]===gt?"2":"";(r[0]||r[1])&&(e=new Gh(e,t.projectionName(),r,[t.getName(`x${i}`),t.getName(`y${i}`)]))}return e}dependentFields(){return new Set(this.fields.filter(K.HD))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${ge(this.fields)} ${ge(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class qh extends ju{constructor(e,t){super(e),this.transform=t}clone(){return new qh(null,ue(this.transform))}dependentFields(){var e;return new Set([this.transform.impute,this.transform.key,...null!==(e=this.transform.groupby)&&void 0!==e?e:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:t=0,stop:n,step:r}=e;return{signal:`sequence(${[t,n,...r?[r]:[]].join(",")})`}}static makeFromTransform(e,t){return new qh(e,t)}static makeFromEncoding(e,t){const n=t.encoding,r=n.x,i=n.y;if(Ha(r)&&Ha(i)){const o=r.impute?r:i.impute?i:void 0;if(void 0===o)return;const a=r.impute?i:i.impute?r:void 0,{method:s,value:l,frame:c,keyvals:u}=o.impute,d=Bs(t.mark,n);return new qh(e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:a.field},s?{method:s}:{}),void 0!==l?{value:l}:{}),c?{frame:c}:{}),void 0!==u?{keyvals:u}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${ge(this.transform)}`}assemble(){const{impute:e,key:t,keyvals:n,method:r,groupby:i,value:o,frame:a=[null,null]}=this.transform,s=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:e,key:t},n?{keyvals:Cc(n)?this.processSequence(n):n}:{}),{method:"value"}),i?{groupby:i}:{}),{value:r&&"value"!==r?null:o});if(r&&"value"!==r){return[s,Object.assign({type:"window",as:[`imputed_${e}_value`],ops:[r],fields:[e],frame:a,ignorePeers:!1},i?{groupby:i}:{}),{type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e}]}return[s]}}var Vh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Xh extends ju{constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=ue(t);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:t.on,null!==(i=o[1])&&void 0!==i?i:t.loess]}clone(){return new Xh(null,ue(this.transform))}dependentFields(){var e;return new Set([this.transform.loess,this.transform.on,...null!==(e=this.transform.groupby)&&void 0!==e?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${ge(this.transform)}`}assemble(){const e=this.transform,{loess:t,on:n}=e,r=Vh(e,["loess","on"]);return Object.assign({type:"loess",x:n,y:t},r)}}class Jh extends ju{constructor(e,t,n){super(e),this.transform=t,this.secondary=n}clone(){return new Jh(null,ue(this.transform),this.secondary)}static make(e,t,n,r){const i=t.component.data.sources,{from:o}=n;let a=null;if(function(e){return"data"in e}(o)){let e=fg(o.data,i);e||(e=new Op(o.data),i.push(e));const n=t.getName(`lookup_${r}`);a=new Cu(e,n,yu.Lookup,t.component.data.outputNodeRefCounts),t.component.data.outputNodes[n]=a}else if(function(e){return"param"in e}(o)){const e=o.param;let r;n=Object.assign({as:e},n);try{r=t.getSelectionComponent(Ne(e),e)}catch(t){throw new Error(`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`)}if(a=r.materialized,!a)throw new Error(function(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}(e))}return new Jh(e,n,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?(0,K.IX)(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${ge({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e=Object.assign({values:this.transform.from.fields},this.transform.as?{as:(0,K.IX)(this.transform.as)}:{});else{let t=this.transform.as;(0,K.HD)(t)||(xi('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),t="_lookup"),e={as:[t]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e),this.transform.default?{default:this.transform.default}:{})}}var Yh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Kh extends ju{constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=ue(t);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"prob",null!==(i=o[1])&&void 0!==i?i:"value"]}clone(){return new Kh(null,ue(this.transform))}dependentFields(){var e;return new Set([this.transform.quantile,...null!==(e=this.transform.groupby)&&void 0!==e?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${ge(this.transform)}`}assemble(){const e=this.transform,{quantile:t}=e,n=Yh(e,["quantile"]);return Object.assign({type:"quantile",field:t},n)}}var Zh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Qh extends ju{constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=ue(t);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:t.on,null!==(i=o[1])&&void 0!==i?i:t.regression]}clone(){return new Qh(null,ue(this.transform))}dependentFields(){var e;return new Set([this.transform.regression,this.transform.on,...null!==(e=this.transform.groupby)&&void 0!==e?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${ge(this.transform)}`}assemble(){const e=this.transform,{regression:t,on:n}=e,r=Zh(e,["regression","on"]);return Object.assign({type:"regression",x:n,y:t},r)}}class eg extends ju{constructor(e,t){super(e),this.transform=t}clone(){return new eg(null,ue(this.transform))}addDimensions(e){var t;this.transform.groupby=Oe((null!==(t=this.transform.groupby)&&void 0!==t?t:[]).concat(e),(e=>e))}producedFields(){}dependentFields(){var e;return new Set([this.transform.pivot,this.transform.value,...null!==(e=this.transform.groupby)&&void 0!==e?e:[]])}hash(){return`PivotTransform ${ge(this.transform)}`}assemble(){const{pivot:e,value:t,groupby:n,limit:r,op:i}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:e,value:t},void 0!==r?{limit:r}:{}),void 0!==i?{op:i}:{}),void 0!==n?{groupby:n}:{})}}class tg extends ju{constructor(e,t){super(e),this.transform=t}clone(){return new tg(null,ue(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${ge(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function ng(e){let t=0;return function n(r,i){var o;if(r instanceof Op&&!r.isGenerator&&!fu(r.data)){e.push(i);i={name:null,source:i.name,transform:[]}}if(r instanceof bp&&(r.parent instanceof Op&&!i.source?(i.format=Object.assign(Object.assign({},null!==(o=i.format)&&void 0!==o?o:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof hp)return i.name||(i.name="data_"+t++),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,void e.push(...r.assemble());if((r instanceof wp||r instanceof xp||r instanceof Bh||r instanceof Jd||r instanceof ff||r instanceof Gh||r instanceof pp||r instanceof Jh||r instanceof Hp||r instanceof Bp||r instanceof Hh||r instanceof Uh||r instanceof zh||r instanceof Xh||r instanceof Kh||r instanceof Qh||r instanceof yp||r instanceof tg||r instanceof eg)&&i.transform.push(r.assemble()),(r instanceof dp||r instanceof Tu||r instanceof qh||r instanceof Up||r instanceof Wh)&&i.transform.push(...r.assemble()),r instanceof Cu)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof Cu)r.setSource(i.name);else if(i.name||(i.name="data_"+t++),r.setSource(i.name),1===r.numChildren()){e.push(i);i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof Cu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+t++);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const e of r.children){n(e,{name:null,source:o,transform:[]})}break}}}}function rg(e){return"top"===e||"left"===e||br(e)?"header":"footer"}function ig(e,t){var n;const{facet:r,config:i,child:o,component:a}=e;if(e.channelHasField(t)){const s=r[t],l=gf("title",null,i,t);let c=ss(s,i,{allowDisabling:!0,includeDefault:void 0===l||!!l});o.component.layoutHeaders[t].title&&(c=(0,K.kJ)(c)?c.join(", "):c,c+=` / ${o.component.layoutHeaders[t].title}`,o.component.layoutHeaders[t].title=null);const u=gf("labelOrient",s.header,i,t),d=null!==s.header&&We(null===(n=s.header)||void 0===n?void 0:n.labels,i.header.labels,!0),f=ve(["bottom","right"],u)?"footer":"header";a.layoutHeaders[t]={title:null!==s.header?c:null,facetFieldDef:s,[f]:"facet"===t?[]:[og(e,t,d)]}}}function og(e,t,n){const r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function ag(e,t){var n;const{child:r}=e;if(r.component.axes[t]){const{layoutHeaders:i,resolve:o}=e.component;if(o.axis[t]=If(o,t),"shared"===o.axis[t]){const o="x"===t?"column":"row",a=i[o];for(const i of r.component.axes[t]){const t=rg(i.get("orient"));null!==(n=a[t])&&void 0!==n||(a[t]=[og(e,o,!1)]);const r=tf(i,"main",e.config,{header:!0});r&&a[t][0].axes.push(r),i.mainExtracted=!0}}}}function sg(e){for(const t of e.children)t.parseLayoutSize()}function lg(e,t){var n;const r=Nf(t),i=Pn(r),o=e.component.resolve,a=e.component.layoutSize;let s;for(const t of e.children){const a=t.component.layoutSize.getWithExplicit(r),l=null!==(n=o.scale[i])&&void 0!==n?n:$f(i,e);if("independent"===l&&"step"===a.value){s=void 0;break}if(s){if("independent"===l&&s.value!==a.value){s=void 0;break}s=uu(s,a,r,"")}else s=a}if(s){for(const n of e.children)e.renameSignal(n.getName(r),e.getName(t)),n.component.layoutSize.set(r,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function cg(e,t){const n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const e=i.get("type"),n=i.get("range");if(bo(e)){const e=Ml(r.view,t);return yr(n)||Nl(e)?"step":e}return _l(r.view,t)}if(e.hasProjection||"arc"===e.mark)return _l(r.view,t);{const e=Ml(r.view,t);return Nl(e)?e.step:e}}function ug(e,t,n){return ns(t,Object.assign({suffix:`by_${ns(e)}`},null!=n?n:{}))}class dg extends Lh{constructor(e,t,n,r){super(e,"facet",t,n,r,e.resolve),this.child=Ig(e.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!Pa(e))return{facet:this.initFacetFieldDef(e,"facet")};const t=Te(e),n={};for(const r of t){if(![Qe,et].includes(r)){xi(ii(r,"facet"));break}const t=e[r];if(void 0===t.field){xi(ri(t,r));break}n[r]=this.initFacetFieldDef(t,r)}return n}initFacetFieldDef(e,t){const n=gs(e,t);return n.header?n.header=hr(n.header):null===n.header&&(n.header=null),n}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=pg(this),this.child.parseData()}parseLayoutSize(){sg(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function(e){for(const t of Ut)ig(e,t);ag(e,"x"),ag(e,"y")}(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){var e,t,n;const r={};for(const i of Ut)for(const o of bf){const a=this.component.layoutHeaders[i],s=a[o],{facetFieldDef:l}=a;if(l){const t=gf("titleOrient",l.header,this.config,i);if(["right","bottom"].includes(t)){const n=hf(i,t);null!==(e=r.titleAnchor)&&void 0!==e||(r.titleAnchor={}),r.titleAnchor[n]="end"}}if(null==s?void 0:s[0]){const e="row"===i?"height":"width",s="header"===o?"headerBand":"footerBand";"facet"===i||this.child.component.layoutSize.get(e)||(null!==(t=r[s])&&void 0!==t||(r[s]={}),r[s][i]=.5),a.title&&(null!==(n=r.offset)&&void 0!==n||(r.offset={}),r.offset["row"===i?"rowTitle":"columnTitle"]=10)}}return r}assembleDefaultLayout(){const{column:e,row:t}=this.facet,n=e?this.columnDistinctSignal():t?1:void 0;let r="all";return(t||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(r="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),n?{columns:n}:{}),{bounds:"full",align:r})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof dg)){return{signal:`length(data('${this.getName("column_domain")}'))`}}}assembleGroupStyle(){}assembleGroup(e){return this.parent&&this.parent instanceof dg?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:ns(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(e)):super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],t=[],n=[];if(this.child instanceof dg){if(this.child.channelHasField("column")){const r=ns(this.child.facet.column);e.push(r),t.push("distinct"),n.push(`distinct_${r}`)}}else for(const r of Cn){const i=this.child.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(bo(o)&&yr(a)){const i=lh(ch(this.child,r));i?(e.push(i),t.push("distinct"),n.push(`distinct_${i}`)):xi(Gr(r))}}}return{fields:e,ops:t,as:n}}assembleFacet(){const{name:e,data:t}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:o,as:a}=this.getCardinalityAggregateForChild(),s=[];for(const e of Ut){const t=this.facet[e];if(t){s.push(ns(t));const{bin:l,sort:c}=t;if(lr(l)&&s.push(ns(t,{binSuffix:"end"})),Ta(c)){const{field:e,op:s=ka}=c,l=ug(t,c);n&&r?(i.push(l),o.push("max"),a.push(l)):(i.push(e),o.push(s),a.push(l))}else if((0,K.kJ)(c)){const n=pf(t,e);i.push(n),o.push("max"),a.push(n)}}}const l=!!n&&!!r;return Object.assign({name:e,data:t,groupby:s},l||i.length>0?{aggregate:Object.assign(Object.assign({},l?{cross:l}:{}),i.length?{fields:i,ops:o,as:a}:{})}:{})}facetSortFields(e){const{facet:t}=this,n=t[e];return n?Ta(n.sort)?[ug(n,n.sort,{expr:"datum"})]:(0,K.kJ)(n.sort)?[pf(n,e,{expr:"datum"})]:[ns(n,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:t}=this,n=t[e];if(n){const{sort:e}=n;return[(Ta(e)?e.order:!(0,K.kJ)(e)&&e)||"ascending"]}return[]}assembleLabelTitle(){var e;const{facet:t,config:n}=this;if(t.facet)return Ef(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const i of vf)if(t[i]){const o=gf("labelOrient",null===(e=t[i])||void 0===e?void 0:e.header,n,i);if(r[i].includes(o))return Ef(t[i],i,n)}}assembleMarks(){const{child:e}=this,t=function(e){const t=[],n=ng(t);for(const t of e.children)n(t,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),n=e.assembleGroupEncodeEntry(!1),r=this.assembleLabelTitle()||e.assembleTitle(),i=e.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},r?{title:r}:{}),i?{style:i}:{}),{from:{facet:this.assembleFacet()},sort:{field:Ut.map((e=>this.facetSortFields(e))).flat(),order:Ut.map((e=>this.facetSortOrder(e))).flat()}}),t.length>0?{data:t}:{}),n?{encode:{update:n}}:{}),e.assembleGroup(function(e,t){if(e.component.selection&&Te(e.component.selection).length){const n=(0,K.m8)(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:(0,wu.r)("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return ku(t)}(this,[])))]}getMapping(){return this.facet}}function fg(e,t){var n,r,i,o;for(const a of t){const t=a.data;if(e.name&&a.hasName()&&e.name!==a.dataName)continue;const s=null===(n=e.format)||void 0===n?void 0:n.mesh,l=null===(r=t.format)||void 0===r?void 0:r.feature;if(s&&l)continue;const c=null===(i=e.format)||void 0===i?void 0:i.feature;if((c||l)&&c!==l)continue;const u=null===(o=t.format)||void 0===o?void 0:o.mesh;if(!s&&!u||s===u)if(pu(e)&&pu(t)){if(ce(e.values,t.values))return a}else if(fu(e)&&fu(t)){if(e.url===t.url)return a}else if(hu(e)&&e.name===a.dataName)return a}return null}function pg(e){var t,n,r,i,o,a,s,l,c,u;let d=function(e,t){if(e.data||!e.parent){if(null===e.data){const e=new Op({values:[]});return t.push(e),e}const n=fg(e.data,t);if(n)return gu(e.data)||(n.data.format=we({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const n=new Op(e.data);return t.push(n),n}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:f,outputNodeRefCounts:p}=e.component.data,h=e.data,g=!(h&&(gu(h)||fu(h)||pu(h)))&&e.parent?e.parent.component.data.ancestorParse.clone():new du;gu(h)?(mu(h)?d=new xp(d,h.sequence):bu(h)&&(d=new wp(d,h.graticule)),g.parseNothing=!0):null===(null===(t=null==h?void 0:h.format)||void 0===t?void 0:t.parse)&&(g.parseNothing=!0),d=null!==(n=bp.makeExplicit(d,e,g))&&void 0!==n?n:d,d=new yp(d);const m=e.parent&&Ih(e.parent);(Nh(e)||Fh(e))&&m&&(d=null!==(r=dp.makeFromEncoding(d,e))&&void 0!==r?r:d),e.transforms.length>0&&(d=function(e,t,n){var r,i;let o=0;for(const a of t.transforms){let s,l;if(Lc(a))l=e=new ff(e,a),s="derived";else if(jc(a)){const i=mp(a);l=e=null!==(r=bp.makeWithAncestors(e,{},i,n))&&void 0!==r?r:e,e=new Jd(e,t,a.filter)}else if(Mc(a))l=e=dp.makeFromTransform(e,a,t),s="number";else if(Bc(a))s="date",void 0===n.getWithExplicit(a.field).value&&(e=new bp(e,{[a.field]:s}),n.set(a.field,s,!1)),l=e=Tu.makeFromTransform(e,a);else if(Uc(a))l=e=pp.makeFromTransform(e,a),s="number",Hd(t)&&(e=new yp(e));else if(Rc(a))l=e=Jh.make(e,t,a,o++),s="derived";else if($c(a))l=e=new Hp(e,a),s="number";else if(Ic(a))l=e=new Bp(e,a),s="number";else if(Hc(a))l=e=Up.makeFromTransform(e,a),s="derived";else if(Wc(a))l=e=new Hh(e,a),s="derived";else if(_c(a))l=e=new Uh(e,a),s="derived";else if(Tc(a))l=e=new eg(e,a),s="derived";else if(Fc(a))e=new tg(e,a);else if(zc(a))l=e=qh.makeFromTransform(e,a),s="derived";else if(Dc(a))l=e=new zh(e,a),s="derived";else if(Pc(a))l=e=new Kh(e,a),s="derived";else if(Ac(a))l=e=new Qh(e,a),s="derived";else{if(!Nc(a)){xi(`Ignoring an invalid transform: ${he(a)}.`);continue}l=e=new Xh(e,a),s="derived"}if(l&&void 0!==s)for(const e of null!==(i=l.producedFields())&&void 0!==i?i:[])n.set(e,s,!1)}return e}(d,e,g));const v=function(e){const t={};if(Nh(e)&&e.component.selection)for(const n of Te(e.component.selection)){const r=e.component.selection[n];for(const e of r.project.items)!e.channel&&He(e.field)>1&&(t[e.field]="flatten")}return t}(e),b=vp(e);d=null!==(i=bp.makeWithAncestors(d,{},Object.assign(Object.assign({},v),b),g))&&void 0!==i?i:d,Nh(e)&&(d=Wh.parseAll(d,e),d=Gh.parseAll(d,e)),(Nh(e)||Fh(e))&&(m||(d=null!==(o=dp.makeFromEncoding(d,e))&&void 0!==o?o:d),d=null!==(a=Tu.makeFromEncoding(d,e))&&void 0!==a?a:d,d=ff.parseAllForSortIndex(d,e));const y=e.getDataName(yu.Raw),w=new Cu(d,y,yu.Raw,p);if(f[y]=w,d=w,Nh(e)){const t=pp.makeFromEncoding(d,e);t&&(d=t,Hd(e)&&(d=new yp(d))),d=null!==(s=qh.makeFromEncoding(d,e))&&void 0!==s?s:d,d=null!==(l=Up.makeFromEncoding(d,e))&&void 0!==l?l:d}Nh(e)&&(d=null!==(c=Bh.make(d,e))&&void 0!==c?c:d);const x=e.getDataName(yu.Main),O=new Cu(d,x,yu.Main,p);f[x]=O,d=O,Nh(e)&&function(e,t){var n;for(const[r,i]of Pe(null!==(n=e.component.selection)&&void 0!==n?n:{})){const n=e.getName(`lookup_${r}`);e.component.data.outputNodes[n]=i.materialized=new Cu(new Jd(t,e,{param:r}),n,yu.Lookup,e.component.data.outputNodeRefCounts)}}(e,O);let S=null;if(Fh(e)){const t=e.getName("facet");d=null!==(u=function(e,t){const{row:n,column:r}=t;if(n&&r){let t=null;for(const i of[n,r])if(Ta(i.sort)){const{field:n,op:r=ka}=i.sort;e=t=new Bp(e,{joinaggregate:[{op:r,field:n,as:ug(i,i.sort,{forAs:!0})}],groupby:[ns(i)]})}return t}return null}(d,e.facet))&&void 0!==u?u:d,S=new hp(d,e,t,O.getSource()),f[t]=S}return Object.assign(Object.assign({},e.component.data),{outputNodes:f,outputNodeRefCounts:p,raw:w,main:O,facetRoot:S,ancestorParse:g})}class hg extends _h{constructor(e,t,n,r){var i,o,a,s;super(e,"concat",t,n,r,e.resolve),"shared"!==(null===(o=null===(i=e.resolve)||void 0===i?void 0:i.axis)||void 0===o?void 0:o.x)&&"shared"!==(null===(s=null===(a=e.resolve)||void 0===a?void 0:a.axis)||void 0===s?void 0:s.y)||xi("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),this.children=this.getChildren(e).map(((e,t)=>Ig(e,this,this.getName(`concat_${t}`),void 0,r)))}parseData(){this.component.data=pg(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of Te(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return Dl(e)?e.vconcat:Pl(e)?e.hconcat:e.concat}parseLayoutSize(){!function(e){sg(e);const t=1===e.layout.columns?"width":"childWidth",n=void 0===e.layout.columns?"height":"childHeight";lg(e,t),lg(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.forEach((e=>e.assembleSignals())),[]}assembleLayoutSignals(){const e=Tf(this);for(const t of this.children)e.push(...t.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleMarks(){return this.children.map((e=>{const t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:e.getName("group")},t?{title:t}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),e.assembleGroup())}))}assembleGroupStyle(){}assembleDefaultLayout(){const e=this.layout.columns;return Object.assign(Object.assign({},null!=e?{columns:e}:{}),{bounds:"full",align:"each"})}}const gg=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},js),{labelExpr:1,encode:1}),mg=Te(gg);class vg extends ou{constructor(e={},t={},n=!1){super(),this.explicit=e,this.implicit=t,this.mainExtracted=n}clone(){return new vg(ue(this.explicit),ue(this.implicit),this.mainExtracted)}hasAxisPart(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!(!1===(t=this.get(e))||null===t));var t}hasOrientSignalRef(){return br(this.explicit.orient)}}const bg={bottom:"top",top:"bottom",left:"right",right:"left"};function yg(e,t){if(!e)return t.map((e=>e.clone()));{if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const n=e[r],i=t[r];if(!!n!=!!i)return;if(n&&i){const t=n.getWithExplicit("orient"),o=i.getWithExplicit("orient");if(t.explicit&&o.explicit&&t.value!==o.value)return;e[r]=wg(n,i)}}}return e}function wg(e,t){for(const n of mg){const r=uu(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",((e,t)=>{switch(n){case"title":return Mr(e,t);case"gridScale":return{explicit:e.explicit,value:We(e.value,t.value)}}return cu(e,t,n,"axis")}));e.setWithExplicit(n,r)}return e}function xg(e,t,n,r,i){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(br(n.labelAngle)?n.labelAngle:Ye(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===df(r,i))return!0}return e===n[t]}const Og=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Sg(e,t){var n,r,i;let o=t.axis(e);const a=new vg,s=fs(t.encoding[e]),{mark:l,config:c}=t,u=(null==o?void 0:o.orient)||(null===(n=c["x"===e?"axisX":"axisY"])||void 0===n?void 0:n.orient)||(null===(r=c.axis)||void 0===r?void 0:r.orient)||function(e){return"x"===e?"bottom":"left"}(e),d=t.getScaleComponent(e).get("type"),f=function(e,t,n,r){const i="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:ho(t)?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[],o="x"===e?"axisX":"axisY",a=br(n)?"axisOrient":`axis${Ie(n)}`,s=[...i,...i.map((e=>o+e.substr(4)))],l=["axis",a,o];return{vlOnlyAxisConfig:rf(s,r,e,n),vgAxisConfig:rf(l,r,e,n),axisConfigStyle:of([...l,...s],r)}}(e,d,u,t.config),p=void 0!==o?!o:af("disable",c.style,null==o?void 0:o.style,f).configValue;if(a.set("disable",p,void 0!==o),p)return a;o=o||{};const h=function(e,t,n,r,i){const o=null==t?void 0:t.labelAngle;if(void 0!==o)return br(o)?o:Ye(o);{const{configValue:o}=af("labelAngle",r,null==t?void 0:t.style,i);return void 0!==o?Ye(o):n!==nt||!ve([ro,to],e.type)||Ha(e)&&e.timeUnit?void 0:270}}(s,o,e,c.style,f),g={fieldOrDatumDef:s,axis:o,channel:e,model:t,scaleType:d,orient:u,labelAngle:h,mark:l,config:c};for(const n of mg){const r=n in sf?sf[n](g):Rs(n)?o[n]:void 0,i=void 0!==r,s=xg(r,n,o,t,e);if(i&&s)a.set(n,r,s);else{const{configValue:e,configFrom:t}=Rs(n)&&"values"!==n?af(n,c.style,o.style,f):{},l=void 0!==e;i&&!l?a.set(n,r,s):("vgAxisConfig"!==t||Og.has(n)&&l||Ss(e)||br(e))&&a.set(n,e,!1)}}const m=null!==(i=o.encoding)&&void 0!==i?i:{},v=Es.reduce(((n,r)=>{var i;if(!a.hasAxisPart(r))return n;const o=Ff(null!==(i=m[r])&&void 0!==i?i:{},t),s="labels"===r?function(e,t,n){var r;const{encoding:i,config:o}=e,a=null!==(r=fs(i[t]))&&void 0!==r?r:fs(i[on(t)]),s=e.axis(t)||{},{format:l,formatType:c}=s;if(pa(c))return Object.assign({text:ba({fieldOrDatumDef:a,field:"datum.value",format:l,formatType:c,config:o})},n);if(void 0===l&&void 0===c&&o.customFormatTypes){if("quantitative"===Wa(a)){if(Za(a)&&"normalize"===a.stack&&o.normalizedNumberFormatType)return Object.assign({text:ba({fieldOrDatumDef:a,field:"datum.value",format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,config:o})},n);if(o.numberFormatType)return Object.assign({text:ba({fieldOrDatumDef:a,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o})},n)}if("temporal"===Wa(a)&&o.timeFormatType&&Ha(a)&&!a.timeUnit)return Object.assign({text:ba({fieldOrDatumDef:a,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})},n)}return n}(t,e,o):o;return void 0===s||Re(s)||(n[r]={update:s}),n}),{});return Re(v)||a.set("encode",v,!!o.encoding||void 0!==o.labelAngle),a}function Eg(e,t,n){const r=hr(e),i=Ar("orient",r,n);if(r.orient=function(e,t,n){switch(e){case zo:case qo:case Vo:case Ho:case Bo:case Lo:return}const{x:r,y:i,x2:o,y2:a}=t;switch(e){case _o:if(Ha(r)&&(cr(r.bin)||Ha(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ha(i)&&(cr(i.bin)||Ha(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o&&(Ha(r)&&r.type===eo&&!lr(r.bin)||Va(r)))return"horizontal";if(!a&&(Ha(i)&&i.type===eo&&!lr(i.bin)||Va(i)))return"vertical"}case Uo:if(o&&(!Ha(r)||!cr(r.bin))&&a&&(!Ha(i)||!cr(i.bin)))return;case Io:if(a)return Ha(i)&&cr(i.bin)?"horizontal":"vertical";if(o)return Ha(r)&&cr(r.bin)?"vertical":"horizontal";if(e===Uo){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case Mo:case Wo:{const t=qa(r),o=qa(i);if(n)return n;if(t&&!o)return"tick"!==e?"horizontal":"vertical";if(!t&&o)return"tick"!==e?"vertical":"horizontal";if(t&&o){const t=r,n=i,o=t.type===no,a=n.type===no;return o&&!a?"tick"!==e?"vertical":"horizontal":!o&&a?"tick"!==e?"horizontal":"vertical":!t.aggregate&&n.aggregate?"tick"!==e?"vertical":"horizontal":t.aggregate&&!n.aggregate&&"tick"!==e?"horizontal":"vertical"}return}}return"vertical"}(r.type,t,i),void 0!==i&&i!==r.orient&&xi(`Specified orient "${r.orient}" overridden with "${i}".`),"bar"===r.type&&r.orient){const e=Ar("cornerRadiusEnd",r,n);if(void 0!==e){const n="horizontal"===r.orient&&t.x2||"vertical"===r.orient&&t.y2?["cornerRadius"]:ra[r.orient];for(const t of n)r[t]=e;void 0!==r.cornerRadiusEnd&&delete r.cornerRadiusEnd}}void 0===Ar("opacity",r,n)&&(r.opacity=function(e,t){if(ve([zo,Wo,qo,Vo],e)&&!Is(t))return.7;return}(r.type,t));return void 0===Ar("cursor",r,n)&&(r.cursor=function(e,t,n){if(t.href||e.href||Ar("href",e,n))return"pointer";return e.cursor}(r,t,n)),r}function kg(e,t){const{config:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},md(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),rd("x",e,{defaultPos:"mid"})),rd("y",e,{defaultPos:"mid"})),ed("size",e)),ed("angle",e)),function(e,t,n){if(n)return{shape:{value:n}};return ed("shape",e)}(e,0,t))}const jg={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},md(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),ld("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n})),ld("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n})),ed("size",e,{vgChannel:"strokeWidth"})):{}}};const Cg={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i="horizontal"===r?"width":"height",o="horizontal"===r?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},md(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),rd("x",e,{defaultPos:"mid",vgChannel:"xc"})),rd("y",e,{defaultPos:"mid",vgChannel:"yc"})),ed("size",e,{defaultValue:Rg(e),vgChannel:i})),{[o]:Rr(Ar("thickness",n,t))})}};function Rg(e){var t;const{config:n,markDef:r}=e,{orient:i}=r,o="horizontal"===i?"width":"height",a=e.getScaleComponent("horizontal"===i?"x":"y"),s=null!==(t=Ar("size",r,n,{vgChannel:o}))&&void 0!==t?t:n.tick.bandSize;if(void 0!==s)return s;{const e=a?a.get("range"):void 0;if(e&&yr(e)&&(0,K.hj)(e.step))return 3*e.step/4;return 3*Ll(n.view,o)/4}}const Tg={arc:{vgMark:"arc",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},md(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),rd("x",e,{defaultPos:"mid"})),rd("y",e,{defaultPos:"mid"})),dd(e,"radius")),dd(e,"theta"))},area:{vgMark:"area",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},md(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),ld("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient})),ld("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient})),bd(e))},bar:{vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},md(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),dd(e,"x")),dd(e,"y"))},circle:{vgMark:"symbol",encodeEntry:e=>kg(e,"circle")},geoshape:{vgMark:"shape",encodeEntry:e=>Object.assign({},md(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},n&&Ha(n)&&n.type===io?{field:ns(n,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},md(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),dd(e,"x")),dd(e,"y")),Xu(e,"url"))},line:{vgMark:"line",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},md(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),rd("x",e,{defaultPos:"mid"})),rd("y",e,{defaultPos:"mid"})),ed("size",e,{vgChannel:"strokeWidth"})),bd(e))},point:{vgMark:"symbol",encodeEntry:e=>kg(e)},rect:{vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},md(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),dd(e,"x")),dd(e,"y"))},rule:jg,square:{vgMark:"symbol",encodeEntry:e=>kg(e,"square")},text:{vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},md(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),rd("x",e,{defaultPos:"mid"})),rd("y",e,{defaultPos:"mid"})),Xu(e)),ed("size",e,{vgChannel:"fontSize"})),ed("angle",e)),yd("align",function(e,t,n){const r=Ar("align",e,n);if(void 0===r)return"center";return}(e.markDef,0,t))),yd("baseline",function(e,t,n){const r=Ar("baseline",e,n);if(void 0===r)return"middle";return}(e.markDef,0,t))),rd("radius",e,{defaultPos:null})),rd("theta",e,{defaultPos:null}))}},tick:Cg,trail:{vgMark:"trail",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},md(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),rd("x",e,{defaultPos:"mid"})),rd("y",e,{defaultPos:"mid"})),ed("size",e)),bd(e))}};function Dg(e){if(ve([Mo,Io,Go],e.mark)){const t=Bs(e.mark,e.encoding);if(t.length>0)return function(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Pg+e.requestDataName(yu.Main),data:e.requestDataName(yu.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Ng(e,{fromPrefix:Pg})}]}(e,t)}else if(e.mark===_o){const t=Sr.some((t=>Ar(t,e.markDef,e.config)));if(e.stack&&!e.fieldDef("size")&&t)return function(e){var t;const[n]=Ng(e,{fromPrefix:Ag}),r=e.scaleName(e.stack.fieldChannel),i=(t={})=>e.vgField(e.stack.fieldChannel,t),o=(e,t)=>`${e}(${[i({prefix:"min",suffix:"start",expr:t}),i({prefix:"max",suffix:"start",expr:t}),i({prefix:"min",suffix:"end",expr:t}),i({prefix:"max",suffix:"end",expr:t})].map((e=>`scale('${r}',${e})`)).join(",")})`;let a,s;"x"===e.stack.fieldChannel?(a=Object.assign(Object.assign({},fe(n.encode.update,["y","yc","y2","height",...Sr])),{x:{signal:o("min","datum")},x2:{signal:o("max","datum")},clip:{value:!0}}),s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},pe(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(a=Object.assign(Object.assign({},fe(n.encode.update,["x","xc","x2","width"])),{y:{signal:o("min","datum")},y2:{signal:o("max","datum")},clip:{value:!0}}),s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},pe(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const t of Sr){const r=Nr(t,e.markDef,e.config);n.encode.update[t]?(a[t]=n.encode.update[t],delete n.encode.update[t]):r&&(a[t]=Rr(r)),r&&(n.encode.update[t]={value:0})}const l=[];if((null===(t=e.stack.groupbyChannels)||void 0===t?void 0:t.length)>0)for(const t of e.stack.groupbyChannels){const n=e.fieldDef(t),r=ns(n);r&&l.push(r),((null==n?void 0:n.bin)||(null==n?void 0:n.timeUnit))&&l.push(ns(n,{binSuffix:"end"}))}a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce(((t,r)=>{if(n.encode.update[r])return Object.assign(Object.assign({},t),{[r]:n.encode.update[r]});{const n=Nr(r,e.markDef,e.config);return void 0!==n?Object.assign(Object.assign({},t),{[r]:Rr(n)}):t}}),a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0});return[{type:"group",from:{facet:{data:e.requestDataName(yu.Main),name:Ag+e.requestDataName(yu.Main),groupby:l,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[n]}]}]}(e)}return Ng(e)}const Pg="faceted_path_";const Ag="stack_group_";function Ng(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,a=We(r.clip,function(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!(!(null==t?void 0:t.get("selectionExtent"))&&!(null==n?void 0:n.get("selectionExtent")))||void 0}(e),function(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),s=Pr(r),l=i.key,c=function(e){var t;const{encoding:n,stack:r,mark:i,markDef:o,config:a}=e,s=n.order;if(!(!(0,K.kJ)(s)&&Ya(s)&&me(s.value)||!s&&me(Ar("order",o,a)))){if(((0,K.kJ)(s)||Ha(s))&&!r)return Ir(s,{expr:"datum"});if(Jo(i)){const r="horizontal"===o.orient?"y":"x",i=n[r];if(Ha(i)){const n=i.sort;return(0,K.kJ)(n)?{field:ns(i,{prefix:r,suffix:"sort_index",expr:"datum"})}:Ta(n)?{field:ns({aggregate:Is(e.encoding)?n.op:void 0,field:n.field},{expr:"datum"})}:Ra(n)?{field:ns(e.fieldDef(n.encoding),{expr:"datum"}),order:n.order}:null===n?void 0:{field:ns(i,{binSuffix:(null===(t=e.stack)||void 0===t?void 0:t.impute)?"mid":void 0,expr:"datum"})}}}}}(e),u=function(e){if(!e.component.selection)return null;const t=Te(e.component.selection).length;let n=t,r=e.parent;for(;r&&0===n;)n=Te(r.component.selection).length,r=r.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}(e),d=Ar("aria",r,o),f=Tg[n].postEncodingTransform?Tg[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:Tg[n].vgMark},a?{clip:!0}:{}),s?{style:s}:{}),l?{key:l.field}:{}),c?{sort:c}:{}),u||{}),!1===d?{aria:d}:{}),{from:{data:t.fromPrefix+e.requestDataName(yu.Main)},encode:{update:Tg[n].encodeEntry(e)}}),f?{transform:f}:{})]}class Fg extends Lh{constructor(e,t,n,r={},i){var o;super(e,"unit",t,n,i,void 0,Fl(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const a=Zo(e.mark)?Object.assign({},e.mark):{type:e.mark},s=a.type;void 0===a.filled&&(a.filled=function(e,t,{graticule:n}){if(n)return!1;const r=Nr("filled",e,t),i=e.type;return We(r,i!==zo&&i!==Mo&&i!==Uo)}(a,i,{graticule:e.data&&bu(e.data)}));const l=this.encoding=function(e,t,n,r){const i={};for(const t of Te(e))Qt(t)||xi(`${o=t}-encoding is dropped as ${o} is not a valid encoding channel.`);var o;for(let o of cn){if(!e[o])continue;const a=e[o];if(Nn(o)){const e=ln(o),t=i[e];if(Ha(t)){if(Zi(t.type)&&Ha(a)){xi(Qr(e));continue}}else o=e,xi(ei(e))}if("angle"!==o||"arc"!==t||e.theta||(xi("Arc marks uses theta channel rather than angle, replacing angle with theta."),o=ut),Ls(e,o,t)){if(o===wt&&"line"===t){const t=ds(e[o]);if(null==t?void 0:t.aggregate){xi("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.");continue}}if(o===mt&&(n?"fill"in e:"stroke"in e))xi(ni("encoding",{fill:"fill"in e,stroke:"stroke"in e}));else if(o===Tt||o===Rt&&!(0,K.kJ)(a)&&!Ya(a)||o===Pt&&(0,K.kJ)(a))a&&(i[o]=(0,K.IX)(a).reduce(((e,t)=>(Ha(t)?e.push(gs(t,o)):xi(ri(t,o)),e)),[]));else{if(o===Pt&&null===a)i[o]=null;else if(!(Ha(a)||Ga(a)||Ya(a)||za(a)||br(a))){xi(ri(a,o));continue}i[o]=ps(a,o,r)}}else xi(ii(o,t))}return i}(e.encoding||{},s,a.filled,i);this.markDef=Eg(a,l,i),this.size=function({encoding:e,size:t}){for(const n of Cn){const r=an(n);Nl(t[r])&&qa(e[n])&&(delete t[r],xi(pi(r)))}return t}({encoding:l,size:Fl(e)?Object.assign(Object.assign(Object.assign({},r),e.width?{width:e.width}:{}),e.height?{height:e.height}:{}):r}),this.stack=sc(s,l),this.specifiedScales=this.initScales(s,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=e.projection,this.selection=(null!==(o=e.params)&&void 0!==o?o:[]).filter((e=>jl(e)))}get hasProjection(){const{encoding:e}=this,t=this.mark===Xo,n=e&&Lt.some((t=>Xa(e[t])));return t||n}scaleDomain(e){const t=this.specifiedScales[e];return t?t.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,t){return Gn.reduce(((e,n)=>{var r;const i=fs(t[n]);return i&&(e[n]=this.initScale(null!==(r=i.scale)&&void 0!==r?r:{})),e}),{})}initScale(e){const{domain:t,range:n}=e,r=hr(e);return(0,K.kJ)(t)&&(r.domain=t.map(jr)),(0,K.kJ)(n)&&(r.range=n.map(jr)),r}initAxes(e){return Cn.reduce(((t,n)=>{const r=e[n];if(Xa(r)||n===nt&&Xa(e.x2)||n===rt&&Xa(e.y2)){const e=Xa(r)?r.axis:void 0;t[n]=e?this.initAxis(Object.assign({},e)):e}return t}),{})}initAxis(e){const t=Te(e),n={};for(const r of t){const t=e[r];n[r]=Ss(t)?kr(t):jr(t)}return n}initLegends(e){return Hn.reduce(((t,n)=>{const r=fs(e[n]);if(r&&function(e){switch(e){case mt:case vt:case bt:case wt:case yt:case Ot:case kt:case jt:return!0;case St:case Et:case xt:return!1}}(n)){const e=r.legend;t[n]=e?hr(e):e}return t}),{})}parseData(){this.component.data=pg(this)}parseLayoutSize(){!function(e){const{size:t,component:n}=e;for(const r of Cn){const i=an(r);if(t[i]){const e=t[i];n.layoutSize.set(i,Nl(e)?"step":e,!0)}else{const t=cg(e,i);n.layoutSize.set(i,t,!1)}}}(this)}parseSelections(){this.component.selection=function(e,t){var n;const r={},i=e.config.selection;if(!t||!t.length)return r;for(const o of t){const t=Ne(o.name),a=o.select,s=(0,K.HD)(a)?a:a.type,l=(0,K.Kn)(a)?ue(a):{type:s},c=i[s];for(const e in c)"fields"!==e&&"encodings"!==e&&("mark"===e&&(l[e]=Object.assign(Object.assign({},c[e]),l[e])),void 0!==l[e]&&!0!==l[e]||(l[e]=null!==(n=c[e])&&void 0!==n?n:l[e]));const u=r[t]=Object.assign(Object.assign({},l),{name:t,type:s,init:o.value,bind:o.bind,events:(0,K.HD)(l.on)?(0,wu.r)(l.on,"scope"):(0,K.IX)(ue(l.on))});for(const t of Bd)t.defined(u)&&t.parse&&t.parse(e,u,o)}return r}(this,this.selection)}parseMarkGroup(){this.component.mark=Dg(this)}parseAxesAndHeaders(){var e;this.component.axes=(e=this,Cn.reduce(((t,n)=>(e.component.scales[n]&&(t[n]=[Sg(n,e)]),t)),{}))}assembleSelectionTopLevelSignals(e){return function(e,t){var n;let r=!1;for(const i of De(null!==(n=e.component.selection)&&void 0!==n?n:{})){const n=i.name,o=(0,K.m8)(n+_d);if(0===t.filter((e=>e.name===n)).length){const e="global"===i.resolve?"union":i.resolve,n="point"===i.type?", true, true)":")";t.push({name:i.name,update:`${zd}(${o}, ${(0,K.m8)(e)}${n}`})}r=!0;for(const n of Bd)n.defined(i)&&n.topLevelSignals&&(t=n.topLevelSignals(e,i,t))}r&&0===t.filter((e=>"unit"===e.name)).length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]});return ku(t)}(this,e)}assembleSignals(){return[...nf(this),...Su(this,[])]}assembleSelectionData(e){return function(e,t){var n;const r=[...t],i=Ud(e,{escape:!1});for(const t of De(null!==(n=e.component.selection)&&void 0!==n?n:{})){const e={name:t.name+_d};if(t.project.hasSelectionId&&(e.transform=[{type:"collect",sort:{field:Ol}}]),t.init){const n=t.project.items.map((e=>{const{signals:t}=e;return xu(e,["signals"])}));e.values=t.project.hasSelectionId?t.init.map((e=>({unit:i,[Ol]:Ou(e,!1)[0]}))):t.init.map((e=>({unit:i,fields:n,values:Ou(e,!1)})))}r.filter((e=>e.name===t.name+_d)).length||r.push(e)}return r}(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return Tf(this)}assembleMarks(){var e;let t=null!==(e=this.component.mark)&&void 0!==e?e:[];return this.parent&&Ih(this.parent)||(t=Eu(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:e}=this.view||{};return void 0!==e?e:this.encoding.x||this.encoding.y?"cell":void 0}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return Ns(this.encoding,e)}fieldDef(e){return ds(this.encoding[e])}typedFieldDef(e){const t=this.fieldDef(e);return Ja(t)?t:null}}class $g extends _h{constructor(e,t,n,r,i){super(e,"layer",t,n,i,e.resolve,e.view);const o=Object.assign(Object.assign(Object.assign({},r),e.width?{width:e.width}:{}),e.height?{height:e.height}:{});this.children=e.layer.map(((e,t)=>{if(Ql(e))return new $g(e,this,this.getName(`layer_${t}`),o,i);if(Ds(e))return new Fg(e,this,this.getName(`layer_${t}`),o,i);throw new Error(zr(e))}))}parseData(){this.component.data=pg(this);for(const e of this.children)e.parseData()}parseLayoutSize(){var e;sg(e=this),lg(e,"width"),lg(e,"height")}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of Te(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){!function(e){var t;const{axes:n,resolve:r}=e.component,i={top:0,bottom:0,right:0,left:0};for(const t of e.children){t.parseAxesAndHeaders();for(const i of Te(t.component.axes))r.axis[i]=If(e.component.resolve,i),"shared"===r.axis[i]&&(n[i]=yg(n[i],t.component.axes[i]),n[i]||(r.axis[i]="independent",delete n[i]))}for(const o of Cn){for(const a of e.children)if(a.component.axes[o]){if("independent"===r.axis[o]){n[o]=(null!==(t=n[o])&&void 0!==t?t:[]).concat(a.component.axes[o]);for(const e of a.component.axes[o]){const{value:t,explicit:n}=e.getWithExplicit("orient");if(!br(t)){if(i[t]>0&&!n){const n=bg[t];i[t]>i[n]&&e.set("orient",n,!1)}i[t]++}}}delete a.component.axes[o]}if("independent"===r.axis[o]&&n[o]&&n[o].length>1)for(const e of n[o])e.get("grid")&&!e.explicit.grid&&(e.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleSignals())),nf(this))}assembleLayoutSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleLayoutSignals())),Tf(this))}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleGroupStyle(){const e=new Set;for(const t of this.children)for(const n of(0,K.IX)(t.assembleGroupStyle()))e.add(n);const t=Array.from(e);return t.length>1?t:1===t.length?t[0]:void 0}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const t of this.children)if(e=t.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return function(e,t){for(const n of e.children)Nh(n)&&(t=Eu(n,t));return t}(this,this.children.flatMap((e=>e.assembleMarks())))}assembleLegends(){return this.children.reduce(((e,t)=>e.concat(t.assembleLegends())),tp(this))}}function Ig(e,t,n,r,i){if(Na(e))return new dg(e,t,n,i);if(Ql(e))return new $g(e,t,n,r,i);if(Ds(e))return new Fg(e,t,n,r,i);if(function(e){return Dl(e)||Pl(e)||Tl(e)}(e))return new hg(e,t,n,i);throw new Error(zr(e))}var _g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Lg(e,t={}){var n;t.logger&&(n=t.logger,yi=n),t.fieldTitle&&as(t.fieldTitle);try{const n=Vl((0,K.fE)(t.config,e.config)),r=Zc(e,n),i=Ig(r,null,"",void 0,n);i.parse(),function(e,t){Xp(e.sources);let n=0,r=0;for(let r=0;r<Vp&&Yp(e,t,!0);r++)n++;e.sources.map(Wp);for(let n=0;n<Vp&&Yp(e,t,!1);n++)r++;Xp(e.sources),Math.max(n,r)===Vp&&xi(`Maximum optimization runs(${Vp}) reached.`)}(i.component.data,i);const o=function(e,t,n={},r){const i=e.config?Kl(e.config):void 0,o=[].concat(e.assembleSelectionData([]),function(e,t){var n,r;const i=[],o=ng(i);let a=0;for(const t of e.sources){t.hasName()||(t.dataName="source_"+a++);const e=t.assemble();o(t,e)}for(const e of i)0===e.transform.length&&delete e.transform;let s=0;for(const[e,t]of i.entries())0!==(null!==(n=t.transform)&&void 0!==n?n:[]).length||t.source||i.splice(s++,0,i.splice(e,1)[0]);for(const t of i)for(const n of null!==(r=t.transform)&&void 0!==r?r:[])"lookup"===n.type&&(n.from=e.outputNodes[n.from].getSource());for(const e of i)e.name in t&&(e.values=t[e.name]);return i}(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let u=e.assembleLayoutSignals();u=u.filter((e=>"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)));const{params:d}=t,f=_g(t,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),f),s?{title:s}:{}),l?{style:l}:{}),c?{encode:{update:c}}:{}),{data:o}),a.length>0?{projections:a}:{}),e.assembleGroup([...u,...e.assembleSelectionTopLevelSignals([]),...Rl(d)])),i?{config:i}:{}),r?{usermeta:r}:{})}(i,function(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):(0,K.HD)(t)&&(t={type:t});if(i&&o&&(a=t.type,"fit"===a||"fit-x"===a||"fit-y"===a))if("step"===i&&"step"===o)xi(Wr()),t.type="pad";else if("step"===i||"step"===o){const e="step"===i?"width":"height";xi(Wr(Pn(e)));const n="width"===e?"height":"width";t.type=function(e){return e?`fit-${Pn(e)}`:"fit"}(n)}var a;return Object.assign(Object.assign(Object.assign({},1===Te(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t}),iu(n,!1)),iu(e,!0))}(e,r.autosize,n,i),e.datasets,e.usermeta);return{spec:o,normalized:r}}finally{t.logger&&wi(),t.fieldTitle&&as(is)}}const Mg="5.2.0";const zg=function(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}};var Bg="2.12.1";const Ug="#fff",Hg="#888",Wg={background:"#333",view:{stroke:Hg},title:{color:Ug,subtitleColor:Ug},style:{"guide-label":{fill:Ug},"guide-title":{fill:Ug}},axis:{domainColor:Ug,gridColor:Hg,tickColor:Ug}},Gg="#4572a7",qg={background:"#fff",arc:{fill:Gg},area:{fill:Gg},line:{stroke:Gg,strokeWidth:2},path:{stroke:Gg},rect:{fill:Gg},shape:{stroke:Gg},symbol:{fill:Gg,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Vg="#30a2da",Xg="#cbcbcb",Jg="#f0f0f0",Yg="#333",Kg={arc:{fill:Vg},area:{fill:Vg},axis:{domainColor:Xg,grid:!0,gridColor:Xg,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:Xg,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Jg,group:{fill:Jg},legend:{labelColor:Yg,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Yg,titleFontSize:14,titlePadding:10},line:{stroke:Vg,strokeWidth:2},path:{stroke:Vg,strokeWidth:.5},rect:{fill:Vg},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Vg},bar:{binSpacing:2,fill:Vg,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Zg="#000",Qg={group:{fill:"#e5e5e5"},arc:{fill:Zg},area:{fill:Zg},line:{stroke:Zg},path:{stroke:Zg},rect:{fill:Zg},shape:{stroke:Zg},symbol:{fill:Zg,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},em="Benton Gothic, sans-serif",tm="#82c6df",nm="Benton Gothic Bold, sans-serif",rm="normal",im={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},om={background:"#ffffff",title:{anchor:"start",color:"#000000",font:nm,fontSize:22,fontWeight:"normal"},arc:{fill:tm},area:{fill:tm},line:{stroke:tm,strokeWidth:2},path:{stroke:tm},rect:{fill:tm},shape:{stroke:tm},symbol:{fill:tm,size:30},axis:{labelFont:em,labelFontSize:11.5,labelFontWeight:"normal",titleFont:nm,titleFontSize:13,titleFontWeight:rm},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:em,labelFontSize:11.5,symbolType:"square",titleFont:nm,titleFontSize:13,titleFontWeight:rm},range:{category:im["category-6"],diverging:im["fireandice-6"],heatmap:im["fire-7"],ordinal:im["fire-7"],ramp:im["fire-7"]}},am="#ab5787",sm="#979797",lm={background:"#f9f9f9",arc:{fill:am},area:{fill:am},line:{stroke:am},path:{stroke:am},rect:{fill:am},shape:{stroke:am},symbol:{fill:am,size:30},axis:{domainColor:sm,domainWidth:.5,gridWidth:.2,labelColor:sm,tickColor:sm,tickWidth:.2,titleColor:sm},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},cm="#3e5c69",um={background:"#fff",arc:{fill:cm},area:{fill:cm},line:{stroke:cm},path:{stroke:cm},rect:{fill:cm},shape:{stroke:cm},symbol:{fill:cm},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},dm="#1696d2",fm="#000000",pm="Lato",hm="Lato",gm={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},mm={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:pm},axisX:{domain:!0,domainColor:fm,domainWidth:1,grid:!1,labelFontSize:12,labelFont:hm,labelAngle:0,tickColor:fm,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:pm},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:hm,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:pm,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:hm,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:pm,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:gm["six-groups-cat-1"],diverging:gm["diverging-colors"],heatmap:gm["diverging-colors"],ordinal:gm["six-groups-seq"],ramp:gm["shades-blue"]},area:{fill:dm},rect:{fill:dm},line:{color:dm,stroke:dm,strokeWidth:5},trail:{color:dm,stroke:dm,strokeWidth:0,size:1},path:{stroke:dm,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:dm,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:dm,stroke:null}},arc:{fill:dm},shape:{stroke:dm},symbol:{fill:dm,size:30}},vm="#3366CC",bm="#ccc",ym="Arial, sans-serif",wm={arc:{fill:vm},area:{fill:vm},path:{stroke:vm},rect:{fill:vm},shape:{stroke:vm},symbol:{stroke:vm},circle:{fill:vm},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:ym,fontSize:12},"guide-title":{font:ym,fontSize:12},"group-title":{font:ym,fontSize:12}},title:{font:ym,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:bm,tickColor:bm,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},xm=e=>e*(1/3+1),Om=xm(9),Sm=xm(10),Em=xm(12),km="Segoe UI",jm="wf_standard-font, helvetica, arial, sans-serif",Cm="#252423",Rm="#605E5C",Tm="transparent",Dm="#118DFF",Pm="#DEEFFF",Am=[Pm,Dm],Nm={view:{stroke:Tm},background:Tm,font:km,header:{titleFont:jm,titleFontSize:Em,titleColor:Cm,labelFont:km,labelFontSize:Sm,labelColor:Rm},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Rm,labelFontSize:Om,titleFont:jm,titleColor:Cm,titleFontSize:Em,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Dm},line:{stroke:Dm,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:km,fontSize:Om,fill:Rm},arc:{fill:Dm},area:{fill:Dm,line:!0,opacity:.6},path:{stroke:Dm},rect:{fill:Dm},point:{fill:Dm,filled:!0,size:75},shape:{stroke:Dm},symbol:{fill:Dm,strokeWidth:1.5,size:50},legend:{titleFont:km,titleFontWeight:"bold",titleColor:Rm,labelFont:km,labelFontSize:Sm,labelColor:Rm,symbolType:"circle",symbolSize:75},range:{category:[Dm,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:Am,heatmap:Am,ordinal:[Pm,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Dm]}},Fm=Bg;function $m(e,t){return JSON.stringify(e,function(e){const t=[];return function(n,r){if("object"!=typeof r||null===r)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}var Im="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element img {\n  max-width: 200px;\n  max-height: 200px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n";const _m="vg-tooltip-element",Lm={offsetX:10,offsetY:10,id:_m,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function(e,t,n){if((0,K.kJ)(e))return`[${e.map((e=>t((0,K.HD)(e)?e:$m(e,n)))).join(", ")}]`;if((0,K.Kn)(e)){let r="";const i=e,{title:o,image:a}=i,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(i,["title","image"]);o&&(r+=`<h2>${t(o)}</h2>`),a&&(r+=`<img src="${t(a)}">`);const l=Object.keys(s);if(l.length>0){r+="<table>";for(const e of l){let i=s[e];void 0!==i&&((0,K.Kn)(i)&&(i=$m(i,n)),r+=`<tr><td class="key">${t(e)}:</td><td class="value">${t(i)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}};class Mm{constructor(e){this.options=Object.assign(Object.assign({},Lm),e);const t=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const e=document.createElement("style");e.setAttribute("id",this.options.styleId),e.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Im.toString().replace(_m,e)}(t);const n=document.head;n.childNodes.length>0?n.insertBefore(e,n.childNodes[0]):n.appendChild(e)}}tooltipHandler(e,t,n,r){var i;if(this.el=document.getElementById(this.options.id),!this.el){this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip");(null!==(i=document.fullscreenElement)&&void 0!==i?i:document.body).appendChild(this.el)}if(null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:a}=function(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${o}px`}}var zm=n(73173);function Bm(e){return Bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bm(e)}function Um(e){var t=function(e,t){if("object"!==Bm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Bm(t)?t:String(t)}function Hm(e,t,n){return(t=Um(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wm(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function Gm(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Wm(o,r,i,a,s,"next",e)}function s(e){Wm(o,r,i,a,s,"throw",e)}a(void 0)}))}}var qm,Vm=Object.prototype,Xm=Vm.hasOwnProperty,Jm="function"==typeof Symbol?Symbol:{},Ym=Jm.iterator||"@@iterator",Km=Jm.asyncIterator||"@@asyncIterator",Zm=Jm.toStringTag||"@@toStringTag";function Qm(e,t,n,r){var i=t&&t.prototype instanceof av?t:av,o=Object.create(i.prototype),a=new yv(r||[]);return o._invoke=function(e,t,n){var r=tv;return function(i,o){if(r===rv)throw new Error("Generator is already running");if(r===iv){if("throw"===i)throw o;return xv()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=mv(a,n);if(s){if(s===ov)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===tv)throw r=iv,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=rv;var l=ev(e,t,n);if("normal"===l.type){if(r=n.done?iv:nv,l.arg===ov)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=iv,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function ev(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}var tv="suspendedStart",nv="suspendedYield",rv="executing",iv="completed",ov={};function av(){}function sv(){}function lv(){}var cv={};cv[Ym]=function(){return this};var uv=Object.getPrototypeOf,dv=uv&&uv(uv(wv([])));dv&&dv!==Vm&&Xm.call(dv,Ym)&&(cv=dv);var fv=lv.prototype=av.prototype=Object.create(cv);function pv(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function hv(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===sv||"GeneratorFunction"===(t.displayName||t.name))}function gv(e,t){function n(r,i,o,a){var s=ev(e[r],e,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&Xm.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,a)}))}a(s.arg)}var r;this._invoke=function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}}function mv(e,t){var n=e.iterator[t.method];if(n===qm){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=qm,mv(e,t),"throw"===t.method))return ov;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return ov}var r=ev(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,ov;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=qm),t.delegate=null,ov):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,ov)}function vv(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function bv(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function yv(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(vv,this),this.reset(!0)}function wv(e){if(e){var t=e[Ym];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(Xm.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=qm,t.done=!0,t};return r.next=r}}return{next:xv}}function xv(){return{value:qm,done:!0}}sv.prototype=fv.constructor=lv,lv.constructor=sv,lv[Zm]=sv.displayName="GeneratorFunction",pv(gv.prototype),gv.prototype[Km]=function(){return this},pv(fv),fv[Zm]="Generator",fv[Ym]=function(){return this},fv.toString=function(){return"[object Generator]"},yv.prototype={constructor:yv,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=qm,this.done=!1,this.delegate=null,this.method="next",this.arg=qm,this.tryEntries.forEach(bv),!e)for(var t in this)"t"===t.charAt(0)&&Xm.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=qm)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=qm),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=Xm.call(i,"catchLoc"),s=Xm.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&Xm.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,ov):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),ov},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),bv(n),ov}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;bv(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:wv(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=qm),ov}};var Ov,Sv,Ev={wrap:Qm,isGeneratorFunction:hv,AsyncIterator:gv,mark:function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,lv):(e.__proto__=lv,Zm in e||(e[Zm]="GeneratorFunction")),e.prototype=Object.create(fv),e},awrap:function(e){return{__await:e}},async:function(e,t,n,r,i){void 0===i&&(i=Promise);var o=new gv(Qm(e,t,n,r),i);return hv(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},keys:function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},values:wv};var kv=jv;function jv(e){var t=this;if(t instanceof jv||(t=new jv),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function Cv(e,t,n){var r=t===e.head?new Dv(n,null,t,e):new Dv(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function Rv(e,t){e.tail=new Dv(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Tv(e,t){e.head=new Dv(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Dv(e,t,n,r){if(!(this instanceof Dv))return new Dv(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}jv.Node=Dv,jv.create=jv,jv.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},jv.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},jv.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},jv.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Rv(this,arguments[e]);return this.length},jv.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Tv(this,arguments[e]);return this.length},jv.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},jv.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},jv.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},jv.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},jv.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},jv.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},jv.prototype.map=function(e,t){t=t||this;for(var n=new jv,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},jv.prototype.mapReverse=function(e,t){t=t||this;for(var n=new jv,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},jv.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},jv.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},jv.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},jv.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},jv.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new jv;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)n.push(i.value);return n},jv.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new jv;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)n.push(i.value);return n},jv.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,r=this.head;null!==r&&n<e;n++)r=r.next;var i=[];for(n=0;r&&n<t;n++)i.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=Cv(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return i},jv.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{(Sv||(Sv=1,Ov=function(e){e.prototype[Symbol.iterator]=Ev.mark((function e(){var t;return Ev.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))}),Ov)(jv)}catch(e){}var Pv=kv,Av=Symbol("max"),Nv=Symbol("length"),Fv=Symbol("lengthCalculator"),$v=Symbol("allowStale"),Iv=Symbol("maxAge"),_v=Symbol("dispose"),Lv=Symbol("noDisposeOnSet"),Mv=Symbol("lruList"),zv=Symbol("cache"),Bv=Symbol("updateAgeOnGet"),Uv=()=>1;var Hv=(e,t,n)=>{var r=e[zv].get(t);if(r){var i=r.value;if(Wv(e,i)){if(qv(e,r),!e[$v])return}else n&&(e[Bv]&&(r.value.now=Date.now()),e[Mv].unshiftNode(r));return i.value}},Wv=(e,t)=>{if(!t||!t.maxAge&&!e[Iv])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Iv]&&n>e[Iv]},Gv=e=>{if(e[Nv]>e[Av])for(var t=e[Mv].tail;e[Nv]>e[Av]&&null!==t;){var n=t.prev;qv(e,t),t=n}},qv=(e,t)=>{if(t){var n=t.value;e[_v]&&e[_v](n.key,n.value),e[Nv]-=n.length,e[zv].delete(n.key),e[Mv].removeNode(t)}};class Vv{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}var Xv=(e,t,n,r)=>{var i=n.value;Wv(e,i)&&(qv(e,n),e[$v]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},Jv=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[Av]=e.max||1/0;var t=e.length||Uv;if(this[Fv]="function"!=typeof t?Uv:t,this[$v]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[Iv]=e.maxAge||0,this[_v]=e.dispose,this[Lv]=e.noDisposeOnSet||!1,this[Bv]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[Av]=e||1/0,Gv(this)}get max(){return this[Av]}set allowStale(e){this[$v]=!!e}get allowStale(){return this[$v]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[Iv]=e,Gv(this)}get maxAge(){return this[Iv]}set lengthCalculator(e){"function"!=typeof e&&(e=Uv),e!==this[Fv]&&(this[Fv]=e,this[Nv]=0,this[Mv].forEach((e=>{e.length=this[Fv](e.value,e.key),this[Nv]+=e.length}))),Gv(this)}get lengthCalculator(){return this[Fv]}get length(){return this[Nv]}get itemCount(){return this[Mv].length}rforEach(e,t){t=t||this;for(var n=this[Mv].tail;null!==n;){var r=n.prev;Xv(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(var n=this[Mv].head;null!==n;){var r=n.next;Xv(this,e,n,t),n=r}}keys(){return this[Mv].toArray().map((e=>e.key))}values(){return this[Mv].toArray().map((e=>e.value))}reset(){this[_v]&&this[Mv]&&this[Mv].length&&this[Mv].forEach((e=>this[_v](e.key,e.value))),this[zv]=new Map,this[Mv]=new Pv,this[Nv]=0}dump(){return this[Mv].map((e=>!Wv(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[Mv]}set(e,t,n){if((n=n||this[Iv])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");var r=n?Date.now():0,i=this[Fv](t,e);if(this[zv].has(e)){if(i>this[Av])return qv(this,this[zv].get(e)),!1;var o=this[zv].get(e).value;return this[_v]&&(this[Lv]||this[_v](e,o.value)),o.now=r,o.maxAge=n,o.value=t,this[Nv]+=i-o.length,o.length=i,this.get(e),Gv(this),!0}var a=new Vv(e,t,i,r,n);return a.length>this[Av]?(this[_v]&&this[_v](e,t),!1):(this[Nv]+=a.length,this[Mv].unshift(a),this[zv].set(e,this[Mv].head),Gv(this),!0)}has(e){if(!this[zv].has(e))return!1;var t=this[zv].get(e).value;return!Wv(this,t)}get(e){return Hv(this,e,!0)}peek(e){return Hv(this,e,!1)}pop(){var e=this[Mv].tail;return e?(qv(this,e),e.value):null}del(e){qv(this,this[zv].get(e))}load(e){this.reset();for(var t=Date.now(),n=e.length-1;n>=0;n--){var r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{var o=i-t;o>0&&this.set(r.k,r.v,o)}}}prune(){this[zv].forEach(((e,t)=>Hv(this,t,!1)))}},Yv=["includePrerelease","loose","rtl"],Kv=e=>e?"object"!=typeof e?{loose:!0}:Yv.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{},Zv={},Qv={get exports(){return Zv},set exports(e){Zv=e}},eb={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},tb="object"==typeof zm&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.error("SEMVER",...t)}:()=>{};!function(e,t){var n=eb.MAX_SAFE_COMPONENT_LENGTH,r=tb,i=(t=e.exports={}).re=[],o=t.src=[],a=t.t={},s=0,l=(e,t,n)=>{var l=s++;r(e,l,t),a[e]=l,o[l]=t,i[l]=new RegExp(t,n?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION","(".concat(o[a.NUMERICIDENTIFIER],")\\.")+"(".concat(o[a.NUMERICIDENTIFIER],")\\.")+"(".concat(o[a.NUMERICIDENTIFIER],")")),l("MAINVERSIONLOOSE","(".concat(o[a.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[a.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[a.NUMERICIDENTIFIERLOOSE],")")),l("PRERELEASEIDENTIFIER","(?:".concat(o[a.NUMERICIDENTIFIER],"|").concat(o[a.NONNUMERICIDENTIFIER],")")),l("PRERELEASEIDENTIFIERLOOSE","(?:".concat(o[a.NUMERICIDENTIFIERLOOSE],"|").concat(o[a.NONNUMERICIDENTIFIER],")")),l("PRERELEASE","(?:-(".concat(o[a.PRERELEASEIDENTIFIER],"(?:\\.").concat(o[a.PRERELEASEIDENTIFIER],")*))")),l("PRERELEASELOOSE","(?:-?(".concat(o[a.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(o[a.PRERELEASEIDENTIFIERLOOSE],")*))")),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD","(?:\\+(".concat(o[a.BUILDIDENTIFIER],"(?:\\.").concat(o[a.BUILDIDENTIFIER],")*))")),l("FULLPLAIN","v?".concat(o[a.MAINVERSION]).concat(o[a.PRERELEASE],"?").concat(o[a.BUILD],"?")),l("FULL","^".concat(o[a.FULLPLAIN],"$")),l("LOOSEPLAIN","[v=\\s]*".concat(o[a.MAINVERSIONLOOSE]).concat(o[a.PRERELEASELOOSE],"?").concat(o[a.BUILD],"?")),l("LOOSE","^".concat(o[a.LOOSEPLAIN],"$")),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE","".concat(o[a.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),l("XRANGEIDENTIFIER","".concat(o[a.NUMERICIDENTIFIER],"|x|X|\\*")),l("XRANGEPLAIN","[v=\\s]*(".concat(o[a.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[a.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[a.XRANGEIDENTIFIER],")")+"(?:".concat(o[a.PRERELEASE],")?").concat(o[a.BUILD],"?")+")?)?"),l("XRANGEPLAINLOOSE","[v=\\s]*(".concat(o[a.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[a.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[a.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(o[a.PRERELEASELOOSE],")?").concat(o[a.BUILD],"?")+")?)?"),l("XRANGE","^".concat(o[a.GTLT],"\\s*").concat(o[a.XRANGEPLAIN],"$")),l("XRANGELOOSE","^".concat(o[a.GTLT],"\\s*").concat(o[a.XRANGEPLAINLOOSE],"$")),l("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),l("COERCERTL",o[a.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM","(\\s*)".concat(o[a.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",l("TILDE","^".concat(o[a.LONETILDE]).concat(o[a.XRANGEPLAIN],"$")),l("TILDELOOSE","^".concat(o[a.LONETILDE]).concat(o[a.XRANGEPLAINLOOSE],"$")),l("LONECARET","(?:\\^)"),l("CARETTRIM","(\\s*)".concat(o[a.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",l("CARET","^".concat(o[a.LONECARET]).concat(o[a.XRANGEPLAIN],"$")),l("CARETLOOSE","^".concat(o[a.LONECARET]).concat(o[a.XRANGEPLAINLOOSE],"$")),l("COMPARATORLOOSE","^".concat(o[a.GTLT],"\\s*(").concat(o[a.LOOSEPLAIN],")$|^$")),l("COMPARATOR","^".concat(o[a.GTLT],"\\s*(").concat(o[a.FULLPLAIN],")$|^$")),l("COMPARATORTRIM","(\\s*)".concat(o[a.GTLT],"\\s*(").concat(o[a.LOOSEPLAIN],"|").concat(o[a.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE","^\\s*(".concat(o[a.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(o[a.XRANGEPLAIN],")")+"\\s*$"),l("HYPHENRANGELOOSE","^\\s*(".concat(o[a.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(o[a.XRANGEPLAINLOOSE],")")+"\\s*$"),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Qv,Zv);var nb=/^[0-9]+$/,rb=(e,t)=>{var n=nb.test(e),r=nb.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},ib=rb,ob=tb,ab=eb.MAX_LENGTH,sb=eb.MAX_SAFE_INTEGER,lb=Zv.re,cb=Zv.t,ub=Kv,db=ib;var fb,pb,hb,gb,mb=class e{constructor(t,n){if(n=ub(n),t instanceof e){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError("Invalid Version: ".concat(t));if(t.length>ab)throw new TypeError("version is longer than ".concat(ab," characters"));ob("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var r=t.trim().match(n.loose?lb[cb.LOOSE]:lb[cb.FULL]);if(!r)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>sb||this.major<0)throw new TypeError("Invalid major version");if(this.minor>sb||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>sb||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<sb)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(t){if(ob("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),db(this.major,t.major)||db(this.minor,t.minor)||db(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],i=t.prerelease[n];if(ob("prerelease compare",n,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return db(r,i)}while(++n)}compareBuild(t){t instanceof e||(t=new e(t,this.options));var n=0;do{var r=this.build[n],i=t.build[n];if(ob("prerelease compare",n,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return db(r,i)}while(++n)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(0===db(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: ".concat(e))}return this.format(),this.raw=this.version,this}},vb=mb,bb=(e,t,n)=>new vb(e,n).compare(new vb(t,n)),yb=bb,wb=bb,xb=bb,Ob=bb,Sb=bb,Eb=bb,kb=(e,t,n)=>0===yb(e,t,n),jb=(e,t,n)=>0!==wb(e,t,n),Cb=(e,t,n)=>xb(e,t,n)>0,Rb=(e,t,n)=>Ob(e,t,n)>=0,Tb=(e,t,n)=>Sb(e,t,n)<0,Db=(e,t,n)=>Eb(e,t,n)<=0,Pb=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return kb(e,n,r);case"!=":return jb(e,n,r);case">":return Cb(e,n,r);case">=":return Rb(e,n,r);case"<":return Tb(e,n,r);case"<=":return Db(e,n,r);default:throw new TypeError("Invalid operator: ".concat(t))}};function Ab(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Nb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nb(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Nb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fb(){if(gb)return hb;gb=1;class e{constructor(t,i){if(i=n(i),t instanceof e)return t.loose===!!i.loose&&t.includePrerelease===!!i.includePrerelease?t:new e(t.raw,i);if(t instanceof r)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease,this.raw=t,this.set=t.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(t));if(this.set.length>1){var o=this.set[0];if(this.set=this.set.filter((e=>!d(e[0]))),0===this.set.length)this.set=[o];else if(this.set.length>1){var a,s=Ab(this.set);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(1===l.length&&f(l[0])){this.set=[l];break}}}catch(e){s.e(e)}finally{s.f()}}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();var n=Object.keys(this.options).join(","),o="parseRange:".concat(n,":").concat(e),f=t.get(o);if(f)return f;var p=this.options.loose,g=p?a[s.HYPHENRANGELOOSE]:a[s.HYPHENRANGE];e=e.replace(g,E(this.options.includePrerelease)),i("hyphen replace",e),e=e.replace(a[s.COMPARATORTRIM],l),i("comparator trim",e);var m=(e=(e=(e=e.replace(a[s.TILDETRIM],c)).replace(a[s.CARETTRIM],u)).split(/\s+/).join(" ")).split(" ").map((e=>h(e,this.options))).join(" ").split(/\s+/).map((e=>S(e,this.options)));p&&(m=m.filter((e=>(i("loose invalid filter",e,this.options),!!e.match(a[s.COMPARATORLOOSE]))))),i("range list",m);var v,b=new Map,y=m.map((e=>new r(e,this.options))),w=Ab(y);try{for(w.s();!(v=w.n()).done;){var x=v.value;if(d(x))return[x];b.set(x.value,x)}}catch(e){w.e(e)}finally{w.f()}b.size>1&&b.has("")&&b.delete("");var O=[...b.values()];return t.set(o,O),O}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((e=>p(e,n)&&t.set.some((t=>p(t,n)&&e.every((e=>t.every((t=>e.intersects(t,n)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new o(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(k(this.set[t],e,this.options))return!0;return!1}}hb=e;var t=new Jv({max:1e3}),n=Kv,r=function(){if(pb)return fb;pb=1;var e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(r,i){if(i=n(i),r instanceof t){if(r.loose===!!i.loose)return r;r=r.value}a("comparator",r,i),this.options=i,this.loose=!!i.loose,this.parse(r),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(t){var n=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],o=t.match(n);if(!o)throw new TypeError("Invalid comparator: ".concat(t));this.operator=void 0!==o[1]?o[1]:"","="===this.operator&&(this.operator=""),o[2]?this.semver=new s(o[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(a("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new s(t,this.options)}catch(e){return!1}return o(t,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");if(n&&"object"==typeof n||(n={loose:!!n,includePrerelease:!1}),""===this.operator)return""===this.value||new l(e.value,n).test(this.value);if(""===e.operator)return""===e.value||new l(this.value,n).test(e.semver);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),a=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),c=o(this.semver,"<",e.semver,n)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=o(this.semver,">",e.semver,n)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||a&&s||c||u}}fb=t;var n=Kv,r=Zv.re,i=Zv.t,o=Pb,a=tb,s=mb,l=Fb();return fb}(),i=tb,o=mb,a=Zv.re,s=Zv.t,l=Zv.comparatorTrimReplace,c=Zv.tildeTrimReplace,u=Zv.caretTrimReplace,d=e=>"<0.0.0-0"===e.value,f=e=>""===e.value,p=(e,t)=>{for(var n=!0,r=e.slice(),i=r.pop();n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},h=(e,t)=>(i("comp",e,t),e=b(e,t),i("caret",e),e=m(e,t),i("tildes",e),e=w(e,t),i("xrange",e),e=O(e,t),i("stars",e),e),g=e=>!e||"x"===e.toLowerCase()||"*"===e,m=(e,t)=>e.trim().split(/\s+/).map((e=>v(e,t))).join(" "),v=(e,t)=>{var n=t.loose?a[s.TILDELOOSE]:a[s.TILDE];return e.replace(n,((t,n,r,o,a)=>{var s;return i("tilde",e,t,n,r,o,a),g(n)?s="":g(r)?s=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):g(o)?s=">=".concat(n,".").concat(r,".0 <").concat(n,".").concat(+r+1,".0-0"):a?(i("replaceTilde pr",a),s=">=".concat(n,".").concat(r,".").concat(o,"-").concat(a," <").concat(n,".").concat(+r+1,".0-0")):s=">=".concat(n,".").concat(r,".").concat(o," <").concat(n,".").concat(+r+1,".0-0"),i("tilde return",s),s}))},b=(e,t)=>e.trim().split(/\s+/).map((e=>y(e,t))).join(" "),y=(e,t)=>{i("caret",e,t);var n=t.loose?a[s.CARETLOOSE]:a[s.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,o,a,s)=>{var l;return i("caret",e,t,n,o,a,s),g(n)?l="":g(o)?l=">=".concat(n,".0.0").concat(r," <").concat(+n+1,".0.0-0"):g(a)?l="0"===n?">=".concat(n,".").concat(o,".0").concat(r," <").concat(n,".").concat(+o+1,".0-0"):">=".concat(n,".").concat(o,".0").concat(r," <").concat(+n+1,".0.0-0"):s?(i("replaceCaret pr",s),l="0"===n?"0"===o?">=".concat(n,".").concat(o,".").concat(a,"-").concat(s," <").concat(n,".").concat(o,".").concat(+a+1,"-0"):">=".concat(n,".").concat(o,".").concat(a,"-").concat(s," <").concat(n,".").concat(+o+1,".0-0"):">=".concat(n,".").concat(o,".").concat(a,"-").concat(s," <").concat(+n+1,".0.0-0")):(i("no pr"),l="0"===n?"0"===o?">=".concat(n,".").concat(o,".").concat(a).concat(r," <").concat(n,".").concat(o,".").concat(+a+1,"-0"):">=".concat(n,".").concat(o,".").concat(a).concat(r," <").concat(n,".").concat(+o+1,".0-0"):">=".concat(n,".").concat(o,".").concat(a," <").concat(+n+1,".0.0-0")),i("caret return",l),l}))},w=(e,t)=>(i("replaceXRanges",e,t),e.split(/\s+/).map((e=>x(e,t))).join(" ")),x=(e,t)=>{e=e.trim();var n=t.loose?a[s.XRANGELOOSE]:a[s.XRANGE];return e.replace(n,((n,r,o,a,s,l)=>{i("xRange",e,n,r,o,a,s,l);var c=g(o),u=c||g(a),d=u||g(s),f=d;return"="===r&&f&&(r=""),l=t.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(u&&(a=0),s=0,">"===r?(r=">=",u?(o=+o+1,a=0,s=0):(a=+a+1,s=0)):"<="===r&&(r="<",u?o=+o+1:a=+a+1),"<"===r&&(l="-0"),n="".concat(r+o,".").concat(a,".").concat(s).concat(l)):u?n=">=".concat(o,".0.0").concat(l," <").concat(+o+1,".0.0-0"):d&&(n=">=".concat(o,".").concat(a,".0").concat(l," <").concat(o,".").concat(+a+1,".0-0")),i("xRange return",n),n}))},O=(e,t)=>(i("replaceStars",e,t),e.trim().replace(a[s.STAR],"")),S=(e,t)=>(i("replaceGTE0",e,t),e.trim().replace(a[t.includePrerelease?s.GTE0PRE:s.GTE0],"")),E=e=>(t,n,r,i,o,a,s,l,c,u,d,f,p)=>(n=g(r)?"":g(i)?">=".concat(r,".0.0").concat(e?"-0":""):g(o)?">=".concat(r,".").concat(i,".0").concat(e?"-0":""):a?">=".concat(n):">=".concat(n).concat(e?"-0":""),l=g(c)?"":g(u)?"<".concat(+c+1,".0.0-0"):g(d)?"<".concat(c,".").concat(+u+1,".0-0"):f?"<=".concat(c,".").concat(u,".").concat(d,"-").concat(f):e?"<".concat(c,".").concat(u,".").concat(+d+1,"-0"):"<=".concat(l),"".concat(n," ").concat(l).trim()),k=(e,t,n)=>{for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(var a=0;a<e.length;a++)if(i(e[a].semver),e[a].semver!==r.ANY&&e[a].semver.prerelease.length>0){var s=e[a].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0};return hb}var $b=Fb(),Ib=(e,t,n)=>{try{t=new $b(t,n)}catch(e){return!1}return t.test(e)};function _b(e,t,n){var r=e.open(t),i=new URL(t).origin,o=40;e.addEventListener("message",(function t(n){n.source===r&&(o=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){o<=0||(r.postMessage(n,i),setTimeout(e,250),o-=1)}),250)}var Lb='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function Mb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){zb(e,o[i])}return e}function zb(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];(0,z.writeConfig)(e,i,t[i],!0)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});var Bb;function Ub(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Hb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hb(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wb(Object(n),!0).forEach((function(t){Hm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qb=z,Vb=o,Xb="undefined"!=typeof window?window:void 0;void 0===Vb&&null!=Xb&&null!==(Bb=Xb.vl)&&void 0!==Bb&&Bb.compile&&(Vb=Xb.vl);var Jb={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Yb={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Kb={vega:"Vega","vega-lite":"Vega-Lite"},Zb={vega:qb.version,"vega-lite":Vb?Vb.version:"not available"},Qb={vega:e=>e,"vega-lite":(e,t)=>Vb.compile(e,{config:t}).spec},ey='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',ty="chart-wrapper";function ny(e,t,n,r){var i="<html><head>".concat(t,'</head><body><pre><code class="json">'),o="</code></pre>".concat(n,"</body></html>"),a=window.open("");a.document.write(i+e+o),a.document.title="".concat(Kb[r]," JSON Source")}function ry(e,t){if(e.$schema){var n,r=zg(e.$schema);if(t&&t!==r.library)console.warn("The given visualization spec is written in ".concat(Kb[r.library],", but mode argument sets ").concat(null!==(n=Kb[t])&&void 0!==n?n:t,"."));var i=r.library;return Ib(Zb[i],"^".concat(r.version.slice(1)))||console.warn("The input spec uses ".concat(Kb[i]," ").concat(r.version,", but the current version of ").concat(Kb[i]," is v").concat(Zb[i],".")),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!=t?t:"vega"}function iy(e){return(t=e)&&"load"in t?e:qb.loader(e);var t}function oy(e){var t,n,r=null!==(t=null===(n=e.usermeta)||void 0===n?void 0:n.embedOptions)&&void 0!==t?t:{};return(0,z.isString)(r.defaultStyle)&&(r.defaultStyle=!1),r}function ay(e,t){return sy.apply(this,arguments)}function sy(){return sy=Gm(Ev.mark((function e(t,n){var r,i,o,a,s,l,c,u,d,f,p,h=arguments;return Ev.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=h.length>2&&void 0!==h[2]?h[2]:{},!(0,z.isString)(n)){e.next=10;break}return s=iy(o.loader),e.t0=JSON,e.next=6,s.load(n);case 6:e.t1=e.sent,a=e.t0.parse.call(e.t0,e.t1),e.next=11;break;case 10:a=n;case 11:return l=oy(a),c=l.loader,s&&!c||(s=iy(null!==(u=o.loader)&&void 0!==u?u:c)),e.next=16,ly(l,s);case 16:return d=e.sent,e.next=19,ly(o,s);case 19:return f=e.sent,p=Gb(Gb({},Mb(f,d)),{},{config:(0,z.mergeConfig)(null!==(r=f.config)&&void 0!==r?r:{},null!==(i=d.config)&&void 0!==i?i:{})}),e.next=23,dy(t,a,p,s);case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e)}))),sy.apply(this,arguments)}function ly(e,t){return cy.apply(this,arguments)}function cy(){return(cy=Gm(Ev.mark((function e(t,n){var r,i,o;return Ev.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,z.isString)(t.config)){e.next=8;break}return e.t1=JSON,e.next=4,n.load(t.config);case 4:e.t2=e.sent,e.t0=e.t1.parse.call(e.t1,e.t2),e.next=9;break;case 8:e.t0=null!==(r=t.config)&&void 0!==r?r:{};case 9:if(i=e.t0,!(0,z.isString)(t.patch)){e.next=18;break}return e.t4=JSON,e.next=14,n.load(t.patch);case 14:e.t5=e.sent,e.t3=e.t4.parse.call(e.t4,e.t5),e.next=19;break;case 18:e.t3=t.patch;case 19:return o=e.t3,e.abrupt("return",Gb(Gb(Gb({},t),o?{patch:o}:{}),i?{config:i}:{}));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uy(e){var t,n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(t=document.head)&&void 0!==t?t:document.body}}function dy(e,t){return fy.apply(this,arguments)}function fy(){return fy=Gm(Ev.mark((function e(t,n){var r,i,o,s,l,c,u,d,f,p,h,g,m,v,b,y,w,x,O,S,E,j,C,R,T,D,P,A,N,F,$,I,_,L,B,U,H,W,G,q,V,X,J,K,Z,Q,ee,te,ne,re,ie,oe=arguments;return Ev.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie=function(){W&&document.removeEventListener("click",W),I.finalize()},f=oe.length>3?oe[3]:void 0,p=(d=oe.length>2&&void 0!==oe[2]?oe[2]:{}).theme?(0,z.mergeConfig)(a[d.theme],null!==(r=d.config)&&void 0!==r?r:{}):d.config,h=(0,z.isBoolean)(d.actions)?d.actions:Mb({},Jb,null!==(i=d.actions)&&void 0!==i?i:{}),g=Gb(Gb({},Yb),d.i18n),m=null!==(o=d.renderer)&&void 0!==o?o:"canvas",v=null!==(s=d.logLevel)&&void 0!==s?s:qb.Warn,b=null!==(l=d.downloadFileName)&&void 0!==l?l:"visualization",y="string"==typeof t?document.querySelector(t):t){e.next=12;break}throw new Error("".concat(t," does not exist"));case 12:if(!1!==d.defaultStyle&&(w="vega-embed-style",x=uy(y),O=x.root,S=x.rootContainer,O.getElementById(w)||((E=document.createElement("style")).id=w,E.innerHTML=void 0===d.defaultStyle||!0===d.defaultStyle?Lb.toString():d.defaultStyle,S.appendChild(E))),j=ry(n,d.mode),C=Qb[j](n,p),"vega-lite"===j&&C.$schema&&(R=zg(C.$schema),Ib(Zb.vega,"^".concat(R.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(R.version,", but current version is v").concat(Zb.vega,"."))),y.classList.add("vega-embed"),h&&y.classList.add("has-actions"),y.innerHTML="",T=y,h&&((D=document.createElement("div")).classList.add(ty),y.appendChild(D),T=D),(P=d.patch)&&(C=P instanceof Function?P(C):k(C,P,!0,!1).newDocument),d.formatLocale&&qb.formatLocale(d.formatLocale),d.timeFormatLocale&&qb.timeFormatLocale(d.timeFormatLocale),d.expressionFunctions)for(A in d.expressionFunctions)"fn"in(N=d.expressionFunctions[A])?qb.expressionFunction(A,N.fn,N.visitor):N instanceof Function&&qb.expressionFunction(A,N);return F=d.ast,$=qb.parse(C,"vega-lite"===j?{}:p,{ast:F}),(I=new(d.viewClass||qb.View)($,Gb({loader:f,logLevel:v,renderer:m},F?{expr:null!==(c=null!==(u=qb.expressionInterpreter)&&void 0!==u?u:d.expr)&&void 0!==c?c:Y}:{}))).addSignalListener("autosize",((e,t)=>{var n=t.type;"fit-x"==n?(T.classList.add("fit-x"),T.classList.remove("fit-y")):"fit-y"==n?(T.classList.remove("fit-x"),T.classList.add("fit-y")):"fit"==n?T.classList.add("fit-x","fit-y"):T.classList.remove("fit-x","fit-y")})),!1!==d.tooltip&&(ae=d.tooltip,_="function"==typeof ae?d.tooltip:new Mm(!0===d.tooltip?{}:d.tooltip).call,I.tooltip(_)),void 0===(L=d.hover)&&(L="vega"===j),L&&(U=(B="boolean"==typeof L?{}:L).hoverSet,H=B.updateSet,I.hover(U,H)),d&&(null!=d.width&&I.width(d.width),null!=d.height&&I.height(d.height),null!=d.padding&&I.padding(d.padding)),e.next=37,I.initialize(T,d.bind).runAsync();case 37:if(!1===h){e.next=63;break}if(G=y,!1!==d.defaultStyle&&((q=document.createElement("details")).title=g.CLICK_TO_VIEW_ACTIONS,y.append(q),G=q,(V=document.createElement("summary")).innerHTML=ey,q.append(V),W=e=>{q.contains(e.target)||q.removeAttribute("open")},document.addEventListener("click",W)),X=document.createElement("div"),G.append(X),X.classList.add("vega-actions"),!0!==h&&!1===h.export){e.next=60;break}J=Ub(["svg","png"]),e.prev=45,Z=Ev.mark((function e(){var t,n,r,i;return Ev.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=K.value,(!0===h||!0===h.export||h.export[t])&&(n=g["".concat(t.toUpperCase(),"_ACTION")],r=document.createElement("a"),i=(0,z.isObject)(d.scaleFactor)?d.scaleFactor[t]:d.scaleFactor,r.text=n,r.href="#",r.target="_blank",r.download="".concat(b,".").concat(t),r.addEventListener("mousedown",function(){var e=Gm(Ev.mark((function e(n){var r;return Ev.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,I.toImageURL(t,i);case 3:r=e.sent,this.href=r;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),X.append(r));case 2:case"end":return e.stop()}}),e)})),J.s();case 48:if((K=J.n()).done){e.next=52;break}return e.delegateYield(Z(),"t0",50);case 50:e.next=48;break;case 52:e.next=57;break;case 54:e.prev=54,e.t1=e.catch(45),J.e(e.t1);case 57:return e.prev=57,J.f(),e.finish(57);case 60:!0!==h&&!1===h.source||((Q=document.createElement("a")).text=g.SOURCE_ACTION,Q.href="#",Q.addEventListener("click",(function(e){var t,r;ny(M()(n),null!==(t=d.sourceHeader)&&void 0!==t?t:"",null!==(r=d.sourceFooter)&&void 0!==r?r:"",j),e.preventDefault()})),X.append(Q)),"vega-lite"!==j||!0!==h&&!1===h.compiled||((ee=document.createElement("a")).text=g.COMPILED_ACTION,ee.href="#",ee.addEventListener("click",(function(e){var t,n;ny(M()(C),null!==(t=d.sourceHeader)&&void 0!==t?t:"",null!==(n=d.sourceFooter)&&void 0!==n?n:"","vega"),e.preventDefault()})),X.append(ee)),!0!==h&&!1===h.editor||(ne=null!==(te=d.editorUrl)&&void 0!==te?te:"https://vega.github.io/editor/",(re=document.createElement("a")).text=g.EDITOR_ACTION,re.href="#",re.addEventListener("click",(function(e){_b(window,ne,{config:p,mode:j,renderer:m,spec:M()(n)}),e.preventDefault()})),X.append(re));case 63:return e.abrupt("return",{view:I,spec:n,vgSpec:C,finalize:ie,embedOptions:d});case 64:case"end":return e.stop()}var ae}),e,null,[[45,54,57,60]])}))),fy.apply(this,arguments)}},2477:e=>{"use strict";var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var n=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0}return t(e,null,[{key:"escapeForHtml",value:function(t){return(new e).escapeForHtml(t)}},{key:"linkify",value:function(t){return(new e).linkify(t)}},{key:"ansiToHtml",value:function(t,n){return(new e).ansiToHtml(t,n)}},{key:"ansiToJson",value:function(t,n){return(new e).ansiToJson(t,n)}},{key:"ansiToText",value:function(t){return(new e).ansiToText(t)}}]),t(e,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var e=0;e<2;++e)for(var t=0;t<8;++t)this.PALETTE_COLORS.push(n[e][t].color);for(var r=[0,95,135,175,215,255],i=function(e,t,n){return r[e]+", "+r[t]+", "+r[n]},o=0;o<6;++o)for(var a=0;a<6;++a)for(var s=0;s<6;++s)this.PALETTE_COLORS.push(i(o,a,s));for(var l=8,c=0;c<24;++c,l+=10)this.PALETTE_COLORS.push(i(l,l,l))}},{key:"escapeForHtml",value:function(e){return e.replace(/[&<>]/gm,(function(e){return"&"==e?"&amp;":"<"==e?"&lt;":">"==e?"&gt;":""}))}},{key:"linkify",value:function(e){return e.replace(/(https?:\/\/[^\s]+)/gm,(function(e){return'<a href="'+e+'">'+e+"</a>"}))}},{key:"ansiToHtml",value:function(e,t){return this.process(e,t,!0)}},{key:"ansiToJson",value:function(e,t){return(t=t||{}).json=!0,t.clearLine=!1,this.process(e,t,!0)}},{key:"ansiToText",value:function(e){return this.process(e,{},!1)}},{key:"process",value:function(e,t,n){var r=this,i=e.split(/\033\[/),o=i.shift();null==t&&(t={}),t.clearLine=/\r/.test(e);var a=i.map((function(e){return r.processChunk(e,t,n)}));if(t&&t.json){var s=this.processChunkJson("");return s.content=o,s.clearLine=t.clearLine,a.unshift(s),t.remove_empty&&(a=a.filter((function(e){return!e.isEmpty()}))),a}return a.unshift(o),a.join("")}},{key:"processChunkJson",value:function(e,t,r){var i=(t=void 0===t?{}:t).use_classes=void 0!==t.use_classes&&t.use_classes,o=t.key=i?"class":"color",a={content:e,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,clearLine:t.clearLine,decoration:null,was_processed:!1,isEmpty:function(){return!a.content}},s=e.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!s)return a;a.content=s[4];var l=s[2].split(";");if(""!==s[1]||"m"!==s[3])return a;if(!r)return a;var c=this;for(c.decoration=null;l.length>0;){var u=l.shift(),d=parseInt(u);if(isNaN(d)||0===d)c.fg=c.bg=c.decoration=null;else if(1===d)c.decoration="bold";else if(2===d)c.decoration="dim";else if(3==d)c.decoration="italic";else if(4==d)c.decoration="underline";else if(5==d)c.decoration="blink";else if(7===d)c.decoration="reverse";else if(8===d)c.decoration="hidden";else if(9===d)c.decoration="strikethrough";else if(39==d)c.fg=null;else if(49==d)c.bg=null;else if(d>=30&&d<38)c.fg=n[0][d%10][o];else if(d>=90&&d<98)c.fg=n[1][d%10][o];else if(d>=40&&d<48)c.bg=n[0][d%10][o];else if(d>=100&&d<108)c.bg=n[1][d%10][o];else if(38===d||48===d){var f=38===d;if(l.length>=1){var p=l.shift();if("5"===p&&l.length>=1){var h=parseInt(l.shift());if(h>=0&&h<=255)if(i){var g=h>=16?"ansi-palette-"+h:n[h>7?1:0][h%8].class;f?c.fg=g:c.bg=g}else this.PALETTE_COLORS||c.setupPalette(),f?c.fg=this.PALETTE_COLORS[h]:c.bg=this.PALETTE_COLORS[h]}else if("2"===p&&l.length>=3){var m=parseInt(l.shift()),v=parseInt(l.shift()),b=parseInt(l.shift());if(m>=0&&m<=255&&v>=0&&v<=255&&b>=0&&b<=255){var y=m+", "+v+", "+b;i?f?(c.fg="ansi-truecolor",c.fg_truecolor=y):(c.bg="ansi-truecolor",c.bg_truecolor=y):f?c.fg=y:c.bg=y}}}}}if(null===c.fg&&null===c.bg&&null===c.decoration)return a;return a.fg=c.fg,a.bg=c.bg,a.fg_truecolor=c.fg_truecolor,a.bg_truecolor=c.bg_truecolor,a.decoration=c.decoration,a.was_processed=!0,a}},{key:"processChunk",value:function(e,t,n){var r=this;t=t||{};var i=this.processChunkJson(e,t,n);if(t.json)return i;if(i.isEmpty())return"";if(!i.was_processed)return i.content;var o=t.use_classes,a=[],s=[],l={},c=function(e){var t=[],n=void 0;for(n in e)e.hasOwnProperty(n)&&t.push("data-"+n+'="'+r.escapeForHtml(e[n])+'"');return t.length>0?" "+t.join(" "):""};return i.fg&&(o?(s.push(i.fg+"-fg"),null!==i.fg_truecolor&&(l["ansi-truecolor-fg"]=i.fg_truecolor,i.fg_truecolor=null)):a.push("color:rgb("+i.fg+")")),i.bg&&(o?(s.push(i.bg+"-bg"),null!==i.bg_truecolor&&(l["ansi-truecolor-bg"]=i.bg_truecolor,i.bg_truecolor=null)):a.push("background-color:rgb("+i.bg+")")),i.decoration&&(o?s.push("ansi-"+i.decoration):"bold"===i.decoration?a.push("font-weight:bold"):"dim"===i.decoration?a.push("opacity:0.5"):"italic"===i.decoration?a.push("font-style:italic"):"reverse"===i.decoration?a.push("filter:invert(100%)"):"hidden"===i.decoration?a.push("visibility:hidden"):"strikethrough"===i.decoration?a.push("text-decoration:line-through"):a.push("text-decoration:"+i.decoration)),o?'<span class="'+s.join(" ")+'"'+c(l)+">"+i.content+"</span>":'<span style="'+a.join(";")+'"'+c(l)+">"+i.content+"</span>"}}]),e}();e.exports=r},9421:(e,t,n)=>{var r=n(57510).Buffer,i=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,n,i;try{t=Map}catch(e){t=function(){}}try{n=Set}catch(e){n=function(){}}try{i=Promise}catch(e){i=function(){}}function o(a,l,c,u,d){"object"==typeof l&&(c=l.depth,u=l.prototype,d=l.includeNonEnumerable,l=l.circular);var f=[],p=[],h=void 0!==r;return void 0===l&&(l=!0),void 0===c&&(c=1/0),function a(c,g){if(null===c)return null;if(0===g)return c;var m,v;if("object"!=typeof c)return c;if(e(c,t))m=new t;else if(e(c,n))m=new n;else if(e(c,i))m=new i((function(e,t){c.then((function(t){e(a(t,g-1))}),(function(e){t(a(e,g-1))}))}));else if(o.__isArray(c))m=[];else if(o.__isRegExp(c))m=new RegExp(c.source,s(c)),c.lastIndex&&(m.lastIndex=c.lastIndex);else if(o.__isDate(c))m=new Date(c.getTime());else{if(h&&r.isBuffer(c))return m=r.allocUnsafe?r.allocUnsafe(c.length):new r(c.length),c.copy(m),m;e(c,Error)?m=Object.create(c):void 0===u?(v=Object.getPrototypeOf(c),m=Object.create(v)):(m=Object.create(u),v=u)}if(l){var b=f.indexOf(c);if(-1!=b)return p[b];f.push(c),p.push(m)}for(var y in e(c,t)&&c.forEach((function(e,t){var n=a(t,g-1),r=a(e,g-1);m.set(n,r)})),e(c,n)&&c.forEach((function(e){var t=a(e,g-1);m.add(t)})),c){var w;v&&(w=Object.getOwnPropertyDescriptor(v,y)),w&&null==w.set||(m[y]=a(c[y],g-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);for(y=0;y<x.length;y++){var O=x[y];(!(E=Object.getOwnPropertyDescriptor(c,O))||E.enumerable||d)&&(m[O]=a(c[O],g-1),E.enumerable||Object.defineProperty(m,O,{enumerable:!1}))}}if(d){var S=Object.getOwnPropertyNames(c);for(y=0;y<S.length;y++){var E,k=S[y];(E=Object.getOwnPropertyDescriptor(c,k))&&E.enumerable||(m[k]=a(c[k],g-1),Object.defineProperty(m,k,{enumerable:!1}))}}return m}(a,c)}function a(e){return Object.prototype.toString.call(e)}function s(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return o.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},o.__objToStr=a,o.__isDate=function(e){return"object"==typeof e&&"[object Date]"===a(e)},o.__isArray=function(e){return"object"==typeof e&&"[object Array]"===a(e)},o.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===a(e)},o.__getRegExpFlags=s,o}();e.exports&&(e.exports=i)},13020:(e,t,n)=>{"use strict";n.d(t,{WU:()=>d,jH:()=>f});var r=n(11736);var i=n(46317);var o,a=n(74638);function s(e,t){var n=(0,a.V)(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const l={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:a.Z,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>s(100*e,t),r:s,s:function(e,t){var n=(0,a.V)(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(o=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+(0,a.V)(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function c(e){return e}var u,d,f,p=Array.prototype.map,h=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function g(e){var t,n,a=void 0===e.grouping||void 0===e.thousands?c:(t=p.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),s=void 0===e.currency?"":e.currency[0]+"",u=void 0===e.currency?"":e.currency[1]+"",d=void 0===e.decimal?".":e.decimal+"",f=void 0===e.numerals?c:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(p.call(e.numerals,String)),g=void 0===e.percent?"%":e.percent+"",m=void 0===e.minus?"":e.minus+"",v=void 0===e.nan?"NaN":e.nan+"";function b(e){var t=(e=(0,i.Z)(e)).fill,n=e.align,r=e.sign,c=e.symbol,p=e.zero,b=e.width,y=e.comma,w=e.precision,x=e.trim,O=e.type;"n"===O?(y=!0,O="g"):l[O]||(void 0===w&&(w=12),x=!0,O="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var S="$"===c?s:"#"===c&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",E="$"===c?u:/[%p]/.test(O)?g:"",k=l[O],j=/[defgprs%]/.test(O);function C(e){var i,s,l,c=S,u=E;if("c"===O)u=k(e)+u,e="";else{var g=(e=+e)<0||1/e<0;if(e=isNaN(e)?v:k(Math.abs(e),w),x&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),g&&0==+e&&"+"!==r&&(g=!1),c=(g?"("===r?r:m:"-"===r||"("===r?"":r)+c,u=("s"===O?h[8+o/3]:"")+u+(g&&"("===r?")":""),j)for(i=-1,s=e.length;++i<s;)if(48>(l=e.charCodeAt(i))||l>57){u=(46===l?d+e.slice(i+1):e.slice(i))+u,e=e.slice(0,i);break}}y&&!p&&(e=a(e,1/0));var C=c.length+e.length+u.length,R=C<b?new Array(b-C+1).join(t):"";switch(y&&p&&(e=a(R+e,R.length?b-u.length:1/0),R=""),n){case"<":e=c+e+u+R;break;case"=":e=c+R+e+u;break;case"^":e=R.slice(0,C=R.length>>1)+c+e+u+R.slice(C);break;default:e=R+c+e+u}return f(e)}return w=void 0===w?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),C.toString=function(){return e+""},C}return{format:b,formatPrefix:function(e,t){var n=b(((e=(0,i.Z)(e)).type="f",e)),o=3*Math.max(-8,Math.min(8,Math.floor((0,r.Z)(t)/3))),a=Math.pow(10,-o),s=h[8+o/3];return function(e){return n(a*e)+s}}}}u=g({thousands:",",grouping:[3],currency:["$",""]}),d=u.format,f=u.formatPrefix},11736:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(74638);function i(e){return(e=(0,r.V)(Math.abs(e)))?e[1]:NaN}},74638:(e,t,n)=>{"use strict";function r(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function i(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}n.d(t,{V:()=>i,Z:()=>r})},46317:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(e){if(!(t=r.exec(e)))throw new Error("invalid format: "+e);var t;return new o({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function o(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}i.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},86284:function(e){e.exports=function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,n){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,n)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function r(e,i,o){return r=n()?Reflect.construct:function(e,n,r){var i=[null];i.push.apply(i,n);var o=new(Function.bind.apply(e,i));return r&&t(o,r.prototype),o},r.apply(null,arguments)}function i(e){return o(e)||a(e)||s(e)||c()}function o(e){if(Array.isArray(e))return l(e)}function a(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=Object.hasOwnProperty,d=Object.setPrototypeOf,f=Object.isFrozen,p=Object.getPrototypeOf,h=Object.getOwnPropertyDescriptor,g=Object.freeze,m=Object.seal,v=Object.create,b="undefined"!=typeof Reflect&&Reflect,y=b.apply,w=b.construct;y||(y=function(e,t,n){return e.apply(t,n)}),g||(g=function(e){return e}),m||(m=function(e){return e}),w||(w=function(e,t){return r(e,i(t))});var x=A(Array.prototype.forEach),O=A(Array.prototype.pop),S=A(Array.prototype.push),E=A(String.prototype.toLowerCase),k=A(String.prototype.toString),j=A(String.prototype.match),C=A(String.prototype.replace),R=A(String.prototype.indexOf),T=A(String.prototype.trim),D=A(RegExp.prototype.test),P=N(TypeError);function A(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return y(e,t,r)}}function N(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return w(e,n)}}function F(e,t,n){n=n||E,d&&d(e,null);for(var r=t.length;r--;){var i=t[r];if("string"==typeof i){var o=n(i);o!==i&&(f(t)||(t[r]=o),i=o)}e[i]=!0}return e}function $(e){var t,n=v(null);for(t in e)!0===y(u,e,[t])&&(n[t]=e[t]);return n}function I(e,t){for(;null!==e;){var n=h(e,t);if(n){if(n.get)return A(n.get);if("function"==typeof n.value)return A(n.value)}e=p(e)}function r(e){return console.warn("fallback value for",e),null}return r}var _=g(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=g(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),M=g(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),z=g(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),B=g(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),U=g(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),H=g(["#text"]),W=g(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),G=g(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),q=g(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),V=g(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),X=m(/\{\{[\w\W]*|[\w\W]*\}\}/gm),J=m(/<%[\w\W]*|[\w\W]*%>/gm),Y=m(/\${[\w\W]*}/gm),K=m(/^data-[\-\w.\u00B7-\uFFFF]/),Z=m(/^aria-[\-\w]+$/),Q=m(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ee=m(/^(?:\w+script|data):/i),te=m(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ne=m(/^html$/i),re=function(){return"undefined"==typeof window?null:window},ie=function(t,n){if("object"!==e(t)||"function"!=typeof t.createPolicy)return null;var r=null,i="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(i)&&(r=n.currentScript.getAttribute(i));var o="dompurify"+(r?"#"+r:"");try{return t.createPolicy(o,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function oe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re(),n=function(e){return oe(e)};if(n.version="2.4.3",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,o=t.document,a=t.DocumentFragment,s=t.HTMLTemplateElement,l=t.Node,c=t.Element,u=t.NodeFilter,d=t.NamedNodeMap,f=void 0===d?t.NamedNodeMap||t.MozNamedAttrMap:d,p=t.HTMLFormElement,h=t.DOMParser,m=t.trustedTypes,v=c.prototype,b=I(v,"cloneNode"),y=I(v,"nextSibling"),w=I(v,"childNodes"),A=I(v,"parentNode");if("function"==typeof s){var N=o.createElement("template");N.content&&N.content.ownerDocument&&(o=N.content.ownerDocument)}var ae=ie(m,r),se=ae?ae.createHTML(""):"",le=o,ce=le.implementation,ue=le.createNodeIterator,de=le.createDocumentFragment,fe=le.getElementsByTagName,pe=r.importNode,he={};try{he=$(o).documentMode?o.documentMode:{}}catch(e){}var ge={};n.isSupported="function"==typeof A&&ce&&void 0!==ce.createHTMLDocument&&9!==he;var me,ve,be=X,ye=J,we=Y,xe=K,Oe=Z,Se=ee,Ee=te,ke=Q,je=null,Ce=F({},[].concat(i(_),i(L),i(M),i(B),i(H))),Re=null,Te=F({},[].concat(i(W),i(G),i(q),i(V))),De=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Pe=null,Ae=null,Ne=!0,Fe=!0,$e=!1,Ie=!1,_e=!1,Le=!1,Me=!1,ze=!1,Be=!1,Ue=!1,He=!0,We=!1,Ge="user-content-",qe=!0,Ve=!1,Xe={},Je=null,Ye=F({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ke=null,Ze=F({},["audio","video","img","source","image","track"]),Qe=null,et=F({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tt="http://www.w3.org/1998/Math/MathML",nt="http://www.w3.org/2000/svg",rt="http://www.w3.org/1999/xhtml",it=rt,ot=!1,at=null,st=F({},[tt,nt,rt],k),lt=["application/xhtml+xml","text/html"],ct="text/html",ut=null,dt=o.createElement("form"),ft=function(e){return e instanceof RegExp||e instanceof Function},pt=function(t){ut&&ut===t||(t&&"object"===e(t)||(t={}),t=$(t),me=me=-1===lt.indexOf(t.PARSER_MEDIA_TYPE)?ct:t.PARSER_MEDIA_TYPE,ve="application/xhtml+xml"===me?k:E,je="ALLOWED_TAGS"in t?F({},t.ALLOWED_TAGS,ve):Ce,Re="ALLOWED_ATTR"in t?F({},t.ALLOWED_ATTR,ve):Te,at="ALLOWED_NAMESPACES"in t?F({},t.ALLOWED_NAMESPACES,k):st,Qe="ADD_URI_SAFE_ATTR"in t?F($(et),t.ADD_URI_SAFE_ATTR,ve):et,Ke="ADD_DATA_URI_TAGS"in t?F($(Ze),t.ADD_DATA_URI_TAGS,ve):Ze,Je="FORBID_CONTENTS"in t?F({},t.FORBID_CONTENTS,ve):Ye,Pe="FORBID_TAGS"in t?F({},t.FORBID_TAGS,ve):{},Ae="FORBID_ATTR"in t?F({},t.FORBID_ATTR,ve):{},Xe="USE_PROFILES"in t&&t.USE_PROFILES,Ne=!1!==t.ALLOW_ARIA_ATTR,Fe=!1!==t.ALLOW_DATA_ATTR,$e=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Ie=t.SAFE_FOR_TEMPLATES||!1,_e=t.WHOLE_DOCUMENT||!1,ze=t.RETURN_DOM||!1,Be=t.RETURN_DOM_FRAGMENT||!1,Ue=t.RETURN_TRUSTED_TYPE||!1,Me=t.FORCE_BODY||!1,He=!1!==t.SANITIZE_DOM,We=t.SANITIZE_NAMED_PROPS||!1,qe=!1!==t.KEEP_CONTENT,Ve=t.IN_PLACE||!1,ke=t.ALLOWED_URI_REGEXP||ke,it=t.NAMESPACE||rt,t.CUSTOM_ELEMENT_HANDLING&&ft(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(De.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ft(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(De.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(De.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ie&&(Fe=!1),Be&&(ze=!0),Xe&&(je=F({},i(H)),Re=[],!0===Xe.html&&(F(je,_),F(Re,W)),!0===Xe.svg&&(F(je,L),F(Re,G),F(Re,V)),!0===Xe.svgFilters&&(F(je,M),F(Re,G),F(Re,V)),!0===Xe.mathMl&&(F(je,B),F(Re,q),F(Re,V))),t.ADD_TAGS&&(je===Ce&&(je=$(je)),F(je,t.ADD_TAGS,ve)),t.ADD_ATTR&&(Re===Te&&(Re=$(Re)),F(Re,t.ADD_ATTR,ve)),t.ADD_URI_SAFE_ATTR&&F(Qe,t.ADD_URI_SAFE_ATTR,ve),t.FORBID_CONTENTS&&(Je===Ye&&(Je=$(Je)),F(Je,t.FORBID_CONTENTS,ve)),qe&&(je["#text"]=!0),_e&&F(je,["html","head","body"]),je.table&&(F(je,["tbody"]),delete Pe.tbody),g&&g(t),ut=t)},ht=F({},["mi","mo","mn","ms","mtext"]),gt=F({},["foreignobject","desc","title","annotation-xml"]),mt=F({},["title","style","font","a","script"]),vt=F({},L);F(vt,M),F(vt,z);var bt=F({},B);F(bt,U);var yt=function(e){var t=A(e);t&&t.tagName||(t={namespaceURI:it,tagName:"template"});var n=E(e.tagName),r=E(t.tagName);return!!at[e.namespaceURI]&&(e.namespaceURI===nt?t.namespaceURI===rt?"svg"===n:t.namespaceURI===tt?"svg"===n&&("annotation-xml"===r||ht[r]):Boolean(vt[n]):e.namespaceURI===tt?t.namespaceURI===rt?"math"===n:t.namespaceURI===nt?"math"===n&&gt[r]:Boolean(bt[n]):e.namespaceURI===rt?!(t.namespaceURI===nt&&!gt[r])&&!(t.namespaceURI===tt&&!ht[r])&&!bt[n]&&(mt[n]||!vt[n]):!("application/xhtml+xml"!==me||!at[e.namespaceURI]))},wt=function(e){S(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=se}catch(t){e.remove()}}},xt=function(e,t){try{S(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){S(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Re[e])if(ze||Be)try{wt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Ot=function(e){var t,n;if(Me)e="<remove></remove>"+e;else{var r=j(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===me&&it===rt&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var i=ae?ae.createHTML(e):e;if(it===rt)try{t=(new h).parseFromString(i,me)}catch(e){}if(!t||!t.documentElement){t=ce.createDocument(it,"template",null);try{t.documentElement.innerHTML=ot?se:i}catch(e){}}var a=t.body||t.documentElement;return e&&n&&a.insertBefore(o.createTextNode(n),a.childNodes[0]||null),it===rt?fe.call(t,_e?"html":"body")[0]:_e?t.documentElement:a},St=function(e){return ue.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},Et=function(e){return e instanceof p&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof f)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},kt=function(t){return"object"===e(l)?t instanceof l:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},jt=function(e,t,r){ge[e]&&x(ge[e],(function(e){e.call(n,t,r,ut)}))},Ct=function(e){var t;if(jt("beforeSanitizeElements",e,null),Et(e))return wt(e),!0;if(D(/[\u0080-\uFFFF]/,e.nodeName))return wt(e),!0;var r=ve(e.nodeName);if(jt("uponSanitizeElement",e,{tagName:r,allowedTags:je}),e.hasChildNodes()&&!kt(e.firstElementChild)&&(!kt(e.content)||!kt(e.content.firstElementChild))&&D(/<[/\w]/g,e.innerHTML)&&D(/<[/\w]/g,e.textContent))return wt(e),!0;if("select"===r&&D(/<template/i,e.innerHTML))return wt(e),!0;if(!je[r]||Pe[r]){if(!Pe[r]&&Tt(r)){if(De.tagNameCheck instanceof RegExp&&D(De.tagNameCheck,r))return!1;if(De.tagNameCheck instanceof Function&&De.tagNameCheck(r))return!1}if(qe&&!Je[r]){var i=A(e)||e.parentNode,o=w(e)||e.childNodes;if(o&&i)for(var a=o.length-1;a>=0;--a)i.insertBefore(b(o[a],!0),y(e))}return wt(e),!0}return e instanceof c&&!yt(e)?(wt(e),!0):"noscript"!==r&&"noembed"!==r||!D(/<\/no(script|embed)/i,e.innerHTML)?(Ie&&3===e.nodeType&&(t=e.textContent,t=C(t,be," "),t=C(t,ye," "),t=C(t,we," "),e.textContent!==t&&(S(n.removed,{element:e.cloneNode()}),e.textContent=t)),jt("afterSanitizeElements",e,null),!1):(wt(e),!0)},Rt=function(e,t,n){if(He&&("id"===t||"name"===t)&&(n in o||n in dt))return!1;if(Fe&&!Ae[t]&&D(xe,t));else if(Ne&&D(Oe,t));else if(!Re[t]||Ae[t]){if(!(Tt(e)&&(De.tagNameCheck instanceof RegExp&&D(De.tagNameCheck,e)||De.tagNameCheck instanceof Function&&De.tagNameCheck(e))&&(De.attributeNameCheck instanceof RegExp&&D(De.attributeNameCheck,t)||De.attributeNameCheck instanceof Function&&De.attributeNameCheck(t))||"is"===t&&De.allowCustomizedBuiltInElements&&(De.tagNameCheck instanceof RegExp&&D(De.tagNameCheck,n)||De.tagNameCheck instanceof Function&&De.tagNameCheck(n))))return!1}else if(Qe[t]);else if(D(ke,C(n,Ee,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==R(n,"data:")||!Ke[e])if($e&&!D(Se,C(n,Ee,"")));else if(n)return!1;return!0},Tt=function(e){return e.indexOf("-")>0},Dt=function(t){var r,i,o,a;jt("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Re};for(a=s.length;a--;){var c=r=s[a],u=c.name,d=c.namespaceURI;if(i="value"===u?r.value:T(r.value),o=ve(u),l.attrName=o,l.attrValue=i,l.keepAttr=!0,l.forceKeepAttr=void 0,jt("uponSanitizeAttribute",t,l),i=l.attrValue,!l.forceKeepAttr&&(xt(u,t),l.keepAttr))if(D(/\/>/i,i))xt(u,t);else{Ie&&(i=C(i,be," "),i=C(i,ye," "),i=C(i,we," "));var f=ve(t.nodeName);if(Rt(f,o,i)){if(!We||"id"!==o&&"name"!==o||(xt(u,t),i=Ge+i),ae&&"object"===e(m)&&"function"==typeof m.getAttributeType)if(d);else switch(m.getAttributeType(f,o)){case"TrustedHTML":i=ae.createHTML(i);break;case"TrustedScriptURL":i=ae.createScriptURL(i)}try{d?t.setAttributeNS(d,u,i):t.setAttribute(u,i),O(n.removed)}catch(e){}}}}jt("afterSanitizeAttributes",t,null)}},Pt=function e(t){var n,r=St(t);for(jt("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)jt("uponSanitizeShadowNode",n,null),Ct(n)||(n.content instanceof a&&e(n.content),Dt(n));jt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(i){var o,s,c,u,d,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((ot=!i)&&(i="\x3c!--\x3e"),"string"!=typeof i&&!kt(i)){if("function"!=typeof i.toString)throw P("toString is not a function");if("string"!=typeof(i=i.toString()))throw P("dirty is not a string, aborting")}if(!n.isSupported){if("object"===e(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof i)return t.toStaticHTML(i);if(kt(i))return t.toStaticHTML(i.outerHTML)}return i}if(Le||pt(f),n.removed=[],"string"==typeof i&&(Ve=!1),Ve){if(i.nodeName){var p=ve(i.nodeName);if(!je[p]||Pe[p])throw P("root node is forbidden and cannot be sanitized in-place")}}else if(i instanceof l)1===(s=(o=Ot("\x3c!----\x3e")).ownerDocument.importNode(i,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?o=s:o.appendChild(s);else{if(!ze&&!Ie&&!_e&&-1===i.indexOf("<"))return ae&&Ue?ae.createHTML(i):i;if(!(o=Ot(i)))return ze?null:Ue?se:""}o&&Me&&wt(o.firstChild);for(var h=St(Ve?i:o);c=h.nextNode();)3===c.nodeType&&c===u||Ct(c)||(c.content instanceof a&&Pt(c.content),Dt(c),u=c);if(u=null,Ve)return i;if(ze){if(Be)for(d=de.call(o.ownerDocument);o.firstChild;)d.appendChild(o.firstChild);else d=o;return Re.shadowroot&&(d=pe.call(r,d,!0)),d}var g=_e?o.outerHTML:o.innerHTML;return _e&&je["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&D(ne,o.ownerDocument.doctype.name)&&(g="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+g),Ie&&(g=C(g,be," "),g=C(g,ye," "),g=C(g,we," ")),ae&&Ue?ae.createHTML(g):g},n.setConfig=function(e){pt(e),Le=!0},n.clearConfig=function(){ut=null,Le=!1},n.isValidAttribute=function(e,t,n){ut||pt({});var r=ve(e),i=ve(t);return Rt(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(ge[e]=ge[e]||[],S(ge[e],t))},n.removeHook=function(e){if(ge[e])return O(ge[e])},n.removeHooks=function(e){ge[e]&&(ge[e]=[])},n.removeAllHooks=function(){ge={}},n}return oe()}()},39121:e=>{function t(e){if(!e)return"";if(!/\r/.test(e))return e;for(e=e.replace(/\r+\n/gm,"\n");/\r[^$]/.test(e);){var t=/^(.*)\r+/m.exec(e)[1],n=/\r+(.*)$/m.exec(e)[1];n+=t.slice(n.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,n)}return e}function n(e){for(var t=0,n=0;n<e.length;n++)e[t].length<=e[n].length&&(t=n);return t}function r(e){if(!/\r/.test(e))return e;for(var t=e.split("\r"),r=[];t.length>0;){var i=n(t);r.push(t[i]),t=t.slice(i+1)}return r.join("\r")}e.exports=t,e.exports.escapeCarriageReturn=t,e.exports.escapeCarriageReturnSafe=function(e){if(!e)return"";if(!/\r/.test(e))return e;if(!/\n/.test(e))return r(e);var n=(e=e.replace(/\r+\n/gm,"\n")).lastIndexOf("\n");return t(e.slice(0,n))+"\n"+r(e.slice(n+1))}},62125:(e,t,n)=>{e.exports=window.DOMPurify||(window.DOMPurify=n(86284).default||n(86284))},18781:(e,t,n)=>{var r=n(20852),i=n(15876),o=n(83571);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},38508:(e,t,n)=>{var r=n(83571),i=n(8393);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):0}},5795:(e,t,n)=>{var r=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof o?new o(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,o;switch(n=n||{},i.util.type(t)){case"Object":if(o=i.util.objId(t),n[o])return n[o];for(var a in r={},n[o]=r,t)t.hasOwnProperty(a)&&(r[a]=e(t[a],n));return r;case"Array":return o=i.util.objId(t),n[o]?n[o]:(r=[],n[o]=r,t.forEach((function(t,i){r[i]=e(t,n)})),r);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var o=(r=r||i.languages)[e],a={};for(var s in o)if(o.hasOwnProperty(s)){if(s==t)for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);n.hasOwnProperty(s)||(a[s]=o[s])}var c=r[e];return r[e]=a,i.languages.DFS(i.languages,(function(t,n){n===c&&t!=e&&(this[t]=a)})),a},DFS:function e(t,n,r,o){o=o||{};var a=i.util.objId;for(var s in t)if(t.hasOwnProperty(s)){n.call(t,s,t[s],r||s);var l=t[s],c=i.util.type(l);"Object"!==c||o[a(l)]?"Array"!==c||o[a(l)]||(o[a(l)]=!0,e(l,n,s,o)):(o[a(l)]=!0,e(l,n,null,o))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var o,a=0;o=r.elements[a++];)i.highlightElement(o,!0===t,r.callback)},highlightElement:function(t,n,r){var o=i.util.getLanguage(t),a=i.languages[o];i.util.setLanguage(t,o);var s=t.parentElement;s&&"pre"===s.nodeName.toLowerCase()&&i.util.setLanguage(s,o);var l={element:t,language:o,grammar:a,code:t.textContent};function c(e){l.highlightedCode=e,i.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i.hooks.run("after-highlight",l),i.hooks.run("complete",l),r&&r.call(l.element)}if(i.hooks.run("before-sanity-check",l),(s=l.element.parentElement)&&"pre"===s.nodeName.toLowerCase()&&!s.hasAttribute("tabindex")&&s.setAttribute("tabindex","0"),!l.code)return i.hooks.run("complete",l),void(r&&r.call(l.element));if(i.hooks.run("before-highlight",l),l.grammar)if(n&&e.Worker){var u=new Worker(i.filename);u.onmessage=function(e){c(e.data)},u.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(i.highlight(l.code,l.grammar,l.language));else c(i.util.encode(l.code))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};if(i.hooks.run("before-tokenize",r),!r.grammar)throw new Error('The language "'+r.language+'" has no grammar.');return r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),o.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var i=new l;return c(i,i.head,e),s(e,i,t,i.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(i)},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var r,o=0;r=n[o++];)r(t)}},Token:o};function o(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function a(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var o=i[1].length;i.index+=o,i[0]=i[0].slice(o)}return i}function s(e,t,n,r,l,d){for(var f in n)if(n.hasOwnProperty(f)&&n[f]){var p=n[f];p=Array.isArray(p)?p:[p];for(var h=0;h<p.length;++h){if(d&&d.cause==f+","+h)return;var g=p[h],m=g.inside,v=!!g.lookbehind,b=!!g.greedy,y=g.alias;if(b&&!g.pattern.global){var w=g.pattern.toString().match(/[imsuy]*$/)[0];g.pattern=RegExp(g.pattern.source,w+"g")}for(var x=g.pattern||g,O=r.next,S=l;O!==t.tail&&!(d&&S>=d.reach);S+=O.value.length,O=O.next){var E=O.value;if(t.length>e.length)return;if(!(E instanceof o)){var k,j=1;if(b){if(!(k=a(x,S,e,v))||k.index>=e.length)break;var C=k.index,R=k.index+k[0].length,T=S;for(T+=O.value.length;C>=T;)T+=(O=O.next).value.length;if(S=T-=O.value.length,O.value instanceof o)continue;for(var D=O;D!==t.tail&&(T<R||"string"==typeof D.value);D=D.next)j++,T+=D.value.length;j--,E=e.slice(S,T),k.index-=S}else if(!(k=a(x,0,E,v)))continue;C=k.index;var P=k[0],A=E.slice(0,C),N=E.slice(C+P.length),F=S+E.length;d&&F>d.reach&&(d.reach=F);var $=O.prev;if(A&&($=c(t,$,A),S+=A.length),u(t,$,j),O=c(t,$,new o(f,m?i.tokenize(P,m):P,y,P)),N&&c(t,O,N),j>1){var I={cause:f+","+h,reach:F};s(e,t,n,O.prev,S,I),d&&I.reach>d.reach&&(d.reach=I.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function u(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}if(e.Prism=i,o.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach((function(t){r+=e(t,n)})),r}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},a=t.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(o.classes,a):o.classes.push(a)),i.hooks.run("wrap",o);var s="";for(var l in o.attributes)s+=" "+l+'="'+(o.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+s+">"+o.content+"</"+o.tag+">"},!e.document)return e.addEventListener?(i.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),r=n.language,o=n.code,a=n.immediateClose;e.postMessage(i.highlight(o,i.languages[r],r)),a&&e.close()}),!1),i):i;var d=i.util.currentScript();function f(){i.manual||i.highlightAll()}if(d&&(i.filename=d.src,d.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var p=document.readyState;"loading"===p||"interactive"===p&&d&&d.defer?document.addEventListener("DOMContentLoaded",f):window.requestAnimationFrame?window.requestAnimationFrame(f):window.setTimeout(f,16)}return i}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=r),void 0!==n.g&&(n.g.Prism=r)},73927:()=>{Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python},9789:()=>{Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/}},58162:e=>{"use strict";var t=/("(?:[^\\"]|\\.)*")|[:,]/g;e.exports=function(e,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,void 0===n.indent?2:n.indent).slice(2,-3),i=""===r?1/0:void 0===n.maxLength?80:n.maxLength,o=n.replacer,function e(n,a,s){var l,c,u,d,f,p,h,g,m,v,b,y;if(n&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0===(b=JSON.stringify(n,o)))return b;if(h=i-a.length-s,b.length<=h&&(m=b.replace(t,(function(e,t){return t||e+" "}))).length<=h)return m;if(null!=o&&(n=JSON.parse(b),o=void 0),"object"==typeof n&&null!==n){if(g=a+r,u=[],c=0,Array.isArray(n))for(v="[",l="]",h=n.length;c<h;c++)u.push(e(n[c],g,c===h-1?0:1)||"null");else for(v="{",l="}",h=(p=Object.keys(n)).length;c<h;c++)d=p[c],f=JSON.stringify(d)+": ",void 0!==(y=e(n[d],g,f.length+(c===h-1?0:1)))&&u.push(f+y);if(u.length>0)return[v,r+u.join(",\n"+g),l].join("\n"+a)}return b}(e,"",0)}},15709:(e,t,n)=>{"use strict";n.d(t,{o:()=>m});var r=n(91987);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}var o,a=["bottom","height","left","right","top","width"],s=new Map,l=function e(){var t=[];s.forEach((function(e,n){var r,i,o=n.getBoundingClientRect();r=o,i=e.rect,void 0===r&&(r={}),void 0===i&&(i={}),a.some((function(e){return r[e]!==i[e]}))&&(e.rect=o,t.push(e))})),t.forEach((function(e){e.callbacks.forEach((function(t){return t(e.rect)}))})),o=window.requestAnimationFrame(e)};var c="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function u(e,t){void 0===t&&(t={width:0,height:0});var n=r.useState(e.current),i=n[0],a=n[1],u=r.useReducer(d,t),f=u[0],p=u[1],h=r.useRef(!1);return c((function(){e.current!==i&&a(e.current)})),c((function(){if(i&&!h.current){h.current=!0;var e=i.getBoundingClientRect();p({rect:e})}}),[i]),r.useEffect((function(){if(i){var e,t,n=(e=i,t=function(e){p({rect:e})},{observe:function(){var n=0===s.size;s.has(e)?s.get(e).callbacks.push(t):s.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),n&&l()},unobserve:function(){var n=s.get(e);if(n){var r=n.callbacks.indexOf(t);r>=0&&n.callbacks.splice(r,1),n.callbacks.length||s.delete(e),s.size||cancelAnimationFrame(o)}}});return n.observe(),function(){n.unobserve()}}}),[i]),f}function d(e,t){var n=t.rect;return e.height!==n.height||e.width!==n.width?n:e}var f=function(){return 50},p=function(e){return e},h=function(e,t){return e[t?"offsetWidth":"offsetHeight"]},g=function(e){for(var t=Math.max(e.start-e.overscan,0),n=Math.min(e.end+e.overscan,e.size-1),r=[],i=t;i<=n;i++)r.push(i);return r};function m(e){var t,n=e.size,o=void 0===n?0:n,a=e.estimateSize,s=void 0===a?f:a,l=e.overscan,d=void 0===l?1:l,m=e.paddingStart,b=void 0===m?0:m,y=e.paddingEnd,w=void 0===y?0:y,x=e.parentRef,O=e.horizontal,S=e.scrollToFn,E=e.useObserver,k=e.initialRect,j=e.onScrollElement,C=e.scrollOffsetFn,R=e.keyExtractor,T=void 0===R?p:R,D=e.measureSize,P=void 0===D?h:D,A=e.rangeExtractor,N=void 0===A?g:A,F=O?"width":"height",$=O?"scrollLeft":"scrollTop",I=r.useRef({scrollOffset:0,measurements:[]}),_=r.useState(0),L=_[0],M=_[1];I.current.scrollOffset=L;var z=(E||u)(x,k)[F];I.current.outerSize=z;var B=r.useCallback((function(e){x.current&&(x.current[$]=e)}),[x,$]),U=S||B;S=r.useCallback((function(e){U(e,B)}),[B,U]);var H=r.useState({}),W=H[0],G=H[1],q=r.useCallback((function(){return G({})}),[]),V=r.useRef([]),X=r.useMemo((function(){var e=V.current.length>0?Math.min.apply(Math,V.current):0;V.current=[];for(var t=I.current.measurements.slice(0,e),n=e;n<o;n++){var r=T(n),i=W[r],a=t[n-1]?t[n-1].end:b,l="number"==typeof i?i:s(n),c=a+l;t[n]={index:n,start:a,size:l,end:c,key:r}}return t}),[s,W,b,o,T]),J=((null==(t=X[o-1])?void 0:t.end)||b)+w;I.current.measurements=X,I.current.totalSize=J;var Y=j?j.current:x.current,K=r.useRef(C);K.current=C,c((function(){if(Y){var e=function(e){var t=K.current?K.current(e):Y[$];M(t)};return e(),Y.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){Y.removeEventListener("scroll",e)}}M(0)}),[Y,$]);var Z=function(e){var t=e.measurements,n=e.outerSize,r=e.scrollOffset,i=t.length-1,o=function(e){return t[e].start},a=v(0,i,o,r),s=a;for(;s<i&&t[s].end<r+n;)s++;return{start:a,end:s}}(I.current),Q=Z.start,ee=Z.end,te=r.useMemo((function(){return N({start:Q,end:ee,overscan:d,size:X.length})}),[Q,ee,d,X.length,N]),ne=r.useRef(P);ne.current=P;var re=r.useMemo((function(){for(var e=[],t=function(t,n){var r=te[t],o=i(i({},X[r]),{},{measureRef:function(e){if(e){var t=ne.current(e,O);if(t!==o.size){var n=I.current.scrollOffset;o.start<n&&B(n+(t-o.size)),V.current.push(r),G((function(e){var n;return i(i({},e),{},((n={})[o.key]=t,n))}))}}}});e.push(o)},n=0,r=te.length;n<r;n++)t(n);return e}),[te,B,O,X]),ie=r.useRef(!1);c((function(){ie.current&&G({}),ie.current=!0}),[s]);var oe=r.useCallback((function(e,t){var n=(void 0===t?{}:t).align,r=void 0===n?"start":n,i=I.current,o=i.scrollOffset,a=i.outerSize;"auto"===r&&(r=e<=o?"start":e>=o+a?"end":"start"),"start"===r?S(e):"end"===r?S(e-a):"center"===r&&S(e-a/2)}),[S]),ae=r.useCallback((function(e,t){var n=void 0===t?{}:t,r=n.align,a=void 0===r?"auto":r,s=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["align"]),l=I.current,c=l.measurements,u=l.scrollOffset,d=l.outerSize,f=c[Math.max(0,Math.min(e,o-1))];if(f){if("auto"===a)if(f.end>=u+d)a="end";else{if(!(f.start<=u))return;a="start"}var p="center"===a?f.start+f.size/2:"end"===a?f.end:f.start;oe(p,i({align:a},s))}}),[oe,o]),se=r.useCallback((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ae.apply(void 0,t),requestAnimationFrame((function(){ae.apply(void 0,t)}))}),[ae]);return{virtualItems:re,totalSize:J,scrollToOffset:oe,scrollToIndex:se,measure:q}}var v=function(e,t,n,r){for(;e<=t;){var i=(e+t)/2|0,o=n(i);if(o<r)e=i+1;else{if(!(o>r))return i;t=i-1}}return e>0?e-1:0}}}]);
//# sourceMappingURL=2408.bundle.9c1c7200.js.map